{"version":3,"sources":["components/TactileButtonNotification.jsx","components/PioreactorIcon.jsx","components/Drawer.jsx","components/Header.jsx","components/LogTable.jsx","components/ExperimentSummary.jsx","components/Chart.jsx","components/MediaCard.jsx","components/ClearChartButton.jsx","components/ClearLogButton.jsx","utilities.js","ExperimentOverview.jsx","DownloadData.jsx","components/ButtonChangeDosingDialog.jsx","components/ActionPumpForm.jsx","Pioreactors.jsx","components/CleaningScript.jsx","components/StartSensors.jsx","components/StartCalculations.jsx","StartNewExperiment.jsx","EditConfig.jsx","App.jsx","serviceWorker.js","index.js"],"names":["TactileButtonNotification","props","React","useState","unit","setUnit","renamedUnit","setRenamedUnit","open","setOpen","useEffect","config","client","remote","Client","ws_url","Math","random","console","log","connect","onSuccess","subscribe","join","qos","onMessageArrived","msg","payloadString","topic","split","Snackbar","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","key","Alert","severity","variant","icon","AlertTitle","style","fontSize","PioreactorIcon","SvgIcon","id","stroke","strokeWidth","fill","fillRule","transform","primary","disabled","black","color","d","cx","cy","r","SideDrawer","isOpen","setIsOpen","isSelected","path","window","location","pathname","toggleDrawer","event","type","Fragment","IconButton","aria-label","edge","onClick","Drawer","anchor","onOpen","role","onKeyDown","alt","src","width","marginLeft","marginTop","List","ListItem","href","component","button","selected","ListItemIcon","ListItemText","Divider","useStyles","makeStyles","theme","root","flexGrow","title","Header","classes","className","AppBar","position","Toolbar","Typography","Link","underline","height","target","rel","Button","textTransform","verticalAlign","LogTable","state","listOfLogs","onConnect","bind","fetch","then","response","json","data","setState","this","getData","message","length","pop","payload","unshift","timestamp","moment","format","is_error","includes","string","slice","name","Card","CardContent","Box","fontWeight","TableContainer","overflowY","Table","stickyHeader","size","TableHead","TableRow","TableCell","clsx","headerCell","TableBody","map","i","tightCell","smallText","errorLog","renameUnit","Component","withStyles","padding","backgroundColor","tightRight","textAlign","cardContent","pos","marginBottom","textIcon","margin","EditableDescription","handleChange","evt","desc","value","onBlur","originalDesc","method","body","JSON","stringify","experiment","description","headers","res","status","openSnackBar","handleSnackbarClose","e","reason","render","innerRef","contentEditable","html","onChange","tagName","createRef","prevProps","ExperimentSummary","experimentMetadata","startedAt","display","justifyContent","marginRight","float","diff","colors","Chart","createToolTip","datum","x","renameAndFormatSeries","childName","round","y","seriesMap","maxTimestamp","parseInt","hiddenSeries","Set","lastMsgRecievedAt","names","legendEvents","minTimestamp","subtract","selectLegendData","selectVictoryLines","dataFile","initialSeriesMap","entries","v","filter","filterDataPoints","Object","keys","mts","min","values","s","createLegendEvents","idx","eventKey","String","eventHandlers","mutation","delete","add","retained","currentTime","isODReading","push","parseFloat","newSeriesMap","error","match","results","index","sensor","breakString","totalLength","delta_ts","startValue","stopValue","cardinality","arr","step","linspace","startOf","mt","line","item","symbol","has","interpolation","labels","parent","border","VictoryVoronoiContainer","createContainer","axis_display_ts_format","ts","createXTickValues","maxHeight","domainPadding","left","right","bottom","top","events","responsive","VictoryTheme","material","containerComponent","voronoiBlacklist","labelComponent","cornerRadius","flyoutStyle","text","textAnchor","fontFamily","tickFormat","formatTs","tickValues","tickLabels","offsetY","orientation","crossAxis","dependentAxis","domain","label","yAxisLabel","axisLabelComponent","dy","symbolSpacer","itemsPerRow","borderPadding","cursor","gutter","MediaCard","mediaThroughputPerUnit","altMediaThroughputPerUnit","mediaThroughput","altMediaThroughput","rates","all","mediaRate","altMediaRate","prevState","getRecentRates","hash","object","hasOwnProperty","topicParts","destinationName","objectRef","totalRef","addOrUpdate","total","reduce","a","b","align","scope","ClearChartButton","jobName","Message","publish","reload","ClearLogButton","parseINIString","regex","section","param","comment","lines","forEach","test","Overview","setExperimentMetadata","getLatestExperiment","Grid","container","spacing","justify","xs","paddingRight","md","paddingLeft","formControl","ExperimentSelection","experiments","setExperiments","FormControl","FormLabel","Select","native","inputProps","CheckboxesGroup","FormGroup","FormControlLabel","control","Checkbox","checked","isChecked","growth_rates","io_events","od_readings_raw","od_readings_filtered","logs","alt_media_fraction","io_algorithm_settings","DownloadDataFormContainer","isRunning","setIsRunning","isError","setIsError","errorMsg","setErrorMsg","experimentSelection","datasetCheckbox","runningFeedback","CircularProgress","errorFeedbackOrDefault","preventDefault","some","link","document","createElement","setAttribute","appendChild","click","remove","catch","DownloadData","textFieldCompact","unitTitle","unitTitleDialog","suptitle","SilentForm","defaults","duration","updateParent","TextField","defaultValue","InputProps","endAdornment","InputAdornment","PIDTurbidostatForm","volume","target_od","onSettingsChange","PIDMorbidostatForm","target_growth_rate","ButtonChangeDosingDialog","io_algorithm","algoSettings","setAlgoSettings","isClicked","setIsClicked","setClient","updateFromChild","setting","currentDosingAlgorithm","Dialog","aria-labelledby","PaperProps","DialogTitle","DialogContent","gutterBottom","mode","maxWidth","switchToForm","actionTextField","actionForm","actionToAct","ActionPumpForm","mL","setML","setDuration","isMLDisabled","setIsMLDisabled","isDurationDisabled","setIsDurationDisabled","openSnackbar","setOpenSnackbar","action","params","ml","source_of_event","unitNumber","URLSearchParams","replace","pioreactorCard","disabledText","textbox","textboxLabel","footnote","textField","textFieldWide","slider","divider","TabPanel","children","other","hidden","UnitSettingDisplay","stateDisplay","default","MQTTConnect","passChildData","parsedFloat","isNaN","isStateSetting","isUnitActive","displaySettings","toFixed","precision","measurementUnit","ButtonConfirmStopProcessDialog","handleClose","aria-describedby","DialogContentText","DialogActions","autoFocus","PioreactorHeader","Summary","PatientButton","buttonText","setButtonText","disableElevation","SettingsActionsDialog","defaultStirring","setDefaultStirring","snackbarOpen","setSnackbarOpen","tabValue","setTabValue","setPioreactorJobState","job","sendMessage","setTimeout","startPioreactorJob","job_attr","setPioreactorJobAttr","setPioreactorJobAttrOnEnter","ok","Error","fetchData","createUserButtonsBasedOnState","jobState","parentJob","odButtons","ODReadingJobState","grButtons","growthRateJobState","ioButtons","IOEventsJobState","stirringButtons","stirringJobState","Tabs","newValue","indicatorColor","textColor","Tab","isPlural","Slider","stirringDCState","valueLabelDisplay","onChangeCommitted","marks","volumeState","onKeyPress","targetODState","durationState","targetGrowthRateState","dosingAlgorithm","SettingsActionsDialogAll","jobButton","ActiveUnits","units","PioreactorCard","setStirringDCState","setStirringJobState","setODReadingJobState","setGrowthRateJobState","setIOEventsJobState","temperatureControllingJobState","setTemperatureControllingJobState","setTargetODState","setDurationState","setTargetGrowthRateState","setVolumeState","setDosingAlgorithm","temperature","setTemperature","alignRight","InactiveUnits","Pioreactors","actionsContainer","resetContainer","divInstructions","CycleLiquid","liquid","additionalMsg","duty_cycle","MediaFlush","isAlt","altMedia","AddFinalVolumeOfMedia","VerticalLinearStepper","activeStep","setActiveStep","steps","handleNext","prevActiveStep","handleBack","Stepper","Step","StepLabel","StepContent","getStepContent","Paper","square","elevation","StartStirringButton","StartODReading","StartSensors","direction","alignItems","fontScale","StartGrowthRate","snackbarMessage","setSnackbarMessage","StartCalculations","setExperiment","instructions","halfTextField","ExperimentSummaryForm","formError","setFormError","expName","setExpName","setTimestamp","setDescription","required","InputLabelProps","shrink","rowsMax","placeholder","multiline","fullWidth","publishExpNameToMQTT","StartNewExperimentContainer","skipped","setSkipped","content","optional","isStepOptional","isStepSkipped","stepProps","labelProps","completed","prevSkipped","newSkipped","scrollTo","StartNewExperiment","EditableCodeDiv","onSelectionChange","filename","getConfig","getCodeFlaskRef","codeFlask","onTextChange","code","snackbarMsg","availableConfigs","saveCurrentCode","getListOfConfigFiles","letterSpacing","editorRef","language","EditConfigContainer","EditConfig","createMuiTheme","palette","background","main","App","setConfig","CssBaseline","ExperimentOverview","Boolean","hostname","ReactDOM","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.28d8657c.chunk.js","sourcesContent":["import React from \"react\";\nimport { Client } from \"paho-mqtt\";\nimport { Alert, AlertTitle } from '@material-ui/lab';\n\nimport Snackbar from '@material-ui/core/Snackbar';\n\nfunction TactileButtonNotification(props) {\n  var [unit, setUnit] = React.useState(\"\")\n  var [renamedUnit, setRenamedUnit] = React.useState(\"\")\n  var [open, setOpen] = React.useState(false)\n\n  React.useEffect(() => {\n    if (!props.config['network.topology']){\n      return\n    }\n\n    const onMessageArrived = (msg) => {\n      if (msg.payloadString === \"1\"){\n        var unit = msg.topic.split(\"/\")[1]\n        setUnit(unit)\n        try {\n          setRenamedUnit(props.config['ui.overview.rename'][unit])\n        }\n        catch {}\n        setOpen(true)\n      }\n      else {\n        setOpen(false)\n      }\n    }\n\n    const onSuccess = () => {\n      client.subscribe(\n      [\n        \"pioreactor\",\n        \"+\",\n        \"+\",\n        \"monitor\",\n        \"button_down\"\n      ].join(\"/\"),\n      { qos: 1 }\n      )\n    }\n\n    var client = null\n    if (props.config.remote) {\n      client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      console.log(props.config)\n      client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n    client.connect({onSuccess: onSuccess});\n    client.onMessageArrived = onMessageArrived;\n\n  },[props.config])\n\n\n  return (\n    <Snackbar\n      open={open}\n      autoHideDuration={null}\n      onClose={() => {}}\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      key={\"button-tactile-snackbar\"}\n    >\n    <Alert severity=\"info\" variant=\"filled\" icon={false}>\n      <AlertTitle style={{fontSize: 25}}>{unit + (renamedUnit ? \" / \" + renamedUnit : \"\")}</AlertTitle>\n      Holding <b>{unit}</b>'s button down\n    </Alert>\n    </Snackbar>\n)}\n\nexport default TactileButtonNotification;\n","import React from 'react'\n\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\n\nfunction PioreactorIcon(props) {\n  const colors = {\n    primary: \"#5331CA\",\n    disabled: \"rgba(0, 0, 0, 0.38)\",\n    black: \"rgba(0, 0, 0, 0.87)\"\n  }\n  return (\n    <SvgIcon {...props}>\n        <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <g id=\"Experiment-Page-1\" transform=\"translate(-728.000000, -1502.000000)\" stroke={colors[props.color] || \"rgba(0, 0, 0, 0.54)\"} strokeWidth=\"1.8\">\n                <g id=\"pioreactor\" transform=\"translate(729.000000, 1503.000000)\">\n                    <path d=\"M1.4,18.9 L1.4,14.7 L0,14.7 L0,11.2 L2.799,11.2 L2.8,0 L14,0 L13.999,11.2 L16.8,11.2 L16.8,14.7 L15.399,14.7 L15.4,18.9 L1.4,18.9 Z\" id=\"Combined-Shape\"></path>\n                    <circle id=\"Oval\" cx=\"8.4\" cy=\"13.3\" r=\"2.1\"></circle>\n                </g>\n            </g>\n        </g>\n    </SvgIcon>\n  );\n}\n\nexport default PioreactorIcon;\n","import React from 'react';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport IconButton from '@material-ui/core/IconButton';\nimport EditIcon from '@material-ui/icons/Edit';\nimport SaveAltIcon from '@material-ui/icons/SaveAlt';\nimport DashboardIcon from '@material-ui/icons/Dashboard';\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\nimport PioreactorIcon from './PioreactorIcon';\n\nexport default function SideDrawer() {\n  const [isOpen, setIsOpen] = React.useState(false)\n\n  function isSelected(path) {\n    return (window.location.pathname === path)\n  }\n\n\n\n  const toggleDrawer = (open) => (event) => {\n    if (event && event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\n      return;\n    }\n    setIsOpen(open);\n  };\n\n  const list = () => (\n    <div\n      role=\"presentation\"\n      onClick={toggleDrawer(false)}\n      onKeyDown={toggleDrawer(false)}\n    >\n      <img alt=\"pioreactor logo\" src=\"grey_color.png\" width=\"40%\" style={{marginLeft: \"70px\", marginTop: \"5px\"}}/>\n      <List>\n\n        <ListItem href=\"/\" component=\"a\" button key={\"overview\"} selected={isSelected(\"/\") || isSelected(\"/overview\")}>\n          <ListItemIcon><DashboardIcon color={(isSelected(\"/\") || isSelected(\"/overview\")) ? \"primary\" : \"inherit\"}/> </ListItemIcon>\n          <ListItemText primary={\"Experiment Overview\"} />\n        </ListItem>\n        <ListItem button href=\"/pioreactors\"  component=\"a\" key={\"pioreactors\"} selected={isSelected(\"/pioreactors\")}>\n          <ListItemIcon> <PioreactorIcon color={isSelected(\"/pioreactors\") ? \"primary\" : \"inherit\"}/> </ListItemIcon>\n          <ListItemText primary={\"Pioreactors\"} />\n        </ListItem>\n\n\n      </List>\n      <Divider />\n      <List>\n        <ListItem button href=\"/edit-config\"  component=\"a\" key={\"edit_config\"} selected={isSelected(\"/edit-config\")}>\n          <ListItemIcon> <EditIcon color={isSelected(\"/edit-config\") ? \"primary\" : \"inherit\"}/> </ListItemIcon>\n          <ListItemText primary={\"Edit config.ini\"} />\n        </ListItem>\n        <ListItem href=\"/download-data\" component=\"a\" button key={\"download_data\"} selected={isSelected(\"/download-data\")}>\n          <ListItemIcon><SaveAltIcon color={isSelected(\"/download-data\") ? \"primary\" : \"inherit\"}/> </ListItemIcon>\n          <ListItemText primary={\"Download experiment data\"} />\n        </ListItem>\n\n      </List>\n      <Divider />\n      <List>\n        <ListItem href=\"https://github.com/Pioreactor/pioreactor/wiki\" component=\"a\" button key=\"help\">\n          <ListItemIcon><HelpOutlineIcon/> </ListItemIcon>\n          <ListItemText primary={\"Documentation and help\"} />\n        </ListItem>\n      </List>\n    </div>\n  );\n\n  return (\n      <React.Fragment key={\"leftDrawer\"}>\n        <IconButton\n          color=\"inherit\"\n          aria-label=\"open drawer\"\n          edge=\"start\"\n          onClick={toggleDrawer(true)}\n        >\n          <MenuIcon />\n        </IconButton>\n\n        <Drawer\n          anchor={\"left\"}\n          open={isOpen}\n          onClose={toggleDrawer(false)}\n          onOpen={toggleDrawer(true)}\n        >\n          {list()}\n        </Drawer>\n      </React.Fragment>\n  );\n}\n","import React from 'react'\nimport {AppBar, Toolbar, Typography, Link, Button} from '@material-ui/core';\nimport {makeStyles} from '@material-ui/styles';\nimport SideDrawer from './Drawer'\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  title: {\n    flexGrow: 1,\n  },\n}));\n\n\nconst Header = () => {\n    const classes = useStyles();\n    return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <Toolbar variant=\"dense\">\n          <SideDrawer />\n          <Typography variant=\"h6\" className={classes.title}>\n            <Link color=\"inherit\" underline=\"none\" href=\"/\" className={classes.title}> <img alt=\"pioreactor logo\" src=\"white_colour.png\" style={{width: \"120px\", height: \"29px\"}}/> </Link>\n          </Typography>\n          <Link color=\"inherit\" underline=\"none\" href=\"https://github.com/Pioreactor/pioreactor/wiki\" target=\"_blank\" rel=\"noopener\">\n            <Button color=\"inherit\" style={{textTransform: \"none\"}}>Help <HelpOutlineIcon style={{ fontSize: 18, verticalAlign: \"middle\", marginLeft: 5 }}/></Button>\n          </Link>\n        </Toolbar>\n      </AppBar>\n    </div>\n    )\n}\n\nexport default Header;\n","import React from 'react'\n\nimport clsx from 'clsx';\nimport {Client} from 'paho-mqtt';\nimport moment from 'moment';\n\n\nimport {withStyles} from '@material-ui/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nconst useStyles = theme => ({\n  tightCell: {\n    padding: \"8px 2px 6px 4px\",\n    fontSize: 13,\n  },\n  smallText: {\n    fontSize: 12,\n  },\n  headerCell: {\n    backgroundColor: \"white\",\n    padding: \"8px 6px 6px 6px\",\n  },\n  tightRight: {\n    textAlign: \"right\"\n  },\n  errorLog: {\n    backgroundColor: \"#ff7961\"\n  }\n});\n\nclass LogTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {listOfLogs: []};\n    this.onConnect = this.onConnect.bind(this);\n    this.onMessageArrived = this.onMessageArrived.bind(this);\n  }\n\n  async getData() {\n    await fetch(\"./data/all_pioreactor.log.json\")\n      .then(response => {\n        return response.json();\n      })\n      .then(data => {\n        this.setState({listOfLogs: data});\n      });\n  }\n\n  componentDidMount() {\n    this.getData()\n    if (this.props.config.remote) {\n      this.client = new Client(\n        `ws://${this.props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      this.client = new Client(\n        `${this.props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n    this.client.connect({'onSuccess': this.onConnect});\n    this.client.onMessageArrived = this.onMessageArrived;\n  }\n\n  onConnect() {\n      this.client.subscribe([\"pioreactor\", \"+\", \"+\", \"log\"].join(\"/\"))\n  }\n\n  onMessageArrived(message) {\n    if (this.state.listOfLogs.length > 50){\n      this.state.listOfLogs.pop()\n    }\n    const unit = message.topic.split(\"/\")[1]\n    const payload = message.payloadString\n    this.state.listOfLogs.unshift(\n      {timestamp: moment().format(\"x\"), unit: unit, message: payload, is_error: (payload.includes(\"error\") ||  payload.includes(\"failed\"))}\n    )\n    this.setState({\n      listOfLogs: this.state.listOfLogs\n    });\n  }\n\n  breakString(string){\n    if (string.length > 5){\n      return string.slice(0, 4) + \"...\"\n    }\n    return string\n  }\n\n  renameUnit(name){\n    if (!this.props.config['ui.overview.rename']){\n      return name\n    }\n    return (this.props.config['ui.overview.rename'][name]) || name\n  }\n\n  render(){\n    const { classes } = this.props;\n    return (\n      <Card>\n        <CardContent>\n          <Typography variant=\"h6\" component=\"h2\">\n            <Box fontWeight=\"fontWeightRegular\">\n              Event Logs\n            </Box>\n          </Typography>\n          <TableContainer style={{ height: \"700px\", width: \"100%\", overflowY: \"scroll\"}}>\n            <Table stickyHeader size=\"small\" aria-label=\"log table\">\n               <TableHead>\n                <TableRow>\n                  <TableCell className={clsx(classes.headerCell)}>Timestamp</TableCell>\n                  <TableCell className={clsx(classes.headerCell)}>Message</TableCell>\n                  <TableCell className={clsx(classes.headerCell)}>Pioreactor</TableCell>\n                </TableRow>\n              </TableHead>\n\n              <TableBody>\n                {this.state.listOfLogs.map((log, i) => (\n                  <TableRow key={i}>\n                    <TableCell className={clsx(classes.tightCell, classes.smallText, {[classes.errorLog]: log.is_error})}> {moment(log.timestamp, 'x').format('HH:mm:ss')} </TableCell>\n                    <TableCell className={clsx(classes.tightCell, classes.smallText, {[classes.errorLog]: log.is_error})}> {log.message} </TableCell>\n                    <TableCell className={clsx(classes.tightCell, classes.smallText, {[classes.errorLog]: log.is_error})}> {this.renameUnit(log.unit)}</TableCell>\n                  </TableRow>\n                  ))\n                }\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </CardContent>\n      </Card>\n  )}\n}\n\n\n\nexport default withStyles(useStyles)(LogTable);\n","import React from 'react'\nimport {makeStyles} from '@material-ui/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/Card';\nimport {Typography} from '@material-ui/core';\nimport moment from \"moment\";\nimport Box from '@material-ui/core/Box';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Divider from '@material-ui/core/Divider';\nimport Button from '@material-ui/core/Button';\nimport ContentEditable from 'react-contenteditable'\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\nimport TimelapseIcon from '@material-ui/icons/Timelapse';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport AddIcon from '@material-ui/icons/Add';\n\nconst useStyles = makeStyles({\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n  textIcon: {\n    fontSize: 15,\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n});\n\n\n\nclass EditableDescription extends React.Component {\n  constructor(props) {\n    super(props)\n    this.contentEditable = React.createRef();\n    this.state = {desc: \"\", openSnackBar: false, originalDesc: \"\"};\n  };\n\n  componentDidUpdate(prevProps) {\n    if (this.props.description !== prevProps.description) {\n      this.setState({desc: `${this.props.description}`, originalDesc: `${this.props.description}`})\n    }\n  }\n\n  handleChange = evt => {\n    this.setState({desc: evt.target.value});\n  };\n\n  onBlur = evt => {\n    if (this.state.desc !== this.state.originalDesc) {\n      this.setState({originalDesc: this.state.desc})\n      return fetch('update_experiment_desc', {\n          method: \"POST\",\n          body: JSON.stringify({experiment : this.props.experiment, description: this.state.desc}),\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          }\n        }).then(res => {\n          if (res.status === 200){\n            this.setState({openSnackBar: true});\n          }\n        })\n    }\n  };\n\n  handleSnackbarClose = (e, reason) => {\n    if (reason !== \"clickaway\"){\n      this.setState({openSnackBar: false});\n    }\n  };\n\n  render = () => {\n    return (\n      <div style={{\"padding\": \"0px 5px 0px 5px\"}}>\n        <Box fontWeight=\"fontWeightBold\">\n          Description:\n        </Box>\n        <ContentEditable\n            innerRef={this.contentEditable}\n            html={this.state.desc} // innerHTML of the editable div\n            disabled={false}       // use true to disable editing\n            onChange={this.handleChange} // handle innerHTML change\n            onBlur={this.onBlur}\n            tagName=\"p\"\n            style={{\"padding\": \"3px 3px 3px 2px\"}}\n          />\n          <Snackbar\n            anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n            open={this.state.openSnackBar}\n            onClose={this.handleSnackbarClose}\n            message={\"Updated description\"}\n            autoHideDuration={2500}\n            key={\"snackbarEditDesc\"}\n          />\n      </div>\n    )\n  };\n};\n\n\nfunction ExperimentSummary(props){\n  const classes = useStyles();\n  const experiment = props.experimentMetadata.experiment || \"\"\n  const startedAt = props.experimentMetadata.timestamp || moment()\n  const desc = props.experimentMetadata.description || \"\"\n\n  return(\n    <React.Fragment>\n      <div>\n        <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: \"5px\"}}>\n          <Typography variant=\"h5\" component=\"h1\">\n            <Box fontWeight=\"fontWeightBold\">\n              {experiment}\n            </Box>\n          </Typography>\n          <div >\n            <Button href=\"/download-data\" style={{textTransform: 'none', marginRight: \"0px\", float: \"right\"}} color=\"primary\">\n              <GetAppIcon className={classes.textIcon}/> Download experiment data\n            </Button>\n            <Button href=\"/start-new-experiment\" style={{textTransform: 'none', float: \"right\", marginRight: \"10px\"}} color=\"primary\">\n              <AddIcon className={classes.textIcon}/> New experiment\n            </Button>\n          </div>\n        </div>\n\n        <Divider/>\n        <Typography variant=\"subtitle2\">\n          <Box fontWeight=\"fontWeightBold\" style={{margin: \"10px 2px 10px 2px\", display:\"inline-block\"}}>\n            <CalendarTodayIcon style={{ fontSize: 12, verticalAlign: \"middle\" }}/> Experiment Started:\n          </Box>\n          <Box fontWeight=\"fontWeightRegular\" style={{marginRight: \"20px\", display:\"inline-block\"}}>\n            <span title={moment(startedAt).format(\"YYYY-MM-DD HH:mm:ss\")}>{moment(startedAt).format(\"dddd, MMMM D YYYY\")}</span>\n          </Box>\n          <Box fontWeight=\"fontWeightBold\" style={{display:\"inline-block\", margin: \"10px 2px 10px 0px\"}}>\n            <TimelapseIcon style={{ fontSize: 12, verticalAlign: \"middle\"  }}/>Time Elapsed:\n          </Box>\n          <Box fontWeight=\"fontWeightRegular\" style={{display:\"inline-block\"}}>\n           {(moment().diff(moment(startedAt), 'H'))}h\n          </Box>\n        </Typography>\n      </div>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n          <EditableDescription experiment={experiment} description={desc} />\n        </CardContent>\n      </Card>\n    </React.Fragment>\n  )\n}\n\n\nexport default ExperimentSummary;\n","import React from \"react\";\nimport { Client } from \"paho-mqtt\";\nimport {\n  VictoryChart,\n  VictoryLabel,\n  VictoryAxis,\n  VictoryTheme,\n  VictoryLine,\n  VictoryLegend,\n  createContainer,\n  VictoryTooltip,\n} from \"victory\";\nimport moment from \"moment\";\nimport Card from \"@material-ui/core/Card\";\n\nconst colors = {\n  \"pioreactor1\": \"#9C6ADE\",\n  \"pioreactor1-A\": \"#9C6ADE\",\n  \"pioreactor1-D\": \"#E3D0FF\",\n  \"pioreactor1-C\": \"#50248F\",\n  \"pioreactor1-B\": \"#230051\",\n\n  \"pioreactor2\": \"#47C1BF\",\n  \"pioreactor2-A\": \"#47C1BF\",\n  \"pioreactor2-D\": \"#B7ECEC\",\n  \"pioreactor2-C\": \"#00848E\",\n  \"pioreactor2-B\": \"#003135\",\n\n\n  \"pioreactor3\": \"#F49342\",\n  \"pioreactor3-A\": \"#F49342\",\n  \"pioreactor3-D\": \"#FFC58B\",\n  \"pioreactor3-C\": \"#C05717\",\n  \"pioreactor3-B\": \"#4A1504\",\n\n  \"pioreactor4\": \"#50B83C\",\n  \"pioreactor4-A\": \"#50B83C\",\n  \"pioreactor4-B\": \"#173630\",\n  \"pioreactor4-C\": \"#108043\",\n  \"pioreactor4-D\": \"#BBE5B3\",\n\n};\n\nfunction linspace(startValue, stopValue, cardinality) {\n  var arr = [];\n  var step = (stopValue - startValue) / (cardinality - 1);\n  for (var i = 0; i < cardinality; i++) {\n    arr.push(startValue + step * i);\n  }\n  return arr;\n}\n\nclass Chart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      seriesMap: {},\n      maxTimestamp: parseInt(moment().format(\"x\")),\n      hiddenSeries: new Set(),\n      lastMsgRecievedAt: parseInt(moment().format(\"x\")),\n      names: [],\n      legendEvents: [],\n      minTimestamp: parseInt(moment().subtract(30, 'seconds').format(\"x\")),\n    };\n    this.onConnect = this.onConnect.bind(this);\n    this.onMessageArrived = this.onMessageArrived.bind(this);\n    this.selectLegendData = this.selectLegendData.bind(this);\n    this.selectVictoryLines = this.selectVictoryLines.bind(this);\n\n  }\n\n  onConnect() {\n    this.client.subscribe(\n      [\"pioreactor\", \"+\", this.props.experiment, this.props.topic].join(\"/\")\n    );\n  }\n\n  componentDidMount() {\n    this.getData();\n\n    if (this.props.config.remote) {\n      this.client = new Client(\n        `ws://${this.props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      this.client = new Client(\n        `${this.props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n\n\n    this.client.connect({ onSuccess: this.onConnect });\n    this.client.onMessageArrived = this.onMessageArrived;\n  }\n\n  async getData() {\n    await fetch(this.props.dataFile)\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        let initialSeriesMap = {};\n        for (const [i, v] of data[\"series\"].entries()) {\n          if (data[\"data\"][i].length > 0) {\n            initialSeriesMap[v] = {\n              data: (data[\"data\"][i]).filter(this.filterDataPoints(data[\"data\"][i].length)),\n              name: v,\n              color: colors[v],\n            };\n          }\n        }\n        let names = Object.keys(initialSeriesMap);\n        let mts = Math.min(\n          ...Object.values(initialSeriesMap).map((s) => parseInt(s.data[0].x))\n        );\n        this.setState({\n          seriesMap: initialSeriesMap,\n          legendEvents: this.createLegendEvents(names),\n          names: names,\n          minTimestamp: mts,\n        });\n      });\n  }\n\n  createLegendEvents(names) {\n    return names.map((name, idx) => {\n      return {\n        childName: [\"legend\"],\n        target: \"data\",\n        eventKey: String(idx),\n        eventHandlers: {\n          onClick: () => {\n            return [\n              {\n                childName: [\"line-\" + name],\n                target: \"data\",\n                mutation: () => {\n                  if (!this.state.hiddenSeries.delete(name)) {\n                    // Was not already hidden => add to set\n                    this.state.hiddenSeries.add(name);\n                  }\n                  this.setState({\n                    hiddenSeries: new Set(this.state.hiddenSeries),\n                  });\n                  return null;\n                },\n              },\n            ];\n          },\n        },\n      };\n    });\n  }\n\n  onMessageArrived(message) {\n    if (message.retained){\n      return\n    }\n    const currentTime = parseInt(moment().format(\"x\"));\n\n    var key = this.props.isODReading\n      ? message.topic.split(\"/\")[1] + \"-\" + message.topic.split(\"/\")[5]\n      : message.topic.split(\"/\")[1];\n\n    try {\n      if (!(key in this.state.seriesMap)){\n        const newSeriesMap = {...this.state.seriesMap, [key]:  {\n          data: [{x: currentTime, y: parseFloat(message.payloadString)}],\n          name: key,\n          color: colors[key]\n        }}\n\n        this.setState({ seriesMap: newSeriesMap })\n        this.setState({\n          names: [...this.state.names, key]\n        })\n      } else {\n        // .push seems like bad state management, and maybe a hit to performance...\n        this.state.seriesMap[key].data.push({\n          x: currentTime,\n          y: parseFloat(message.payloadString),\n        });\n        this.setState({ seriesMap: this.state.seriesMap })\n      }\n\n      this.setState({\n        maxTimestamp: currentTime,\n        lastMsgRecievedAt: currentTime,\n      });\n    }\n    catch (error) {\n      console.log(error)\n    }\n    return;\n  }\n\n  breakString(string){\n    if (string.length > 7){\n      return string.slice(0, 5) + \"...\" + string.slice(string.length-2, string.length)\n    }\n    return string\n  }\n\n  renameAndFormatSeries(name){\n    if (!this.props.config['ui.overview.rename']){\n      return name\n    }\n\n    if (name.match(/(.*)-([ABCD])/g)){\n      const results = name.match(/(.*)-([ABCD])/);\n      const index = results[1];\n      const sensor = results[2];\n      return this.breakString(this.props.config['ui.overview.rename'][index] || index) + sensor\n    }\n    else {\n      return this.breakString(this.props.config['ui.overview.rename'][name] || name)\n    }\n  }\n\n\n  filterDataPoints(totalLength){\n    return function(value, index){\n      if (totalLength < 500){\n        return true\n      }\n      if ((index === 0) || (index === (totalLength - 1))){\n        return true\n      }\n      else if (index % Math.round(totalLength/500) === 0){\n        return true\n      } else {\n        return false\n      }\n    }\n  }\n\n  createXTickValues(minTimestamp, maxTimestamp){\n    const delta_ts = moment(maxTimestamp, \"x\").diff(\n      moment(minTimestamp, \"x\"),\n      \"hours\"\n    );\n    const v = linspace(\n      minTimestamp,\n      maxTimestamp + 100000,\n      7\n    ).map((x) =>\n      moment(Math.round(x), \"x\").startOf(delta_ts >= 16 ? \"hour\" : \"minute\")\n    );\n    return v\n\n  }\n\n  createToolTip = (d) => {\n      return `${moment(d.datum.x, 'x').format(\"dd HH:mm\")}\n${this.renameAndFormatSeries(d.datum.childName)}: ${Math.round(d.datum.y * 1000) / 1000}`\n  }\n\n  formatTs(format){\n    return function(mt){\n      return mt.format(format)\n  }}\n\n  selectLegendData(name){\n    if (!this.state.seriesMap) {\n      return {}\n    }\n    const line = this.state.seriesMap[name];\n    const item = {\n      name: this.renameAndFormatSeries(line.name),\n      symbol: { fill: line.color },\n    };\n    if (this.state.hiddenSeries.has(name)) {\n      return { ...item, symbol: { fill: \"white\" } };\n    }\n    return item;\n  }\n\n  selectVictoryLines(name) {\n    if (this.state.hiddenSeries.has(name)) {\n      return undefined;\n    }\n    return (\n      <VictoryLine\n        interpolation={this.props.interpolation}\n        key={\"line-\" + name + this.props.title}\n        name={name}\n        style={{\n          labels: {fill: this.state.seriesMap[name].color},\n          data: {\n            stroke: this.state.seriesMap[name].color,\n            strokeWidth: 2,\n          },\n          parent: { border: \"1px solid #ccc\" },\n        }}\n        data={this.state.seriesMap[name].data}\n        x=\"x\"\n        y=\"y\"\n      />\n    );\n  }\n\n  render() {\n    const delta_ts = moment(this.state.maxTimestamp, \"x\").diff(\n      moment(this.state.minTimestamp, \"x\"),\n      \"hours\"\n    );\n    const VictoryVoronoiContainer = createContainer(\"voronoi\");\n    const axis_display_ts_format =\n      delta_ts >= 16 ? (delta_ts >= 5 * 24 ? \"MMM DD\" : \"dd HH:mm\") : \"H:mm\";\n    const ts = this.createXTickValues(this.state.minTimestamp, this.state.maxTimestamp)\n    return (\n      <Card style={{ maxHeight: \"100%\"}}>\n        <VictoryChart\n          title={this.props.title}\n          domainPadding={10}\n          padding={{ left: 70, right: 50, bottom: 80, top: 50 }}\n          events={this.state.legendEvents}\n          responsive={true}\n          width={600}\n          height={315}\n          theme={VictoryTheme.material}\n          containerComponent={\n            <VictoryVoronoiContainer\n              voronoiBlacklist={['parent']}\n              labels={this.createToolTip}\n              labelComponent={\n                <VictoryTooltip\n                  cornerRadius={0}\n                  flyoutStyle={{\n                    fill: \"white\",\n                    stroke: \"#90a4ae\",\n                    strokeWidth: 1.5,\n                  }}\n                />\n              }\n            />\n          }\n        >\n          <VictoryLabel\n            text={this.props.title}\n            x={300}\n            y={30}\n            textAnchor=\"middle\"\n            style={{\n              fontSize: 15,\n              fontFamily: \"inherit\",\n            }}\n          />\n          <VictoryAxis\n            tickFormat={this.formatTs(axis_display_ts_format)}\n            tickValues={ts}\n            style={{\n              tickLabels: {\n                fontSize: 13,\n                padding: 5,\n                fontFamily: \"inherit\",\n              },\n            }}\n            offsetY={80}\n            orientation=\"bottom\"\n          />\n          <VictoryAxis\n            crossAxis={false}\n            dependentAxis\n            domain={this.props.domain}\n            label={this.props.yAxisLabel}\n            axisLabelComponent={\n              <VictoryLabel\n                dy={-40}\n                style={{\n                  fontSize: 15,\n                  padding: 10,\n                  fontFamily: \"inherit\",\n                }}\n              />\n            }\n            style={{\n              tickLabels: {\n                fontSize: 13,\n                padding: 5,\n                fontFamily: \"inherit\",\n              },\n            }}\n          />\n          <VictoryLegend\n            x={60}\n            y={267}\n            symbolSpacer={10}\n            itemsPerRow={6}\n            name={\"legend\"}\n            borderPadding={{ right: 8 }}\n            orientation=\"horizontal\"\n            cursor={\"pointer\"}\n            gutter={15}\n            style={{\n              labels: { fontSize: 12 },\n              data: { stroke: \"#485157\", strokeWidth: 1, size: 6 },\n            }}\n            data={this.state.names.map(this.selectLegendData)}\n          />\n          {Object.keys(this.state.seriesMap).map(this.selectVictoryLines)}\n        </VictoryChart>\n      </Card>\n    );\n  }\n}\n\nexport default Chart;\n","import React from 'react'\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport {Client} from 'paho-mqtt';\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport {withStyles} from '@material-ui/styles';\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nimport PioreactorIcon from \"./PioreactorIcon\"\n\n\n\nconst useStyles = theme => ({\n  tightCell: {\n    padding: \"8px 2px 6px 4px\",\n    fontSize: 13,\n  },\n  smallText: {\n    fontSize: 12,\n  },\n  headerCell: {\n    backgroundColor: \"white\",\n    padding: \"8px 6px 6px 6px\",\n  },\n  tightRight: {\n    textAlign: \"right\"\n  },\n});\n\n\n\nclass MediaCard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n        mediaThroughputPerUnit: {},\n        altMediaThroughputPerUnit: {},\n        mediaThroughput: 0,\n        altMediaThroughput: 0,\n        rates: {all: {mediaRate: 0, altMediaRate: 0}},\n      };\n    this.onConnect = this.onConnect.bind(this);\n    this.onMessageArrived = this.onMessageArrived.bind(this);\n  }\n\n  async getRecentRates() {\n     await fetch(\"/recent_media_rates/\" + this.props.experiment)\n    .then((response) => {\n      return response.json();\n    })\n    .then((data) => {\n      this.setState(prevState => ({...prevState, rates: data}))\n    });\n  }\n\n  componentDidMount() {\n    if (this.props.config.remote) {\n      this.client = new Client(\n        `ws://${this.props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      this.client = new Client(\n        `${this.props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n\n    this.client.connect({'onSuccess': this.onConnect});\n    this.client.onMessageArrived = this.onMessageArrived;\n  }\n\n  componentDidUpdate(prevProps) {\n     if (prevProps.experiment !== this.props.experiment) {\n      this.getRecentRates()\n     }\n  }\n\n  onConnect() {\n      this.client.subscribe([\"pioreactor\", \"+\", this.props.experiment, \"throughput_calculating\", \"alt_media_throughput\"].join(\"/\"))\n      this.client.subscribe([\"pioreactor\", \"+\", this.props.experiment, \"throughput_calculating\", \"media_throughput\"].join(\"/\"))\n  }\n\n  addOrUpdate(hash, object, value) {\n      if (Object.hasOwnProperty(hash)){\n        object[hash] = value + object[hash]\n      }\n      else{\n        object[hash] = value\n      }\n      return object\n  }\n\n  onMessageArrived(message) {\n    const topic = message.destinationName\n    const topicParts = topic.split(\"/\")\n    const payload = parseFloat(message.payloadString)\n    const unit = topicParts[1]\n    const objectRef = (topicParts.slice(-1)[0] === \"alt_media_throughput\")  ? \"altMediaThroughputPerUnit\"  : \"mediaThroughputPerUnit\"\n    const totalRef = (topicParts.slice(-1)[0] === \"alt_media_throughput\")  ? \"altMediaThroughput\"  : \"mediaThroughput\"\n\n    this.setState({\n      [objectRef]: this.addOrUpdate(unit, this.state[objectRef], payload)\n    });\n\n    var total = Object.values(this.state[objectRef]).reduce((a, b) => a + b, 0)\n\n    this.setState({\n      [totalRef]: total\n    })\n\n  }\n  render(){\n    return (\n    <Card>\n      <CardContent>\n        <Typography variant=\"h6\" component=\"h2\">\n          <Box fontWeight=\"fontWeightRegular\">\n            Dosing\n          </Box>\n        </Typography>\n       <TableContainer style={{ width: \"100%\"}}>\n          <Table size=\"small\" aria-label=\"media throughput\">\n            <TableHead>\n              <TableRow>\n                <TableCell style={{padding: \"6px 0px\"}}></TableCell>\n                <TableCell style={{padding: \"6px 0px\"}} align=\"right\">Media</TableCell>\n                <TableCell style={{padding: \"6px 0px\"}} align=\"right\">Alt. Media</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              <TableRow key=\"all\">\n                <TableCell style={{padding: \"6px 0px\"}} component=\"th\" scope=\"row\">\n                  All Pioreactors\n                </TableCell>\n                <TableCell align=\"right\" style={{fontFamily: \"courier\", fontSize: 14, padding: \"6px 0px\"}}>{this.state.mediaThroughput}mL (~{this.state.rates.all.mediaRate}mL/h)</TableCell>\n                <TableCell align=\"right\" style={{fontFamily: \"courier\", fontSize: 14, padding: \"6px 0px\"}}>{this.state.altMediaThroughput}mL (~{this.state.rates.all.altMediaRate}mL/h)</TableCell>\n              </TableRow>\n\n              {Object.keys(this.state.mediaThroughputPerUnit).map((unit) => (\n                <TableRow key={unit}>\n                  <TableCell style={{padding: \"6px 0px\"}} component=\"th\" scope=\"row\">\n                      <PioreactorIcon style={{ fontSize: 14, verticalAlign: \"middle\" }} color=\"black\"/> {(this.props.config['ui.overview.rename'] &&  this.props.config['ui.overview.rename'][unit]) ? this.props.config['ui.overview.rename'][unit] : unit}\n                  </TableCell>\n                  <TableCell align=\"right\" style={{fontFamily: \"courier\", fontSize: 14, padding: \"6px 0px\"}}>{this.state.mediaThroughputPerUnit[unit]}mL (~{this.state.rates[unit] ? this.state.rates[unit].mediaRate : 0}mL/h)</TableCell>\n                  <TableCell align=\"right\" style={{fontFamily: \"courier\", fontSize: 14, padding: \"6px 0px\"}}>{this.state.altMediaThroughputPerUnit[unit]}mL (~{this.state.rates[unit] ? this.state.rates[unit].altMediaRate: 0}mL/h)</TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </CardContent>\n    </Card>\n  )}\n}\n\nexport default  withStyles(useStyles)(MediaCard);\n","import React from \"react\";\nimport { Client, Message } from \"paho-mqtt\";\nimport ClearIcon from '@material-ui/icons/Clear';\nimport Button from \"@material-ui/core/Button\";\nimport { makeStyles } from '@material-ui/core/styles';\n\n\nconst useStyles = makeStyles((theme) => ({\n  textIcon: {\n    fontSize: 15,\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n}))\n\n\nfunction ClearChartButton(props){\n  const classes = useStyles();\n\n\n  function onClick() {\n    if (props.config.remote) {\n      var client = new Client(\n        `ws://${this.props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      var client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n    client.connect({onSuccess: () => {\n      for (var jobName of ['od_raw', 'od_filtered', 'growth_rate', 'alt_media_fraction']) {\n        var message = new Message(\"\");\n\n        message.destinationName = [\n          \"pioreactor\",\n          \"leader\",\n          \"$experiment\",\n          `${jobName}_time_series_aggregating`,\n          \"aggregated_time_series\",\n          \"set\",\n        ].join(\"/\");\n\n        message.qos = 1;\n        client.publish(message);\n      }\n\n      window.location.reload();\n      return false\n    }});\n  }\n\n  return (\n    <Button color=\"primary\" style={{textTransform: \"none\"}} onClick={onClick}><ClearIcon className={classes.textIcon}/> Clear chart data </Button>\n)}\n\n\nexport default ClearChartButton;\n","import React from \"react\";\nimport { Client, Message } from \"paho-mqtt\";\nimport ClearIcon from '@material-ui/icons/Clear';\nimport Button from \"@material-ui/core/Button\";\nimport { makeStyles } from '@material-ui/core/styles';\n\n\nconst useStyles = makeStyles((theme) => ({\n  textIcon: {\n    fontSize: 15,\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n}))\n\n\nfunction ClearLogButton(props){\n  const classes = useStyles();\n\n\n  function onClick() {\n    if (props.config.remote) {\n      var client = new Client(\n        `ws://${this.props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      var client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n    client.connect({onSuccess: () => {\n      var message = new Message(\"\");\n      message.destinationName = [\n        \"pioreactor\",\n        \"leader\",\n        \"$experiment\",\n        \"log_aggregating\",\n        \"aggregated_log_table\",\n        \"set\",\n      ].join(\"/\");\n      message.qos = 2;\n      client.publish(message);\n      window.location.reload();\n      return false\n    }});\n  }\n\n  return (\n    <Button color=\"primary\" style={{textTransform: \"none\"}} onClick={onClick}> <ClearIcon className={classes.textIcon}/>  Clear log table </Button>\n)}\n\n\nexport default ClearLogButton;\n","\nexport function parseINIString(data){\n    var regex = {\n        section: /^\\s*\\[\\s*([^\\]]*)\\s*\\]\\s*$/,\n        param: /^\\s*([^=]+?)\\s*=\\s*(.*?)\\s*$/,\n        comment: /^\\s*;.*$/\n    };\n    var value = {};\n    var lines = data.split(/[\\r\\n]+/);\n    var section = null;\n    lines.forEach(function(line){\n        if(regex.comment.test(line)){\n            return;\n        }else if(regex.param.test(line)){\n            var match = line.match(regex.param);\n            if(section){\n                value[section][match[1]] = match[2];\n            }else{\n                value[match[1]] = match[2];\n            }\n        }else if(regex.section.test(line)){\n            var match = line.match(regex.section);\n            value[match[1]] = {};\n            section = match[1];\n        }else if(line.length === 0 && section){\n            section = null;\n        };\n    });\n    return value;\n}","import React from \"react\";\n\nimport Grid from \"@material-ui/core/Grid\";\nimport Button from \"@material-ui/core/Button\";\nimport Header from \"./components/Header\";\nimport LogTable from \"./components/LogTable\";\nimport ExperimentSummary from \"./components/ExperimentSummary\";\nimport Chart from \"./components/Chart\";\nimport MediaCard from \"./components/MediaCard\";\nimport ClearChartButton from \"./components/ClearChartButton\";\nimport ClearLogButton from \"./components/ClearLogButton\";\nimport PioreactorIcon from './components/PioreactorIcon';\nimport TactileButtonNotification from \"./components/TactileButtonNotification\";\nimport {parseINIString} from \"./utilities\"\n\n\nfunction Overview(props) {\n\n  const [experimentMetadata, setExperimentMetadata] = React.useState({})\n\n  React.useEffect(() => {\n    async function getLatestExperiment() {\n         await fetch(\"/get_latest_experiment\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          setExperimentMetadata(data)\n        });\n      }\n    getLatestExperiment()\n  }, [])\n\n  return (\n      <React.Fragment>\n        <Grid container spacing={2} justify=\"space-between\">\n          <Grid item xs={12} style={{paddingRight: \"0px\"}}>\n            <Header />\n          </Grid>\n          <Grid item xs={1} md={12}/>\n          <Grid item xs={1} md={12}/>\n\n\n          <Grid item xs={12} md={1}/>\n          <Grid item xs={12} md={10}>\n            <ExperimentSummary experimentMetadata={experimentMetadata}/>\n          </Grid>\n          <Grid item xs={12} md={1}/>\n\n\n          <Grid item xs={12} md={1}/>\n          <Grid item xs={12} md={6} container spacing={2} justify=\"flex-start\" style={{paddingLeft: 0, height: \"100%\"}}>\n\n\n            {( props.config['ui.overview.charts'] && (props.config['ui.overview.charts']['implied_growth_rate'] === \"1\")) &&\n            <Grid item xs={12}>\n              <Chart\n                config={props.config}\n                dataFile={\"./data/growth_rate_time_series_aggregating.json\"}\n                title=\"Implied growth rate\"\n                topic=\"growth_rate\"\n                yAxisLabel=\"Growth rate, h⁻¹\"\n                experiment={experimentMetadata.experiment}\n                interpolation=\"stepAfter\"\n              />\n            </Grid>\n            }\n\n            {( props.config['ui.overview.charts'] && (props.config['ui.overview.charts']['fraction_of_volume_that_is_alternative_media'] === \"1\")) &&\n            <Grid item xs={12}>\n              <Chart\n                config={props.config}\n                domain={[0, 1]}\n                dataFile={\"./data/alt_media_fraction_time_series_aggregating.json\"}\n                interpolation=\"stepAfter\"\n                title=\"Fraction of volume that is alternative media\"\n                topic=\"alt_media_calculating/alt_media_fraction\"\n                yAxisLabel=\"Fraction\"\n                experiment={experimentMetadata.experiment}\n              />\n            </Grid>\n            }\n\n            {( props.config['ui.overview.charts'] && (props.config['ui.overview.charts']['normalized_135_optical_density'] === \"1\")) &&\n            <Grid item xs={12}>\n              <Chart\n                config={props.config}\n                isODReading={true}\n                dataFile={\"./data/od_filtered_time_series_aggregating.json\"}\n                title=\"Normalized 135° optical density\"\n                topic=\"od_filtered/135/+\"\n                yAxisLabel=\"Current OD / initial OD\"\n                experiment={experimentMetadata.experiment}\n                interpolation=\"stepAfter\"\n              />\n            </Grid>\n            }\n\n            {( props.config['ui.overview.charts'] && (props.config['ui.overview.charts']['raw_135_optical_density'] === \"1\")) &&\n            <Grid item xs={12}>\n              <Chart\n                config={props.config}\n                isODReading={true}\n                dataFile={\"./data/od_raw_time_series_aggregating.json\"}\n                title=\"Raw 135° optical density\"\n                topic=\"od_raw/135/+\"\n                yAxisLabel=\"Voltage\"\n                experiment=\"+\"\n                interpolation=\"stepAfter\"\n              />\n            </Grid>\n           }\n            <Grid item xs={12}> <ClearChartButton config={props.config} experiment={experimentMetadata.experiment}/> </Grid>\n          </Grid>\n\n          <Grid item xs={12} md={4} container spacing={2} justify=\"flex-end\" style={{height: \"100%\"}}>\n\n\n            {( props.config['ui.overview.cards'] && (props.config['ui.overview.cards']['dosings'] === \"1\")) &&\n              <Grid item xs={12} style={{padding: \"10px 0px\"}}>\n                <MediaCard experiment={experimentMetadata.experiment} config={props.config}/>\n              </Grid>\n            }\n            <Grid item xs={12}>\n              <Button href=\"/pioreactors\" color=\"primary\" style={{textTransform: \"none\", verticalAlign: \"middle\", margin: \"0px 3px\"}}> <PioreactorIcon style={{ fontSize: 17 }} color=\"primary\"/> See all Pioreactor details </Button>\n            </Grid>\n\n            {( props.config['ui.overview.cards'] && (props.config['ui.overview.cards']['event_logs'] === \"1\")) &&\n              <Grid item xs={12} style={{padding: \"10px 0px\"}}>\n                <LogTable config={props.config}/>\n                <ClearLogButton config={props.config} />\n              </Grid>\n            }\n\n\n          </Grid>\n\n          <Grid item xs={1} md={1}/>\n        </Grid>\n        {props.config['ui.overview.rename'] ? <TactileButtonNotification config={props.config}/> : null}\n      </React.Fragment>\n  );\n}\nexport default Overview;\n","import React from \"react\";\nimport moment from \"moment\";\n\nimport Grid from '@material-ui/core/Grid';\nimport Header from \"./components/Header\"\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/Card';\nimport {Typography} from '@material-ui/core';\nimport Select from '@material-ui/core/Select';\nimport Box from '@material-ui/core/Box';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Button from \"@material-ui/core/Button\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\"\n  },\n  formControl: {\n    margin: theme.spacing(3),\n  },\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n}));\n\n\n\nfunction ExperimentSelection(props) {\n  const classes = useStyles();\n\n  const [experiments, setExperiments] = React.useState([])\n\n  React.useEffect(() => {\n    async function getData() {\n         await fetch(\"/get_experiments\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          setExperiments(data)\n          props.handleChange(data[0].experiment)\n        });\n      }\n      getData()\n  }, [])\n\n  const handleExperimentSelectionChange = (e) => {\n    props.handleChange(e.target.value)\n  }\n\n  return (\n    <div className={classes.root}>\n      <FormControl component=\"fieldset\" className={classes.formControl}>\n\n      <FormLabel component=\"legend\">Experiment</FormLabel>\n        <Select\n          native\n          value={props.ExperimentSelection}\n          onChange={handleExperimentSelectionChange}\n          inputProps={{\n            name: 'experiment',\n            id: 'experiment',\n          }}\n        >\n          {experiments.map((v) => {\n            return <option value={v.experiment}>{v.experiment +  ` (started ${moment(v.timestamp).format(\"MMMM D, YYYY\")})`}</option>\n            }\n          )}\n        </Select>\n      </FormControl>\n\n    </div>\n  )\n}\n\n\n\nconst CheckboxesGroup = (props) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <FormControl component=\"fieldset\" className={classes.formControl}>\n        <FormLabel component=\"legend\">Datasets</FormLabel>\n        <FormGroup>\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.growth_rates} onChange={props.handleChange} name=\"growth_rates\" />}\n            label=\"Implied growth rate\"\n          />\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.io_events} onChange={props.handleChange} name=\"io_events\" />}\n            label=\"Dosing events log\"\n          />\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.experiments} onChange={props.handleChange} name=\"experiments\" />}\n            label=\"Experiment description\"\n          />\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.od_readings_raw} onChange={props.handleChange} name=\"od_readings_raw\" />}\n            label=\"Raw optical density\"\n          />\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.od_readings_filtered} onChange={props.handleChange} name=\"od_readings_filtered\" />}\n            label=\"Normalized optical density\"\n          />\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.logs} onChange={props.handleChange} name=\"logs\" />}\n            label=\"Event logs\"\n          />\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.alt_media_fraction} onChange={props.handleChange} name=\"alt_media_fraction\" />}\n            label=\"Alternative media fraction\"\n          />\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.io_algorithm_settings} onChange={props.handleChange} name=\"io_algorithm_settings\" />}\n            label=\"Dosing algorithm change log\"\n          />\n        </FormGroup>\n      </FormControl>\n    </div>\n)}\n\n\nfunction DownloadDataFormContainer() {\n  const classes = useStyles();\n  const [isRunning, setIsRunning] = React.useState(false)\n  const [isError, setIsError] = React.useState(false)\n  const [errorMsg, setErrorMsg] = React.useState(\"\")\n  const [state, setState] = React.useState({\n    experimentSelection: \"\",\n    datasetCheckbox: {\n      growth_rates: false,\n      io_events: false,\n      experiments: false,\n      od_readings_raw: false,\n      od_readings_filtered: false,\n      logs: false,\n      alt_media_fraction: false,\n      io_algorithm_settings: false,\n    }\n  });\n\n  const onSubmit = (event) =>{\n    event.preventDefault()\n\n    if (!Object.values(state['datasetCheckbox']).some((e) => e)) {\n      setIsError(true)\n      setErrorMsg(\"At least one dataset must be selected.\")\n      return\n    }\n\n    setIsRunning(true)\n    fetch('query_datasets',{\n        method: \"POST\",\n        body: JSON.stringify(state),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n    }).then(res => res.json())\n      .then(res => {\n      var link = document.createElement(\"a\");\n      link.setAttribute('download', res['filename']);\n      link.href = \"/static/exports/\" + res['filename'];\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n      setIsRunning(false)\n    }).catch(e => {\n      setIsRunning(false)\n      setIsError(true)\n      setErrorMsg(\"Server error occurred. Check logs.\")\n    });\n  }\n\n  const handleCheckboxChange = (event) => {\n    setState(prevState => ({\n      ...prevState,\n      datasetCheckbox: {...state.datasetCheckbox, [event.target.name]: event.target.checked }\n    }));\n  };\n\n  function handleExperimentSelectionChange(value) {\n    setState(prevState => ({\n      ...prevState,\n      experimentSelection: value\n    }));\n  };\n\n  const runningFeedback = isRunning ? <CircularProgress color=\"white\" size={20}/> : \"Download\"\n  const errorFeedbackOrDefault = isError ? errorMsg : \"Querying large tables may take up to a minute or so.\"\n  return (\n    <>\n      <div>\n        <div>\n          <Typography variant=\"h5\" component=\"h1\">\n            <Box fontWeight=\"fontWeightBold\">\n              Download Experiment Data\n            </Box>\n          </Typography>\n        </div>\n\n      </div>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n          <form>\n            <Grid container spacing={1}>\n              <Grid item xs={12} md={12}>\n                <ExperimentSelection\n                experimentSelection={state.experimentSelection}\n                handleChange={handleExperimentSelectionChange}\n                />\n              </Grid>\n              <Grid item xs={12} md={12}>\n                <CheckboxesGroup\n                isChecked={state.datasetCheckbox}\n                handleChange={handleCheckboxChange}\n                />\n              </Grid>\n\n              <Grid item xs={0}/>\n              <Grid item xs={12}>\n                <Button\n                  type=\"submit\"\n                  variant=\"contained\"\n                  color=\"primary\"\n                  onClick={onSubmit}\n                  style={{width: \"120px\", marginLeft: 24}}\n                >\n                  {runningFeedback}\n                </Button>\n                <p style={{marginLeft: 24}}>{errorFeedbackOrDefault}</p>\n\n              </Grid>\n              <Grid item xs={12}/>\n            </Grid>\n          </form>\n        </CardContent>\n      </Card>\n  </>\n  )\n}\n\n\nfunction DownloadData() {\n    return (\n        <Grid container spacing={2} >\n          <Grid item xs={12}><Header /></Grid>\n          <Grid item xs={12} />\n          <Grid item xs={12} />\n\n          <Grid item md={1} xs={1}/>\n          <Grid item md={10} xs={12}>\n            <DownloadDataFormContainer/>\n          </Grid>\n          <Grid item md={1} xs={1}/>\n        </Grid>\n    )\n}\n\nexport default DownloadData;\n\n","import React, { useState, useEffect } from \"react\";\n\nimport { Client, Message } from \"paho-mqtt\";\n\nimport { makeStyles } from \"@material-ui/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nconst useStyles = makeStyles((theme) => ({\n  textFieldCompact: {\n    marginTop: theme.spacing(3),\n    marginRight: theme.spacing(2),\n    marginBottom: theme.spacing(0),\n    width: \"30ch\",\n  },\n  formControl: {\n    marginTop: theme.spacing(2)\n  },\n  unitTitle: {\n    fontSize: 17,\n    color: \"rgba(0, 0, 0, 0.87)\",\n  },\n  unitTitleDialog :{\n    fontSize: 20,\n    color: \"rgba(0, 0, 0, 0.87)\",\n  },\n  suptitle: {\n    fontSize: \"13px\",\n    color: \"rgba(0, 0, 0, 0.60)\",\n  },\n}));\n\nfunction SilentForm(props){\n  const classes = useStyles();\n  const defaults = {duration: 60}\n\n  useEffect(() => {\n    props.updateParent(defaults)\n  }, [])\n\n\n  const onSettingsChange = (e) => {\n    props.updateParent({[e.target.id]: e.target.value})\n  }\n\n  return (\n      <TextField\n        size=\"small\"\n        id=\"duration\"\n        label=\"Duration between events\"\n        defaultValue={defaults.duration}\n        InputProps={{\n          endAdornment: <InputAdornment position=\"end\">min</InputAdornment>,\n        }}\n        variant=\"outlined\"\n        onChange={onSettingsChange}\n        className={classes.textFieldCompact}\n      />\n)}\n\nfunction PIDTurbidostatForm(props){\n  const classes = useStyles();\n  const defaults = {duration: 30, volume: 0.75, target_od: 1.5}\n\n  useEffect(() => {\n    props.updateParent(defaults)\n  }, [])\n\n\n  const onSettingsChange = (e) => {\n    props.updateParent({[e.target.id]: parseFloat(e.target.value)})\n  }\n\n  return (\n      <div>\n        <TextField\n          size=\"small\"\n          id=\"duration\"\n          defaultValue={defaults.duration}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">min</InputAdornment>,\n          }}\n          variant=\"outlined\"\n          onChange={onSettingsChange}\n          className={classes.textFieldCompact}\n          label=\"Duration between events\"\n        />\n        <TextField\n          size=\"small\"\n          id=\"volume\"\n          label=\"Max volume\"\n          defaultValue={defaults.volume}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">mL</InputAdornment>,\n          }}\n          variant=\"outlined\"\n          onChange={onSettingsChange}\n          className={classes.textFieldCompact}\n        />\n        <TextField\n          size=\"small\"\n          id=\"target_od\"\n          label=\"Target OD\"\n          defaultValue={defaults.target_od}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">AU</InputAdornment>,\n          }}\n          variant=\"outlined\"\n          onChange={onSettingsChange}\n          className={classes.textFieldCompact}\n        />\n    </div>\n)}\n\nfunction PIDMorbidostatForm(props){\n  const classes = useStyles();\n  const defaults = {duration: 60, target_growth_rate: 0.1, target_od: 1.5}\n\n  useEffect(() => {\n    props.updateParent(defaults)\n  }, [])\n\n  const onSettingsChange = (e) => {\n    props.updateParent({[e.target.id]: e.target.value})\n  }\n\n  return (\n      <div>\n        <TextField\n          size=\"small\"\n          id=\"duration\"\n          label=\"Duration between events\"\n          defaultValue={defaults.duration}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">min</InputAdornment>,\n          }}\n          variant=\"outlined\"\n          onChange={onSettingsChange}\n          className={classes.textFieldCompact}\n        />\n        <TextField\n          size=\"small\"\n          id=\"target_od\"\n          label=\"Target OD\"\n          defaultValue={defaults.target_od}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">AU</InputAdornment>,\n          }}\n          variant=\"outlined\"\n          onChange={onSettingsChange}\n          className={classes.textFieldCompact}\n        />\n        <TextField\n          size=\"small\"\n          id=\"target_growth_rate\"\n          label=\"Target growth rate\"\n          defaultValue={defaults.target_growth_rate}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">h⁻¹</InputAdornment>,\n          }}\n          variant=\"outlined\"\n          onChange={onSettingsChange}\n          className={classes.textFieldCompact}\n        />\n    </div>\n)}\n\n\n\nfunction ButtonChangeDosingDialog(props) {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [algoSettings, setAlgoSettings] = useState({io_algorithm: \"silent\"})\n  const [isClicked, setIsClicked] = useState(false)\n  const [client, setClient] = useState(null)\n\n  const algos = [\n    {name: \"Silent\", key: \"silent\"},\n    {name: \"PID Morbidostat\",  key: \"pid_morbidostat\"},\n    {name: \"PID Turbidostat\",  key: \"pid_turbidostat\"},\n    {name: \"Chemostat\", key: \"chemostat\"},\n  ]\n\n  useEffect(() => {\n    // MQTT - client ids should be unique\n    if (!props.config['network.topology']){\n      return\n    }\n\n    if (props.config.remote) {\n      var client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      var client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n\n    client.connect();\n    setClient(client)\n  },[props.config])\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleAlgoSelectionChange = (e) => {\n    setAlgoSettings({io_algorithm: e.target.value})\n  }\n\n  const updateFromChild = (setting) => {\n    setAlgoSettings(prevState => ({...prevState, ...setting}))\n  }\n\n  const switchToForm = () => {\n    switch(algoSettings.io_algorithm) {\n      case \"silent\":\n        return <SilentForm updateParent={updateFromChild}/>\n      case \"pid_turbidostat\":\n        return <PIDTurbidostatForm updateParent={updateFromChild}/>\n      case \"pid_morbidostat\":\n        return <PIDMorbidostatForm updateParent={updateFromChild}/>\n      default:\n        return <div><p>Not implemented</p></div>\n    }\n  }\n\n  const onSubmit = (event) => {\n    event.preventDefault()\n    setIsClicked(true)\n    var message = new Message(JSON.stringify(algoSettings));\n    message.destinationName = [\n      \"pioreactor\",\n      props.unit,\n      props.experiment,\n      \"algorithm_controlling\",\n      \"io_algorithm\",\n      \"set\",\n    ].join(\"/\");\n    message.qos = 2;\n    try{\n      client.publish(message);\n    }\n    catch (e){\n      console.log(e)\n    }\n    setOpen(false);\n  }\n  return (\n    <div>\n    <Button\n      style={{marginTop: \"10px\"}}\n      size=\"small\"\n      color=\"primary\"\n      disabled={!props.currentDosingAlgorithm}\n      onClick={handleClickOpen}\n    >\n      Change dosing algorithm\n    </Button>\n    <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\" PaperProps={{style: {height: \"100%\"}}}>\n      <DialogTitle>\n        <Typography className={classes.suptitle}>\n          {props.title || ((props.config['ui.overview.rename'] && props.config['ui.overview.rename'][props.unit]) ? `${props.config['ui.overview.rename'][props.unit]} (${props.unit})` : `${props.unit}`)}\n        </Typography>\n        <Typography className={classes.unitTitleDialog}>\n          Dosing Algorithm\n        </Typography>\n      </DialogTitle>\n      <DialogContent>\n        <Typography variant=\"body2\" component=\"p\" gutterBottom>\n          Dosing algorithms control when and how much media to add to the Pioreactor. The settings below can be changed later. Learn more about <a target=\"_blank\" href=\"https://github.com/Pioreactor/pioreactor/wiki/io-algorithms\">dosing algorithms</a>.\n        </Typography>\n\n        <form>\n          <FormControl component=\"fieldset\" className={classes.formControl}>\n          <FormLabel component=\"legend\">Algorithm</FormLabel>\n            <Select\n              native\n              value={algoSettings.mode}\n              onChange={handleAlgoSelectionChange}\n              style={{maxWidth: \"200px\"}}\n            >\n              {algos.map((v) => {\n                return <option id={v.key} value={v.key} key={\"change-io\" + v.key}>{v.name}</option>\n                }\n              )}\n            </Select>\n            {switchToForm()}\n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              color={isClicked ? \"default\" : \"primary\" }\n              onClick={onSubmit}\n              style={{width: \"120px\", marginTop: \"20px\"}}\n            >\n              Submit\n            </Button>\n          </FormControl>\n        </form>\n\n\n      </DialogContent>\n    </Dialog>\n    </div>\n)}\n\n\nexport default ButtonChangeDosingDialog;\n","import React, {useState} from 'react'\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport { makeStyles } from \"@material-ui/styles\";\n\nconst useStyles = makeStyles({\n  actionTextField: {\n    padding: \"0px 10px 0px 0px\",\n  },\n  actionForm: {\n    padding: \"20px 0px 0px 0px\",\n  }\n});\n\n\nconst actionToAct = {\n  \"remove_waste\": \"Removing waste\",\n  \"add_media\": \"Adding media\",\n  \"add_alt_media\": \"Adding alt. media\",\n\n}\n\nexport default function ActionPumpForm(props) {\n  const emptyState = \"\";\n  const [mL, setML] = useState(emptyState);\n  const [duration, setDuration] = useState(emptyState);\n  const classes = useStyles();\n  const [isMLDisabled, setIsMLDisabled] = useState(false);\n  const [isDurationDisabled, setIsDurationDisabled] = useState(false);\n  const [openSnackbar, setOpenSnackbar] = useState(false);\n\n  function onSubmit(e) {\n    e.preventDefault();\n    if (mL !== emptyState || duration !== emptyState) {\n      const params = mL !== \"\" ? { ml: mL, source_of_event: \"UI\"} : { duration: duration, source_of_event: \"UI\"};\n      fetch(\n        \"/run/\" +\n          props.action +\n          \"/\" +\n          props.unitNumber +\n          \"?\" +\n          new URLSearchParams(params)\n      );\n      setOpenSnackbar(true);\n    }\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false );\n  };\n\n  function handleMLChange(e) {\n    setML(e.target.value);\n    setIsDurationDisabled(true);\n    if (e.target.value === emptyState) {\n      setIsDurationDisabled(false);\n    }\n  }\n\n  function handleDurationChange(e) {\n    setDuration(e.target.value);\n    setIsMLDisabled(true);\n    if (e.target.value === emptyState) {\n      setIsMLDisabled(false);\n    }\n  }\n\n  return (\n    <form id={props.action} className={classes.actionForm}>\n      <TextField\n        name=\"mL\"\n        value={mL}\n        size=\"small\"\n        id={props.action + \"_mL\"}\n        label=\"mL\"\n        variant=\"outlined\"\n        disabled={isMLDisabled}\n        onChange={handleMLChange}\n        className={classes.actionTextField}\n      />\n      <TextField\n        name=\"duration\"\n        value={duration}\n        size=\"small\"\n        id={props.action + \"_duration\"}\n        label=\"seconds\"\n        variant=\"outlined\"\n        disabled={isDurationDisabled}\n        onChange={handleDurationChange}\n        className={classes.actionTextField}\n      />\n      <br />\n      <br />\n      <Button\n        type=\"submit\"\n        variant=\"contained\"\n        size=\"small\"\n        color=\"primary\"\n        onClick={onSubmit}\n      >\n        {props.action.replace(/_/g, \" \")}\n      </Button>\n      <Snackbar\n        anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n        open={openSnackbar}\n        onClose={handleSnackbarClose}\n        message={actionToAct[props.action] + \" for \" + (duration !== emptyState ? (duration + \" seconds\") : (mL + \"mL\"))}\n        autoHideDuration={7000}\n        key={\"snackbar\" + props.unitNumber + props.action}\n      />\n    </form>\n  );\n}","import clsx from 'clsx';\nimport { Client, Message } from \"paho-mqtt\";\n\nimport React, {useState, useEffect} from \"react\";\n\nimport Grid from '@material-ui/core/Grid';\nimport Header from \"./components/Header\"\nimport PropTypes from 'prop-types';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/Card';\nimport {Typography} from '@material-ui/core';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport Box from '@material-ui/core/Box';\nimport Divider from '@material-ui/core/Divider';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Slider from '@material-ui/core/Slider';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport TextField from '@material-ui/core/TextField';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Button from \"@material-ui/core/Button\";\nimport AddIcon from '@material-ui/icons/Add';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport EditIcon from '@material-ui/icons/Edit';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport {parseINIString} from \"./utilities\"\nimport ButtonChangeDosingDialog from \"./components/ButtonChangeDosingDialog\"\nimport ActionPumpForm from \"./components/ActionPumpForm\"\nimport PioreactorIcon from \"./components/PioreactorIcon\"\nimport TactileButtonNotification from \"./components/TactileButtonNotification\";\nimport BlinkLED from \"./components/BlinkLED\";\n\n\nconst onlineGreen = \"#4caf50\"\nconst offlineGrey = \"grey\"\nconst errorRed = \"#DE3618\"\n\nconst useStyles = makeStyles((theme) => ({\n  textIcon: {\n    fontSize: 15,\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n  pioreactorCard: {\n    marginTop: \"0px\",\n    marginBottom: \"20px\",\n  },\n  cardContent: {\n    padding: \"10px 20px 20px 20px\"\n  },\n  unitTitle: {\n    fontSize: 20,\n    color: \"rgba(0, 0, 0, 0.87)\",\n    fontWeight: 500,\n  },\n  unitTitleDialog :{\n    fontSize: 20,\n    color: \"rgba(0, 0, 0, 0.87)\",\n  },\n  suptitle: {\n    fontSize: \"13px\",\n    color: \"rgba(0, 0, 0, 0.60)\",\n  },\n  disabledText: {\n    color: \"rgba(0, 0, 0, 0.38)\",\n  },\n  textbox:{\n    width: \"130px\",\n  },\n  textboxLabel:{\n    width: \"100px\",\n  },\n  footnote: {\n    marginBottom: 0,\n    fontSize: 12,\n  },\n  textField: {\n    marginTop: \"15px\",\n    maxWidth: \"180px\",\n  },\n  textFieldWide: {\n    marginTop: \"15px\",\n    maxWidth: \"220px\",\n  },\n  textFieldCompact: {\n    marginTop: theme.spacing(3),\n    marginRight: theme.spacing(2),\n    marginBottom: theme.spacing(0),\n    width: \"30ch\",\n  },\n  slider: {\n    width: \"70%\",\n    margin: \"40px auto 0px auto\",\n  },\n  divider: {\n    marginTop: 15,\n    marginBottom: 10,\n  },\n}));\n\nfunction TabPanel(props) {\n  // move me\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n          <div>{children}</div>\n      )}\n    </div>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired,\n};\n\n\nclass UnitSettingDisplay extends React.Component {\n  // this class polls the MQTT broker for state\n  constructor(props) {\n    super(props);\n    this.state = { msg: this.props.default };\n    this.onConnect = this.onConnect.bind(this);\n    this.onMessageArrived = this.onMessageArrived.bind(this);\n    this.MQTTConnect();\n  }\n\n  updateParent(data) {\n    try {\n      this.props.passChildData(data);\n    } catch (e) {}\n  }\n\n  MQTTConnect() {\n    // need to have unique clientIds\n    if (this.props.config.remote) {\n      this.client = new Client(\n        `ws://${this.props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      this.client = new Client(\n        `${this.props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n    this.client.connect({ onSuccess: this.onConnect});\n    this.client.onMessageArrived = this.onMessageArrived;\n  }\n\n  onConnect() {\n    this.client.subscribe(\n      [\n        \"pioreactor\",\n        this.props.unit,\n        this.props.experiment,\n        this.props.topic,\n      ].join(\"/\"),\n      { qos: 1 }\n    );\n  }\n\n  stateDisplay = {\n    \"init\":          {display: \"Starting\", color: onlineGreen},\n    \"ready\":         {display: \"On\", color: onlineGreen},\n    \"sleeping\":      {display: \"Paused\", color: offlineGrey},\n    \"disconnected\":  {display: \"Off\", color: offlineGrey},\n    \"lost\":          {display: \"Lost\", color: errorRed},\n    \"NA\":            {display: \"Not available\", color: offlineGrey},\n    \"—\":             {display: \"—\", color: offlineGrey},\n  }\n\n  onMessageArrived(message) {\n    var parsedFloat = parseFloat(message.payloadString);\n    var payload = isNaN(parsedFloat) ? message.payloadString : parsedFloat\n    this.setState({\n      msg: payload,\n    });\n    this.updateParent(payload);\n  }\n\n  render() {\n    if (this.props.isStateSetting) {\n      if (!this.props.isUnitActive) {\n        return <div style={{ color: offlineGrey}}> Off </div>;\n      } else {\n        var displaySettings = this.stateDisplay[this.state.msg]\n        return (\n          <div style={{ color: displaySettings.color, fontWeight: 500}}>\n            {displaySettings.display}\n          </div>\n      )}\n    } else {\n      if (!this.props.isUnitActive || this.state.msg === \"—\" || this.state.msg === \"\") {\n        return <div style={{ color: offlineGrey}}> {this.props.default} </div>;\n      } else {\n        return (\n          <div style={{ color: \"rgba(0, 0, 0, 0.87)\", fontFamily: \"courier\", fontSize: \"14px\" }}>\n            {(typeof this.state.msg === \"string\"\n              ? this.state.msg\n              : +this.state.msg.toFixed(this.props.precision)) +\n              (this.props.measurementUnit ? this.props.measurementUnit : \"\")}\n          </div>\n        );\n      }\n    }\n  }\n}\n\n\n\nfunction ButtonConfirmStopProcessDialog() {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const onConfirm = () => {\n    fetch(\"/stop\")\n    handleClose()\n  }\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <React.Fragment>\n      <Button style={{textTransform: 'none', marginRight: \"10px\", float: \"right\"}} color=\"secondary\" onClick={handleClickOpen}>\n        <ClearIcon className={classes.textIcon}/> Stop all activity\n      </Button>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">{\"Stop all Pioreactor activity?\"}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n            This will stop stirring, optical density measuring, and IO events from occurring in <b>all</b> Pioreactor units.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={onConfirm} color=\"primary\">\n            OK\n          </Button>\n          <Button onClick={handleClose} color=\"primary\" autoFocus>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </React.Fragment>\n  );\n}\n\n\n\nfunction PioreactorHeader() {\n  const classes = useStyles();\n\n  return (\n    <div>\n      <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: \"5px\"}}>\n        <Typography variant=\"h5\" component=\"h1\">\n          <Box fontWeight=\"fontWeightBold\">\n            Pioreactors\n          </Box>\n        </Typography>\n        <div >\n          <Button href=\"/add-new-pioreactor\" style={{textTransform: 'none', float: \"right\", marginRight: \"10px\"}} color=\"primary\">\n            <AddIcon className={classes.textIcon}/> Add New Pioreactor\n          </Button>\n        </div>\n      </div>\n      <Divider/>\n    </div>\n  )\n}\n\nfunction Summary(){\n  return (\n    <div>\n    </div>\n)}\n\n\nfunction PatientButton(props) {\n  const [buttonText, setButtonText] = useState(props.buttonText)\n\n  useEffect(\n    () => {\n      setButtonText(props.buttonText)\n    }\n  , [props.buttonText])\n\n  function wrappingOnClick() {\n    function f() {\n      setButtonText(<CircularProgress color=\"inherit\" size={22}/>)\n      props.onClick()\n    }\n    return f\n  }\n\n  return (\n    <Button\n      disableElevation\n      style={{width: \"70px\", marginTop: \"5px\"}}\n      color={props.color}\n      variant={props.variant}\n      size=\"small\"\n      onClick={wrappingOnClick()}\n    >\n      {buttonText}\n    </Button>\n  )\n}\n\n\n\nfunction SettingsActionsDialog(props) {\n  const classes = useStyles();\n  const [defaultStirring, setDefaultStirring] = useState(0);\n  const [open, setOpen] = useState(false);\n  const [client, setClient] = useState(null);\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\n  const [tabValue, setTabValue] = React.useState(0);\n\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  useEffect(() => {\n    async function fetchData() {\n      await fetch(\"/get_config/config_\" + props.unit + \".ini\")\n        .then((response) => {\n            if (response.ok) {\n              return response.text();\n            } else {\n              throw new Error('Something went wrong');\n            }\n          })\n        .then((config) => {\n          config = parseINIString(config);\n          setDefaultStirring(\n            config[\"stirring\"][\"duty_cycle_\" + props.unit]\n          );\n        })\n        .catch((error) => {})\n    }\n    if (!props.disabled) {\n      fetchData();\n    }\n  }, [props.disabled, props.unit]);\n\n  useEffect(() => {\n    if (!props.config['network.topology']){\n      return\n    }\n\n    if (props.config.remote) {\n      var client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      var client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n    client.connect();\n    setClient(client)\n  },[props.config])\n\n\n  function setPioreactorJobState(job, state) {\n    return function sendMessage() {\n      var message = new Message(String(state));\n      message.destinationName = [\n        \"pioreactor\",\n        props.unit,\n        props.experiment,\n        job,\n        \"$state\",\n        \"set\",\n      ].join(\"/\");\n      message.qos = 1;\n      try{\n        client.publish(message);\n      }\n      catch (e){\n        console.log(e)\n        setTimeout(function(){sendMessage()}, 750)\n      }\n    };\n  }\n\n  function startPioreactorJob(job_attr){\n    return function() {\n      fetch(\"/run/\" + job_attr + \"/\" + props.unit).then(res => {\n      })\n    }\n  }\n\n  function setPioreactorJobAttr(job_attr, value) {\n    var message = new Message(String(value));\n    message.destinationName = [\n      \"pioreactor\",\n      props.unit,\n      props.experiment,\n      job_attr,\n      \"set\",\n    ].join(\"/\");\n    message.qos = 1;\n    try{\n      client.publish(message);\n    }\n    catch (e) {\n      console.log(e)\n      client.connect({onSuccess: () => setPioreactorJobAttr(job_attr, value)});\n    }\n  }\n\n  function setPioreactorJobAttrOnEnter(e) {\n    if (e.key === \"Enter\") {\n      setPioreactorJobAttr(e.target.id, e.target.value);\n      setSnackbarOpen(true)\n    }\n  }\n\n  function setPioreactorStirring(e, value) {\n    setPioreactorJobAttr(\"stirring/duty_cycle\", value);\n  }\n\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setTabValue(0)\n    setOpen(false);\n  };\n\n  const handleSnackbarClose = () => {\n    setSnackbarOpen(false)\n  }\n\n\n  function createUserButtonsBasedOnState(jobState, job, parentJob=null){\n\n    parentJob = parentJob || job\n    switch (jobState){\n      case \"lost\":\n      case \"disconnected\":\n       return (<div>\n               <PatientButton\n                color=\"primary\"\n                variant=\"contained\"\n                onClick={startPioreactorJob(job)}\n                buttonText=\"Start\"\n               />\n              </div>)\n      case \"init\":\n      case \"ready\":\n        return (<div>\n          <PatientButton\n            color=\"secondary\"\n            variant=\"contained\"\n            onClick={setPioreactorJobState(job, \"sleeping\")}\n            buttonText=\"Pause\"\n          />\n          <PatientButton\n            color=\"secondary\"\n            onClick={setPioreactorJobState(parentJob, \"disconnected\")}\n            buttonText=\"Stop\"\n          />\n        </div>)\n      case \"sleeping\":\n        return (\n          <div>\n            <PatientButton\n              color=\"primary\"\n              variant=\"contained\"\n              onClick={setPioreactorJobState(job, \"ready\")}\n              buttonText=\"Resume\"\n            />\n            <PatientButton\n              color=\"secondary\"\n              onClick={setPioreactorJobState(parentJob, \"disconnected\")}\n              buttonText=\"Stop\"\n            />\n          </div>\n          )\n      default:\n        return(<div></div>)\n    }\n   }\n\n  const odButtons = createUserButtonsBasedOnState(props.ODReadingJobState, \"od_reading\")\n  const grButtons = createUserButtonsBasedOnState(props.growthRateJobState, \"growth_rate_calculating\")\n  const ioButtons = createUserButtonsBasedOnState(props.IOEventsJobState, \"io_controlling\", \"algorithm_controlling\")\n  const stirringButtons = createUserButtonsBasedOnState(props.stirringJobState, \"stirring\")\n\n  return (\n    <div>\n    <IconButton aria-label=\"edit Pioreactor\" onClick={handleClickOpen} disabled={props.disabled} style={{marginTop: \"-8px\"}}>\n      <EditIcon color={props.disabled ? \"disabled\" : \"primary\"}/>\n    </IconButton>\n    <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n      <DialogTitle>\n        <Typography className={classes.suptitle}>\n          {(props.config['ui.overview.rename'] &&  props.config['ui.overview.rename'][props.unit]) ? `${props.config['ui.overview.rename'][props.unit]} / ${props.unit}` : `${props.unit}`}\n        </Typography>\n      <Tabs variant=\"fullWidth\" value={tabValue} onChange={handleTabChange} indicatorColor=\"primary\" textColor=\"primary\">\n        <Tab label=\"Activities\"/>\n        <Tab label=\"Settings\"/>\n        <Tab label=\"Dosing\"/>\n        <Tab label=\"Calibrate\"/>\n      </Tabs>\n      </DialogTitle>\n      <DialogContent>\n        <TabPanel value={tabValue} index={2}>\n          <Typography  gutterBottom>\n            Add media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the media pump{props.isPlural ? \"s\" : \"\"} for a set duration (seconds), or a set volume (mL).\n          </Typography>\n          <ActionPumpForm action=\"add_media\" unit={props.unit} />\n          <Divider className={classes.divider} />\n          <Typography gutterBottom>\n            Add alternative media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the alternative media pump{props.isPlural ? \"s\" : \"\"} for a set duration (seconds), or a set\n            volume (mL).\n          </Typography>\n          <ActionPumpForm action=\"add_alt_media\" unit={props.unit} />\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Remove waste\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the waste pump{props.isPlural ? \"s\" : \"\"} for a set duration (seconds), or a set volume (mL).\n          </Typography>\n          <ActionPumpForm action=\"remove_waste\" unit={props.unit} />\n          <Divider className={classes.divider} />\n        </TabPanel>\n        <TabPanel value={tabValue} index={3}>\n          <Typography  gutterBottom>\n            Pump calibration\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            If any pumps are attached to the Pioreactor, they should be calibrated to often\n            to accurately add a precise amount of media.\n          </Typography>\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Temperature calibration\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            If any pumps are attached to the Pioreactor, they should be calibrated to often\n            to accurately add a precise amount of media.\n          </Typography>\n          <Divider className={classes.divider} />\n        </TabPanel>\n        <TabPanel value={tabValue} index={1}>\n          <Typography  gutterBottom>\n            Stirring speed\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Modify the stirring speed (arbitrary units). This will effect the\n            optical density reading. Too low and the fan may completely stop.\n          </Typography>\n          <div className={classes.slider}>\n            <Slider\n              defaultValue={parseInt(props.stirringDCState)}\n              aria-labelledby=\"discrete-slider-custom\"\n              step={1}\n              valueLabelDisplay=\"on\"\n              id={\"stirring/duty_cycle_\" + props.unit}\n              key={\"stirring/duty_cycle_\" + props.unit}\n              onChangeCommitted={setPioreactorStirring}\n              marks={[\n                { value: 0, label: \"0\", key: \"slider-0\" },\n                { value: defaultStirring, label: \"Default: \" + defaultStirring, key: \"slider-default\"},\n                { value: 100, label: \"100\", key: \"slider-100\" },\n              ]}\n            />\n          </div>\n          <Divider className={classes.divider} />\n          <Typography gutterBottom>\n            Volume per dilution\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change the volume per dilution. Typical values are between 0.0mL and\n            1.0mL.\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"io_controlling/volume\"\n            label=\"Volume per dilution\"\n            defaultValue={props.volumeState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">mL</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textField}\n          />\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Target OD\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change the target optical density. Typical values are between 1.0 and\n            2.5 (arbitrary units)\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"io_controlling/target_od\"\n            label=\"Target optical density\"\n            defaultValue={props.targetODState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">AU</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textField}\n          />\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Duration between dilutions\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change how long to wait between dilutions. Typically between 5 and 90 minutes.\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"io_controlling/duration\"\n            label=\"Duration\"\n            defaultValue={props.durationState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">min</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textField}\n          />\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Target growth rate\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change the target hourly growth rate - only applicable in{\" \"}\n            <code>morbidostat</code> mode. Typical values are between 0.05h⁻¹ and\n            0.4h⁻¹.\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"io_controlling/target_growth_rate\"\n            label=\"Target growth rate\"\n            defaultValue={props.targetGrowthRateState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">h⁻¹</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textField}\n          />\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Dosing events\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            {props.IOEventsJobState !== \"disconnected\" &&\n              <React.Fragment>\n              Currently running dosing algorithm <code>{props.dosingAlgorithm}</code>.\n              Learn more about <a target=\"_blank\" href=\"https://github.com/Pioreactor/pioreactor/wiki/dosing-algorithms\">dosing algorithms</a>.\n              </React.Fragment>\n            }\n            {props.IOEventsJobState === \"disconnected\" &&\n\n              <React.Fragment>\n              You can change the Dosing algorthm after starting the job.\n              </React.Fragment>\n            }\n          </Typography>\n\n          <ButtonChangeDosingDialog\n            unit={props.unit}\n            config={props.config}\n            experiment={props.experiment}\n            currentDosingAlgorithm={props.dosingAlgorithm}\n          />\n          <Divider className={classes.divider} />\n        </TabPanel>\n        <TabPanel value={tabValue} index={0}>\n          <Typography gutterBottom>\n            Stirring\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Start, stop or pause the stirring on the Pioreactor. Stirring is needed for homogenous mixing.\n          </Typography>\n\n          {stirringButtons}\n\n          <Divider className={classes.divider} />\n          <Typography gutterBottom>\n            Optical density\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Pausing the optical density readings will also pause\n            downstream activities that rely on optical density readings, like growth\n            rates.\n          </Typography>\n\n          {odButtons}\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Growth rate calculating\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Pausing the growth rate calculating will also pause\n            downstream activities that rely on it, like dosing events.\n          </Typography>\n\n          {grButtons}\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Dosing events\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            {props.IOEventsJobState !== \"disconnected\" &&\n              <React.Fragment>\n              Currently running dosing algorithm <code>{props.dosingAlgorithm}</code>.\n              Learn more about <a target=\"_blank\" href=\"https://github.com/Pioreactor/pioreactor/wiki/dosing-algorithms\">dosing algorithms</a>.\n              </React.Fragment>\n            }\n            {props.IOEventsJobState === \"disconnected\" &&\n\n              <React.Fragment>\n              Dosing events will initially start in <span className={\"underlineSpan\"} title=\"silent mode performs no dosing operations.\"><code>silent</code></span> mode, and can be changed after.\n              Learn more about <a target=\"_blank\" href=\"https://github.com/Pioreactor/pioreactor/wiki/dosing-algorithms\">dosing algorithms</a>.\n              </React.Fragment>\n            }\n          </Typography>\n\n            {ioButtons}\n\n          <Divider className={classes.divider} />\n        </TabPanel>\n      </DialogContent>\n    </Dialog>\n    <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={snackbarOpen}\n      onClose={handleSnackbarClose}\n      message={\"Updated\"}\n      autoHideDuration={7000}\n      key={\"snackbar\" + props.unit + \"settings\"}\n    />\n    </div>\n  );\n}\n\n\nfunction SettingsActionsDialogAll(props) {\n\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [client, setClient] = useState(null);\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\n  const [tabValue, setTabValue] = React.useState(0);\n\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  useEffect(() => {\n    if (!props.config['network.topology']){\n      return\n    }\n\n    if (props.config.remote) {\n      var client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      var client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n    client.connect();\n    setClient(client)\n  },[props.config])\n\n\n  function setPioreactorJobState(job, state) {\n    return function sendMessage() {\n      var message = new Message(String(state));\n      message.destinationName = [\n        \"pioreactor\",\n        props.unit,\n        props.experiment,\n        job,\n        \"$state\",\n        \"set\",\n      ].join(\"/\");\n      message.qos = 1;\n      try{\n        client.publish(message);\n      }\n      catch (e){\n        console.log(e)\n        setTimeout(function(){sendMessage()}, 750)\n      }\n    };\n  }\n\n  function startPioreactorJob(job_attr){\n    return function() {\n      fetch(\"/run/\" + job_attr + \"/\" + props.unit).then(res => {\n      })\n    }\n  }\n\n  function setPioreactorJobAttr(job_attr, value) {\n    var message = new Message(String(value));\n    message.destinationName = [\n      \"pioreactor\",\n      props.unit,\n      props.experiment,\n      job_attr,\n      \"set\",\n    ].join(\"/\");\n    message.qos = 1;\n    try{\n      client.publish(message);\n    }\n    catch (e) {\n      console.log(e)\n      client.connect({onSuccess: () => setPioreactorJobAttr(job_attr, value)});\n    }\n  }\n\n  function setPioreactorJobAttrOnEnter(e) {\n    if (e.key === \"Enter\") {\n      setPioreactorJobAttr(e.target.id, e.target.value);\n      setSnackbarOpen(true)\n    }\n  }\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setTabValue(0)\n    setOpen(false);\n  };\n\n  const handleSnackbarClose = () => {\n    setSnackbarOpen(false)\n  }\n\n\n  function createUserButtonsBasedOnState(job, parentJob=null){\n    parentJob = parentJob || job\n    return (<div>\n        <Button\n          className={classes.jobButton}\n          disableElevation\n          color=\"primary\"\n          onClick={startPioreactorJob(job)}\n        >\n          Start\n        </Button>\n        <Button\n          className={classes.jobButton}\n          disableElevation\n          color=\"primary\"\n          onClick={setPioreactorJobState(job, \"sleeping\")}\n        >\n          Pause\n        </Button>\n        <Button\n          className={classes.jobButton}\n          disableElevation\n          color=\"primary\"\n          onClick={setPioreactorJobState(job, \"ready\")}\n        >\n          Resume\n        </Button>\n        <Button\n          className={classes.jobButton}\n          disableElevation\n          color=\"secondary\"\n          onClick={setPioreactorJobState(parentJob, \"disconnected\")}\n        >\n          Stop\n        </Button>\n      </div>\n  )}\n\n  const odButtons = createUserButtonsBasedOnState(\"od_reading\")\n  const grButtons = createUserButtonsBasedOnState(\"growth_rate_calculating\")\n  const ioButtons = createUserButtonsBasedOnState(\"io_controlling\", \"algorithm_controlling\")\n  const stirringButtons = createUserButtonsBasedOnState(\"stirring\")\n\n  return (\n    <React.Fragment>\n    <Button style={{textTransform: 'none', float: \"right\" }} onClick={handleClickOpen} color=\"primary\">\n      <EditIcon className={classes.textIcon}/> Edit all Pioreactors\n    </Button>\n    <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n      <DialogTitle>\n        <Typography className={classes.suptitle}>\n          All active Pioreactors\n        </Typography>\n      <Tabs value={tabValue} onChange={handleTabChange} indicatorColor=\"primary\" textColor=\"primary\">\n        <Tab label=\"Activities\"/>\n        <Tab label=\"Settings\"/>\n        <Tab label=\"Dosing\"/>\n      </Tabs>\n      </DialogTitle>\n      <DialogContent>\n        <TabPanel value={tabValue} index={1}>\n          <Typography gutterBottom>\n            Volume per dilution\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change the volume per dilution. Typical values are between 0.0mL and\n            1.0mL.\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"io_controlling/volume\"\n            label=\"Volume per dilution\"\n            defaultValue={props.volumeState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">mL</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textFieldWide}\n          />\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Target OD\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change the target optical density. Typical values are between 1.0 and\n            2.5 (arbitrary units)\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"io_controlling/target_od\"\n            label=\"Target optical density\"\n            defaultValue={props.targetODState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">AU</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textFieldWide}\n          />\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Duration between dilutions\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change how long to wait between dilutions. Typically between 5 and 90 minutes.\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"io_controlling/duration\"\n            label=\"Duration\"\n            defaultValue={props.durationState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">min</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textFieldWide}\n          />\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Target growth rate\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change the target hourly growth rate - only applicable in{\" \"}\n            <code>morbidostat</code> mode. Typical values are between 0.05h⁻¹ and\n            0.4h⁻¹.\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"io_controlling/target_growth_rate\"\n            label=\"Target growth rate\"\n            defaultValue={props.targetGrowthRateState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">h⁻¹</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textFieldWide}\n          />\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Dosing events\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n              Learn more about <a target=\"_blank\" href=\"https://github.com/Pioreactor/pioreactor/wiki/dosing-algorithms\">dosing algorithms</a>.\n          </Typography>\n\n          <ButtonChangeDosingDialog\n            unit={props.unit}\n            config={props.config}\n            experiment={props.experiment}\n            currentDosingAlgorithm={true}\n            title=\"All active Pioreactors\"\n          />\n          <Divider className={classes.divider} />\n\n        </TabPanel>\n\n        <TabPanel value={tabValue} index={0}>\n          <Typography gutterBottom>\n            Stirring\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Start, stop or pause the stirring on all the Pioreactors. Stirring is needed for homogenous mixing.\n          </Typography>\n\n          {stirringButtons}\n\n          <Divider className={classes.divider} />\n          <Typography gutterBottom>\n            Optical density\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Pausing the optical density readings will also pause\n            downstream activities that rely on optical density readings, like growth\n            rates.\n          </Typography>\n\n          {odButtons}\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Growth rate calculating\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Pausing the growth rate calculating will also pause\n            downstream activities that rely on it, like dosing events.\n          </Typography>\n\n          {grButtons}\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Dosing events\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Dosing events will initially start in <span className={\"underlineSpan\"} title=\"silent mode performs no IO operations.\"><code>silent</code></span> mode, and can be changed after.\n            Learn more about <a target=\"_blank\" href=\"https://github.com/Pioreactor/pioreactor/wiki/dosing-algorithms\">dosing algorithms</a>.\n          </Typography>\n\n            {ioButtons}\n          <Divider className={classes.divider} />\n        </TabPanel>\n        <TabPanel value={tabValue} index={2}>\n          <Typography  gutterBottom>\n            Add media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the media pump{props.isPlural ? \"s\" : \"\"} for a set duration (seconds), or a set volume (mL).\n          </Typography>\n          <ActionPumpForm action=\"add_media\" unit={props.unit} />\n          <Divider className={classes.divider} />\n          <Typography gutterBottom>\n            Add alternative media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the alternative media pump{props.isPlural ? \"s\" : \"\"} for a set duration (seconds), or a set\n            volume (mL).\n          </Typography>\n          <ActionPumpForm action=\"add_alt_media\" unit={props.unit} />\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Remove waste\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the waste pump{props.isPlural ? \"s\" : \"\"} for a set duration (seconds), or a set volume (mL).\n          </Typography>\n          <ActionPumpForm action=\"remove_waste\" unit={props.unit} />\n          <Divider className={classes.divider} />\n        </TabPanel>\n      </DialogContent>\n    </Dialog>\n    <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={snackbarOpen}\n      onClose={handleSnackbarClose}\n      message={\"Updated\"}\n      autoHideDuration={7000}\n      key={\"snackbar\" + props.unit + \"settings\"}\n    />\n    </React.Fragment>\n  );\n}\n\n\nfunction ActiveUnits(props){\n  return (\n  <React.Fragment>\n    <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: \"5px\", marginTop: \"25px\"}}>\n      <Typography variant=\"h5\" component=\"h2\">\n        <Box fontWeight=\"fontWeightRegular\">\n          Active Pioreactors\n        </Box>\n      </Typography>\n      <div >\n        <SettingsActionsDialogAll config={props.config} unit={'$broadcast'} config={props.config} experiment={props.experiment}/>\n        <ButtonConfirmStopProcessDialog/>\n      </div>\n    </div>\n    {props.units.map(unit =>\n      <PioreactorCard config={props.config} isUnitActive={true} key={unit} unit={unit} config={props.config} experiment={props.experiment}/>\n  )}\n  </React.Fragment>\n)}\n\nfunction PioreactorCard(props){\n  const classes = useStyles();\n  const unit = props.unit\n  const isUnitActive = props.isUnitActive\n  const experiment = props.experiment\n  const [stirringDCState, setStirringDCState] = useState(0);\n  const [stirringJobState, setStirringJobState] = useState(\"disconnected\");\n  const [ODReadingJobState, setODReadingJobState] = useState(\"disconnected\");\n  const [growthRateJobState, setGrowthRateJobState] = useState(\"disconnected\");\n  const [IOEventsJobState, setIOEventsJobState] = useState(\"disconnected\");\n  const [temperatureControllingJobState, setTemperatureControllingJobState] = useState(\"disconnected\");\n  const [targetODState, setTargetODState] = useState(0);\n  const [durationState, setDurationState] = useState(0);\n  const [targetGrowthRateState, setTargetGrowthRateState] = useState(0);\n  const [volumeState, setVolumeState] = useState(0);\n  const [dosingAlgorithm, setDosingAlgorithm] = useState(null);\n  const [temperature, setTemperature] = useState(0);\n  return (\n    <Card className={classes.pioreactorCard} id={unit}>\n\n      <CardContent className={classes.cardContent}>\n        <div className={\"fixme\"}>\n          <Typography className={clsx(classes.suptitle)} color=\"textSecondary\">\n            {(props.config['ui.overview.rename'] && props.config['ui.overview.rename'][unit]) ? unit : \"\"}\n          </Typography>\n          <div style={{display: \"flex\", justifyContent: \"space-between\"}}>\n            <Typography className={clsx(classes.unitTitle, {[classes.disabledText]: !isUnitActive})} gutterBottom>\n              <PioreactorIcon color={isUnitActive ? \"black\" : \"disabled\"} style={{verticalAlign: \"middle\"}}/> {(props.config['ui.overview.rename'] && props.config['ui.overview.rename'][unit]) ? props.config['ui.overview.rename'][unit] : unit }\n            </Typography>\n            <div>\n              <SettingsActionsDialog\n                config={props.config}\n                stirringDCState={stirringDCState}\n                ODReadingJobState={ODReadingJobState}\n                growthRateJobState={growthRateJobState}\n                stirringJobState={stirringJobState}\n                IOEventsJobState={IOEventsJobState}\n                temperatureControllingJobState={temperatureControllingJobState}\n                targetGrowthRateState={targetGrowthRateState}\n                volumeState={volumeState}\n                durationState={durationState}\n                targetODState={targetODState}\n                dosingAlgorithm={dosingAlgorithm}\n                temperature={temperature}\n                experiment={experiment}\n                unit={unit}\n                disabled={!isUnitActive}\n                config={props.config}\n              />\n            </div>\n          </div>\n        </div>\n\n\n      <div style={{display: \"flex\", margin: \"15px 20px 20px 0px\"}}>\n        <div className={classes.textboxLabel}>\n          <Typography variant=\"body2\" component=\"body1\">\n            <Box fontWeight=\"fontWeightBold\" className={clsx({[classes.disabledText]: !isUnitActive})}>\n              Activities:\n            </Box>\n          </Typography>\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Stirring\n          </Typography>\n          <UnitSettingDisplay\n            passChildData={setStirringJobState}\n            experiment={experiment}\n            isUnitActive={isUnitActive}\n            default=\"—\"\n            isStateSetting\n            topic=\"stirring/$state\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Optical density\n          </Typography>\n          <UnitSettingDisplay\n            passChildData={setODReadingJobState}\n            experiment={experiment}\n            isUnitActive={isUnitActive}\n            default=\"—\"\n            isStateSetting\n            topic=\"od_reading/$state\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Growth rate calculating\n          </Typography>\n          <UnitSettingDisplay\n            passChildData={setGrowthRateJobState}\n            experiment={experiment}\n            isUnitActive={isUnitActive}\n            default=\"—\"\n            isStateSetting\n            topic=\"growth_rate_calculating/$state\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Dosing events\n          </Typography>\n          <UnitSettingDisplay\n            passChildData={setIOEventsJobState}\n            experiment={experiment}\n            isUnitActive={isUnitActive}\n            default=\"—\"\n            isStateSetting\n            topic=\"io_controlling/$state\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Temperature control\n          </Typography>\n          <UnitSettingDisplay\n            passChildData={setTemperatureControllingJobState}\n            experiment={experiment}\n            isUnitActive={isUnitActive}\n            default=\"NA\"\n            isStateSetting\n            topic=\"temperature_controlling/$state\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n      </div>\n      <Divider/>\n\n\n      <div style={{display: \"flex\", margin: \"20px 20px 20px 0px\"}}>\n        <div className={classes.textboxLabel}>\n          <Typography variant=\"body2\" component=\"body1\">\n            <Box fontWeight=\"fontWeightBold\"  className={clsx({[classes.disabledText]: !isUnitActive})}>\n              Settings:\n            </Box>\n          </Typography>\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Stirring speed\n          </Typography>\n          <UnitSettingDisplay\n            passChildData={setStirringDCState}\n            experiment={experiment}\n            isUnitActive={isUnitActive}\n            default=\"—\"\n            className={classes.alignRight}\n            topic=\"stirring/duty_cycle\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Target OD\n          </Typography>\n          <UnitSettingDisplay\n            precision={2}\n            experiment={experiment}\n            passChildData={setTargetODState}\n            isUnitActive={isUnitActive}\n            default={\"—\"}\n            className={classes.alignRight}\n            topic=\"io_controlling/target_od\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Target growth rate\n          </Typography>\n          <UnitSettingDisplay\n            precision={2}\n            measurementUnit=\"h⁻¹\"\n            experiment={experiment}\n            passChildData={setTargetGrowthRateState}\n            isUnitActive={isUnitActive}\n            default=\"—\"\n            className={classes.alignRight}\n            topic=\"io_controlling/target_growth_rate\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Dosing algorithm\n          </Typography>\n          <UnitSettingDisplay\n            experiment={experiment}\n            passChildData={setDosingAlgorithm}\n            isUnitActive={isUnitActive}\n            default=\"—\"\n            className={classes.alignRight}\n            topic=\"algorithm_controlling/io_algorithm\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Volume / dilution\n          </Typography>\n          <UnitSettingDisplay\n            precision={2}\n            measurementUnit=\"mL\"\n            experiment={experiment}\n            passChildData={setVolumeState}\n            isUnitActive={isUnitActive}\n            default=\"—\"\n            className={classes.alignRight}\n            topic=\"io_controlling/volume\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Time between dosing events\n          </Typography>\n          <UnitSettingDisplay\n            precision={0}\n            measurementUnit=\"m\"\n            experiment={experiment}\n            passChildData={setDurationState}\n            isUnitActive={isUnitActive}\n            default=\"—\"\n            className={classes.alignRight}\n            topic=\"io_controlling/duration\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Target temperature\n          </Typography>\n          <UnitSettingDisplay\n            experiment={experiment}\n            passChildData={setTemperature}\n            isUnitActive={isUnitActive}\n            default=\"—\"\n            className={classes.alignRight}\n            topic=\"temperature_controlling/temperature\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n      </div>\n\n\n      </CardContent>\n    </Card>\n)}\n\n\nfunction InactiveUnits(props){\n\n  return (\n  <React.Fragment>\n    <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: \"5px\", marginTop: \"25px\"}}>\n      <Typography variant=\"h5\" component=\"h2\">\n        <Box fontWeight=\"fontWeightRegular\">\n          Inactive Pioreactors\n        </Box>\n      </Typography>\n    </div>\n    {props.units.map(unit =>\n      <PioreactorCard isUnitActive={false} key={unit} unit={unit} config={props.config} experiment={props.experiment}/>\n  )}\n    </React.Fragment>\n)}\n\nfunction Pioreactors(props) {\n    const [experimentMetadata, setExperimentMetadata] = React.useState({})\n\n    React.useEffect(() => {\n      async function getLatestExperiment() {\n           await fetch(\"/get_latest_experiment\")\n          .then((response) => {\n            return response.json();\n          })\n          .then((data) => {\n            setExperimentMetadata(data)\n          });\n        }\n      getLatestExperiment()\n    }, [])\n\n    const entries = (a) => Object.entries(a)\n\n    return (\n        <Grid container spacing={2} >\n          <Grid item xs={12}><Header /></Grid>\n          <Grid item xs={12} />\n          <Grid item xs={12} />\n\n          <Grid item md={1} xs={1}/>\n          <Grid item md={10} xs={12}>\n            <PioreactorHeader/>\n            <Summary/>\n            <ActiveUnits experiment={experimentMetadata.experiment} config={props.config} units={props.config['inventory'] ? entries(props.config['inventory']).filter((v) => v[1] === \"1\").map((v) => v[0]) : [] }/>\n            <InactiveUnits experiment={experimentMetadata.experiment} config={props.config} units={props.config['inventory'] ? entries(props.config['inventory']).filter((v) => v[1] === \"0\").map((v) => v[0]) : [] }/>\n          </Grid>\n          <Grid item md={1} xs={1}/>\n          {props.config['ui.overview.rename'] ? <TactileButtonNotification config={props.config}/> : null}\n        </Grid>\n    )\n}\n\nexport default Pioreactors;\n\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport StepContent from '@material-ui/core/StepContent';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n  },\n  button: {\n    marginTop: theme.spacing(1),\n    marginRight: theme.spacing(1),\n  },\n  actionsContainer: {\n    marginBottom: theme.spacing(2),\n  },\n  resetContainer: {\n    padding: theme.spacing(3),\n  },\n  divInstructions: {\n    marginBottom: theme.spacing(3),\n  }\n}));\n\n\n\nfunction CycleLiquid(props) {\n  const classes = useStyles();\n  const liquid = props.liquid\n  const [isClicked, setIsClicked] = React.useState(false)\n\n  const onSubmit = () => {\n    fetch(\"/run/remove_waste/$broadcast?\" + new URLSearchParams({duration: 90, duty_cycle: 100}));\n    fetch(\"/run/add_media/$broadcast?\" + new URLSearchParams({duration: 50, duty_cycle: 25}));\n    fetch(\"/run/add_alt_media/$broadcast?\" + new URLSearchParams({duration: 50, duty_cycle: 25}));\n    setIsClicked(true)\n  }\n\n  return (\n    <div className={classes.divInstructions}>\n      <p>{props.additionalMsg}</p>\n      <p>Add <b>{liquid}</b> to the non-waste containers. We will cycle this solution through our system. Click the button below once the {liquid} is in place.</p>\n      <Button className={classes.button} variant=\"contained\" color={isClicked ? \"default\" : \"primary\" } onClick={onSubmit}>Cycle {liquid}</Button>\n    </div>\n    )\n}\n\n\nfunction MediaFlush(props) {\n  const classes = useStyles();\n  const isAlt = props.altMedia\n  const [isClicked, setIsClicked] = React.useState(false)\n\n  const onSubmit = () => {\n    fetch(\"/run/remove_waste/$broadcast?\" + new URLSearchParams({duration: 60, duty_cycle: 100}));\n    if (isAlt){\n      fetch(\"/run/add_alt_media/$broadcast?\" + new URLSearchParams({duration: 15, duty_cycle: 25}));\n    } else {\n      fetch(\"/run/add_media/$broadcast?\" + new URLSearchParams({duration: 15, duty_cycle: 25}));\n    }\n    setIsClicked(true)\n  }\n\n  return (\n    <div className={classes.divInstructions}>\n      <p>Next, we will prime the {isAlt ? \"alt-\" : \"\"}media tubes with our {isAlt ? \"alt-\" : \"\"}media.</p>\n      <p>Replace the container attached to the {isAlt ? \"alt-\" : \"\"}media outflow tubes with the sterlized {isAlt ? \"alt-\" : \"\"}media container. Remember to use proper sanitation techniques!</p>\n      <Button className={classes.button} variant=\"contained\" color={isClicked ? \"default\" : \"primary\" } onClick={onSubmit}>Run {isAlt ? \"alt-\" : \"\"}media and waste pumps</Button>\n    </div>\n    )\n}\n\nfunction AddFinalVolumeOfMedia(props) {\n  const classes = useStyles();\n  const [isClicked, setIsClicked] = React.useState(false)\n\n\n  const onSubmit = () => {\n    fetch(\"/run/add_media/$broadcast?\" + new URLSearchParams({ml: 12}));\n    setIsClicked(true)\n  }\n\n  return (\n    <div className={classes.divInstructions}>\n      <p> Finally, we will add fresh media to our vials </p>\n      <Button className={classes.button} variant=\"contained\" color={isClicked ? \"default\" : \"primary\" } onClick={onSubmit}>Add 12mL of media</Button>\n    </div>\n    )\n}\n\n\nfunction getSteps() {\n  return [\n    'Setup inflow and outflow tubes',\n    '10% bleach cycling',\n    '70% alcohol cycling',\n    'Distilled water cycling',\n    'Media preparation',\n    'Alt media preparation',\n    'Replace vials',\n    'Add initial media to vials'];\n}\n\n\nfunction getStepContent(step) {\n  switch (step) {\n    case 0:\n      return `For each pioreactor unit, connect the media inflow, alt-media inflow, and waste out flow tubes to an empty\n      vial with hat. Connect the all the media outflow tubes to a single empty container, all the alt-media outflow tubes to a single empty container, and\n      all the waste inflow tubes to a single, empty, large container.`;\n    case 1:\n      return <CycleLiquid liquid={\"10% bleach solution\"}/>;\n    case 2:\n      return <CycleLiquid additionalMsg={\"Remove any excess bleach from the containers, and empty the waste container. Bleach and alcohol should not mix.\"} liquid={\"70% alcohol\"}/>;\n    case 3:\n      return <CycleLiquid liquid={\"distilled water\"}/>;\n    case 4:\n      return <MediaFlush />;\n    case 5:\n      return <MediaFlush altMedia={true}/>;\n    case 6:\n      return `Using proper sanitation techniques, replace the pioreactor vials - now full of water and media - with the empty-but-innocculated vials`;\n    case 7:\n      return <AddFinalVolumeOfMedia/>;\n    default:\n      return 'Unknown step';\n  }\n}\n\nexport default function VerticalLinearStepper() {\n  const classes = useStyles();\n  const [activeStep, setActiveStep] = React.useState(0);\n  const steps = getSteps();\n\n  const handleNext = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n\n  const handleReset = () => {\n    setActiveStep(0);\n  };\n\n  return (\n    <div className={classes.root}>\n      <Stepper activeStep={activeStep} orientation=\"vertical\">\n        {steps.map((label, index) => (\n          <Step key={label}>\n            <StepLabel>{label}</StepLabel>\n            <StepContent>\n              <Typography>{getStepContent(index)}</Typography>\n              <div className={classes.actionsContainer}>\n                  <Button\n                    disabled={activeStep === 0}\n                    onClick={handleBack}\n                    className={classes.button}\n                  >\n                    Back\n                  </Button>\n                  <Button\n                    variant=\"contained\"\n                    onClick={handleNext}\n                    className={classes.button}\n                  >\n                    {activeStep === steps.length - 1 ? 'Finish' : 'Next'}\n                  </Button>\n              </div>\n            </StepContent>\n          </Step>\n        ))}\n      </Stepper>\n      {activeStep === steps.length && (\n        <Paper square elevation={0} className={classes.resetContainer}>\n          <Typography>All cleaning and preparation steps completed!</Typography>\n          <Button onClick={handleReset} className={classes.button}>\n            Reset\n          </Button>\n        </Paper>\n      )}\n    </div>\n  );\n}","import React from \"react\";\nimport Grid from '@material-ui/core/Grid';\nimport Button from \"@material-ui/core/Button\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport Chart from \"./Chart\";\n\n\n\nfunction StartStirringButton(props){\n\n  const [isClicked, setIsClicked] = React.useState(false)\n  const [openSnackbar, setOpenSnackbar] = React.useState(false);\n\n  const onClick = (e) => {\n    setIsClicked(true)\n    fetch(\"/run/stirring/$broadcast\").then(res => {\n      if (res.status === 200){\n        setOpenSnackbar(true);\n      }\n    })\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n  return(\n    <div>\n      <p> To get an accurate reading, we need to start start the stirring. This also provides gas transfer and keeps the cells in suspension.</p>\n      <Button variant=\"contained\"  color=\"primary\" disabled={isClicked ? true : false } onClick={onClick}> Start stirring </Button>\n      <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={openSnackbar}\n      onClose={handleSnackbarClose}\n      message={\"Stirring starting\"}\n      autoHideDuration={7000}\n      key={\"snackbarStirring\"}\n    />\n  </div>\n  )\n}\n\n\nfunction StartODReading(props){\n\n  const [isClicked, setIsClicked] = React.useState(false)\n  const [openSnackbar, setOpenSnackbar] = React.useState(false);\n\n  const onClick = (e) => {\n    setIsClicked(true)\n    fetch(\"/run/od_reading/$broadcast\").then(res => {\n      if (res.status === 200){\n        setOpenSnackbar(true);\n      }\n    })\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n  return(\n    <div>\n      <p> Next, we will turn on the optical density reading. We also call this <em>OD readings</em>. This will provide us with a measure of cell density. After a minute or so, you should see the data in the chart below. </p>\n      <Button variant=\"contained\"  color=\"primary\" disabled={isClicked ? true : false } onClick={onClick}> Start OD readings </Button>\n      <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={openSnackbar}\n      onClose={handleSnackbarClose}\n      message={\"OD reading starting\"}\n      autoHideDuration={7000}\n      key={\"snackbarOD\"}\n    />\n  </div>\n  )\n}\n\n\nfunction StartSensors(props){\n\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      justify=\"flex-start\"\n      alignItems=\"center\"\n      spacing={2}\n    >\n      <Grid item xs={2}/>\n      <Grid item xs={10}><StartStirringButton/></Grid>\n      <Grid item xs={10}><StartODReading/></Grid>\n      <Grid item xs={12}>\n        <Chart\n          config={{}}\n          isODReading={true}\n          fontScale={1.0}\n          interpolation=\"stepAfter\"\n          title=\"Raw 135° optical density\"\n          topic=\"od_raw/135/+\"\n          yAxisLabel=\"Voltage\"\n          experiment=\"+\"\n        />\n      </Grid>\n      <Grid item xs={2}/>\n    </Grid>\n)}\n\n\nexport default StartSensors;\n","import { Client } from \"paho-mqtt\";\n\nimport React from \"react\";\nimport Grid from '@material-ui/core/Grid';\nimport Button from \"@material-ui/core/Button\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport Chart from \"./Chart\";\n\n\n\nfunction StartGrowthRate(props){\n\n  const [openSnackbar, setOpenSnackbar] = React.useState(false);\n  const [snackbarMessage, setSnackbarMessage] = React.useState(\"\");\n  const [isClicked, setIsClicked] = React.useState(false);\n\n  const onClick = (e) => {\n    fetch(\"/run/growth_rate_calculating/$broadcast\").then(r => {\n      setSnackbarMessage(\"Growth rate calculating starting\")\n      setOpenSnackbar(true)\n      setIsClicked(true)\n    })\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n  return(\n    <div>\n      <p>Because of the varying strength & quality of the electronics, not all readings look the same - even for the same density of cells. So we compute a baseline measurement from the OD readings, and measure all growth against that baseline. </p>\n      <p>From the (normalized) OD readings, we can calculate the <em>implied hourly growth rate</em>, which is our measure of growth. </p>\n      <p>Let's start the growth rate calculations. This first computes the normalization constants, <b>which can take up to two minutes to complete</b>. After that, the graph below should start to populate.</p>\n      <Button variant=\"contained\"  color=\"primary\" disabled={isClicked ? true : false } onClick={onClick}> Start growth rate calculations </Button>\n      <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={openSnackbar}\n      onClose={handleSnackbarClose}\n      message={snackbarMessage}\n      autoHideDuration={7000}\n      key={\"snackbarGR\"}\n      />\n  </div>\n  )\n}\n\n\n\n\nfunction StartCalculations(props){\n  const [experiment, setExperiment] = React.useState(\"null_exp\")\n\n  React.useEffect(() => {\n    async function getData() {\n         await fetch(\"/get_latest_experiment\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          setExperiment(data.experiment)\n        });\n      }\n      getData()\n  }, [])\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      justify=\"flex-start\"\n      alignItems=\"center\"\n      spacing={2}\n    >\n      <Grid item xs={2}/>\n      <Grid item xs={10}><StartGrowthRate experiment={experiment}/></Grid>\n      <Grid item xs={12}>\n      <Chart\n        config={{}}\n        interpolation=\"stepAfter\"\n        fontScale={1}\n        title=\"Implied growth rate\"\n        topic=\"growth_rate\"\n        yAxisLabel=\"Growth rate, h⁻¹\"\n        experiment={experiment}\n      />\n      </Grid>\n      <Grid item xs={2}/>\n    </Grid>\n)}\n\n\nexport default StartCalculations;\n","import React from \"react\";\nimport moment from \"moment\";\nimport { Client, Message } from \"paho-mqtt\";\n\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/Card';\nimport {Typography} from '@material-ui/core';\nimport Button from \"@material-ui/core/Button\";\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport TextField from '@material-ui/core/TextField';\nimport Snackbar from '@material-ui/core/Snackbar';\n\nimport Header from \"./components/Header\"\nimport CleaningScript from \"./components/CleaningScript\"\nimport StartSensors from \"./components/StartSensors\"\nimport StartCalculations from \"./components/StartCalculations\"\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\"\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  button: {\n    marginRight: theme.spacing(1),\n  },\n  instructions: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(4),\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n    width: \"60%\"\n  },\n  textField:{\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1)\n  },\n  formControl: {\n    margin: theme.spacing(3),\n  },\n  halfTextField: {\n    width: \"95%\"\n  },\n}));\n\n\n\n\nfunction ExperimentSummaryForm(props) {\n  const classes = useStyles();\n  const [openSnackbar, setOpenSnackbar] = React.useState(false);\n  const [formError, setFormError] = React.useState(false);\n  const [expName, setExpName] = React.useState(\"\");\n  const [timestamp, setTimestamp] = React.useState(moment().format(\"YYYY-MM-DDTHH:mm:ss\"));\n  const [description, setDescription] = React.useState(\"\");\n\n\n  function publishExpNameToMQTT(){\n\n    function onConnect() {\n      var message = new Message(expName);\n      message.destinationName = \"pioreactor/latest_experiment\"\n      message.qos = 1;\n      message.retained = true;\n      client.publish(message);\n    }\n\n    if (props.config.remote) {\n      var client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      var client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n    client.connect({ onSuccess: onConnect });\n\n  }\n\n  function killExistingJobs(){\n     fetch('/stop')\n  }\n\n  function onSubmit(e) {\n    e.preventDefault();\n    if (expName === \"\"){\n      setFormError(true)\n      return\n    }\n    fetch('create_experiment',{\n        method: \"POST\",\n        body: JSON.stringify({experiment : expName, timestamp: timestamp, description: description}),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }).then(res => {\n        if (res.status === 200){\n          setFormError(false);\n          setOpenSnackbar(true);\n          killExistingJobs()\n          publishExpNameToMQTT()\n        }\n        else{\n          setFormError(true);\n        }\n      }\n     )\n  }\n\n  const onExpNameChange = (e) => {\n    setExpName(e.target.value)\n  }\n  const onDescChange = (e) => {\n    setDescription(e.target.value)\n  }\n  const onTimestampChange = (e) => {\n    setTimestamp(e.target.value)\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n  return (\n    <div className={classes.root}>\n        <FormGroup>\n        <Grid container spacing={1}>\n          <Grid item xs={12} md={6}>\n            <TextField\n              error={formError}\n              id=\"expName\"\n              label=\"Experiment name\"\n              required className={`${classes.halfTextField} ${classes.textField}`}\n              onChange={onExpNameChange}\n              />\n          </Grid>\n          <Grid item xs={12} md={6}>\n            <TextField\n              id=\"datetime\"\n              label=\"Start time\"\n              type=\"datetime-local\"\n              defaultValue={timestamp}\n              className={`${classes.halfTextField} ${classes.textField}`}\n              onChange={onTimestampChange}\n              InputLabelProps={{\n                shrink: true,\n              }}\n            />\n          </Grid>\n          <Grid item xs={12} md={12}>\n            <TextField\n              label=\"Description\"\n              rowsMax={4}\n              placeholder={\"Add a description: what microbe are you using? What is the media composition? This description can always be changed later.\"}\n              multiline\n              className={classes.textField}\n              onChange={onDescChange}\n              fullWidth={true}\n            />\n          </Grid>\n          <Grid item xs={12} md={10}/>\n          <Grid item xs={12} md={2}>\n            <Button variant=\"contained\" color=\"primary\" onClick={onSubmit}> Create </Button>\n            <Snackbar\n              anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n              open={openSnackbar}\n              onClose={handleSnackbarClose}\n              message={\"Created new experiment\"}\n              autoHideDuration={7000}\n              key={\"snackbar\" + props.unitNumber + props.action}\n            />\n          </Grid>\n        </Grid>\n        </FormGroup>\n    </div>\n  )\n}\n\n\n\nfunction getSteps(config) {\n  return [\n    {title: 'Experiment summary', content: <ExperimentSummaryForm config={config} />, optional: true},\n    {title: 'Cleaning and preparation', content: <CleaningScript config={config}/>, optional: true},\n    {title: 'Start sensors', content: <StartSensors config={config}/>, optional: true},\n    {title: 'Start calculations', content: <StartCalculations config={config}/>, optional: false},\n  ];\n}\n\n\n\nfunction StartNewExperimentContainer(props) {\n  const classes = useStyles();\n  const [activeStep, setActiveStep] = React.useState(0);\n  const [skipped, setSkipped] = React.useState(new Set());\n  const steps = getSteps(props.config);\n\n  const getStepContent = (index) => {\n    return steps[index].content\n  }\n  const isStepOptional = (index) => {\n    return steps[index].optional\n  };\n\n  const isStepSkipped = (step) => {\n    return skipped.has(step);\n  };\n\n  const handleNext = () => {\n    if (activeStep === steps.length - 1){\n      window.location.href = \"/overview\";\n    } else {\n\n      let newSkipped = skipped;\n      if (isStepSkipped(activeStep)) {\n        newSkipped = new Set(newSkipped.values());\n        newSkipped.delete(activeStep);\n      }\n\n      setActiveStep((prevActiveStep) => prevActiveStep + 1);\n      setSkipped(newSkipped);\n      window.scrollTo({top: 0})\n    }\n  };\n\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n\n  const handleSkip = () => {\n    if (!isStepOptional(activeStep)) {\n      throw new Error(\"You can't skip a step that isn't optional.\");\n    }\n\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\n    setSkipped((prevSkipped) => {\n      const newSkipped = new Set(prevSkipped.values());\n      newSkipped.add(activeStep);\n      return newSkipped;\n    });\n  };\n\n  const handleReset = () => {\n    setActiveStep(0);\n  };\n\n  return (\n    <Card className={classes.root}>\n      <CardContent className={classes.cardContent}>\n        <Typography variant=\"h5\" component=\"h1\">\n          Start a new experiment\n        </Typography>\n        <Stepper activeStep={activeStep}>\n          {steps.map((step, index) => {\n            const stepProps = {};\n            const labelProps = {};\n            if (step.optional) {\n              labelProps.optional = <Typography variant=\"caption\">Optional</Typography>;\n            }\n            if (isStepSkipped(index)) {\n              stepProps.completed = false;\n            }\n            return (\n              <Step key={step.title} {...stepProps}>\n                <StepLabel {...labelProps}>{step.title}</StepLabel>\n              </Step>\n            );\n          })}\n        </Stepper>\n        <div>\n          {activeStep === steps.length ? (\n            <div>\n              <Typography className={classes.instructions}>\n                All steps completed - you&apos;re finished\n              </Typography>\n              <Button onClick={handleReset} className={classes.button}>\n                Reset\n              </Button>\n            </div>\n          ) : (\n            <div>\n              <Typography className={classes.instructions}>{getStepContent(activeStep)}</Typography>\n              <div>\n                <Button disabled={activeStep === 0} onClick={handleBack} className={classes.button}>\n                  Back\n                </Button>\n                {isStepOptional(activeStep) && (\n                  <Button\n                    variant=\"contained\"\n                    onClick={handleSkip}\n                    className={classes.button}\n                  >\n                    Skip\n                  </Button>\n                )}\n\n                <Button\n                  variant=\"contained\"\n                  onClick={handleNext}\n                  className={classes.button}\n                >\n                  {activeStep === steps.length - 1 ? 'Go to overview' : 'Next'}\n                </Button>\n              </div>\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n\n\n\nfunction StartNewExperiment(props) {\n    return (\n        <Grid container spacing={2} >\n          <Grid item xs={12}><Header /></Grid>\n\n          <Grid item xs={1}/>\n          <Grid item xs={10}>\n            <div><StartNewExperimentContainer config={props.config}/></div>\n          </Grid>\n          <Grid item xs={1}/>\n        </Grid>\n    )\n}\n\nexport default StartNewExperiment;\n\n","import React from \"react\";\n\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/Card';\nimport Button from '@material-ui/core/Button';\nimport Box from '@material-ui/core/Box';\nimport {Typography} from '@material-ui/core';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Select from '@material-ui/core/Select';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport { CodeFlaskReact } from \"react-codeflask\"\n\nimport Header from \"./components/Header\"\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\"\n  },\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n}));\n\n\n\nclass EditableCodeDiv extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      code: \"\",\n      openSnackbar: false,\n      filename: \"config.ini\",\n      snackbarMsg: \"\",\n      isRunning: false,\n      availableConfigs: [\n        {name: \"shared config.ini\", filename: \"config.ini\"},\n      ]\n    };\n    this.saveCurrentCode = this.saveCurrentCode.bind(this);\n  }\n\n  async getConfig(filename) {\n    await fetch(\"/get_config/\" + filename)\n      .then(response => {\n        return response.text();\n      })\n      .then(text => {\n        this.setState({code: text});\n      })\n  }\n\n  async getListOfConfigFiles(filename) {\n    await fetch(\"/get_configs\")\n      .then(response => {\n        return response.json();\n      })\n      .then(json => {\n        this.setState(prevState => ({\n          availableConfigs: [...prevState.availableConfigs, ...json.filter(e => (e !== 'config.ini')).map(e => ({name: e, filename: e}))]\n        }));\n      })\n  }\n\n  saveCurrentCode() {\n    this.setState({isRunning: true})\n    fetch('/save_new_config',{\n        method: \"POST\",\n        body: JSON.stringify({code :this.state.code, filename: this.state.filename}),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n    .then(res => {\n      if (res.ok) {\n        this.setState({snackbarMsg: this.state.filename + \" saved and synced.\"})\n      } else {\n        this.setState({snackbarMsg: \"Hm. Something when wrong saving or syncing...\"})\n      }\n      this.setState({openSnackbar: true, isRunning: false});\n    })\n  }\n\n  componentDidMount() {\n    this.getConfig(this.state.filename)\n    this.getListOfConfigFiles()\n  }\n\n  onSelectionChange = (e) => {\n    this.setState({filename: e.target.value})\n    this.getConfig(e.target.value)\n  }\n\n  getCodeFlaskRef = (codeFlask) => {\n    this.codeFlask = codeFlask\n  }\n\n  onTextChange = (code) => {\n    this.setState({code: code})\n  }\n\n  handleSnackbarClose = () => {\n    this.setState({openSnackbar: false});\n  };\n\n  render() {\n    const runningFeedback = this.state.isRunning ? <CircularProgress color=\"inherit\" size={25}/> : \"Save\"\n    return (\n      <React.Fragment>\n        <Select\n          style={{margin: \"10px 10px 10px 10px\"}}\n          native\n          value={this.state.filename}\n          onChange={this.onSelectionChange}\n          inputProps={{\n            name: 'config',\n            id: 'config',\n          }}\n        >\n          {this.state.availableConfigs.map((v) => {\n            return <option key={v.filename} value={v.filename}>{v.name}</option>\n            }\n          )}\n        </Select>\n\n        <div style={{letterSpacing: \"0em\", margin: \"10px auto 10px auto\", position: \"relative\", width: \"98%\", height: \"300px\", border: \"1px solid #ccc\"}}>\n          <CodeFlaskReact\n            code={this.state.code}\n            onChange={this.onTextChange}\n            editorRef={this.getCodeFlaskRef}\n            language={\"python\"}\n          />\n        </div>\n        <Button\n          style={{margin: \"5px 10px 5px 10px\"}}\n          color=\"primary\"\n          variant=\"contained\"\n          onClick={this.saveCurrentCode}\n          disabled={false}>\n          {runningFeedback}\n        </Button>\n        <Snackbar\n          anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n          open={this.state.openSnackbar}\n          onClose={this.handleSnackbarClose}\n          message={this.state.snackbarMsg}\n          autoHideDuration={2000}\n          key={\"edit-config-snackbar\"}\n        />\n      </React.Fragment>\n    )\n  }\n}\n\n\n\n\nfunction EditConfigContainer(){\n  const classes = useStyles();\n\n  return(\n    <React.Fragment>\n      <div>\n        <div>\n          <Typography variant=\"h5\" component=\"h2\">\n            <Box fontWeight=\"fontWeightBold\">\n              Edit config.ini\n            </Box>\n          </Typography>\n        </div>\n      </div>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n          <p>Update the <code>config.ini</code> files. The shared <code>config.ini</code> will be deployed to <em>all</em> Pioreactors, but can be overwritten with a specific Pioreactor's <code>config.ini</code>. <a href=\"https://github.com/Pioreactor/pioreactor/wiki/Configuration-via-config.ini\" target=\"_blank\">Learn more about Pioreactor configuration</a>.</p>\n          <EditableCodeDiv/>\n        </CardContent>\n      </Card>\n    </React.Fragment>\n)}\n\n\nfunction EditConfig() {\n    return (\n        <Grid container spacing={2} >\n          <Grid item xs={12}><Header /></Grid>\n          <Grid item md={12} xs={1}/>\n          <Grid item md={12} xs={1}/>\n\n          <Grid item md={1} xs={1}/>\n          <Grid item md={10} xs={12}>\n             <EditConfigContainer/>\n          </Grid>\n          <Grid item md={1} xs={1}/>\n        </Grid>\n    )\n}\n\nexport default EditConfig;\n\n","import React from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Snackbar from '@material-ui/core/Snackbar';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport TactileButtonNotification from \"./components/TactileButtonNotification\";\nimport ExperimentOverview from \"./ExperimentOverview\";\nimport DownloadData from \"./DownloadData\";\nimport Pioreactors from \"./Pioreactors\";\nimport StartNewExperiment from \"./StartNewExperiment\";\nimport EditConfig from \"./EditConfig\";\n\nimport \"fontsource-roboto/300-normal.css\"\nimport \"fontsource-roboto/400-normal.css\"\nimport \"fontsource-roboto/500-normal.css\"\nimport \"fontsource-roboto/700-normal.css\"\nimport './styles.css';\nimport {parseINIString} from \"./utilities\"\n\n\nconst theme = createMuiTheme({\n  palette: {\n    background: {\n      default: \"#f6f6f7\",\n    },\n    primary: {\n      // light: will be calculated from palette.primary.main,\n      main: '#5331CA',\n      // dark: will be calculated from palette.primary.main,\n      // contrastText: will be calculated to contrast with palette.primary.main\n    },\n  },\n});\n\n\n\nfunction App() {\n\n  const [config, setConfig] = React.useState({})\n\n  React.useEffect(() => {\n\n    async function getConfig() {\n      await fetch(\"/get_config/config.ini\")\n        .then((response) => {\n            if (response.ok) {\n              return response.text();\n            } else {\n              throw new Error('Something went wrong');\n            }\n          })\n        .then((config) => {\n          setConfig(parseINIString(config)); // TODO: parse on server side and send a json object\n        })\n        .catch((error) => {})\n    }\n    getConfig();\n  }, [])\n\n  return (\n    <MuiThemeProvider theme={theme}>\n      <CssBaseline />\n      <Router>\n        <div className=\"pageContainer\">\n          <Switch>\n            <Route path=\"/download-data\">\n              <DownloadData config={config}/>\n              <TactileButtonNotification config={config}/>\n            </Route>\n            <Route path=\"/start-new-experiment\">\n              <StartNewExperiment config={config}/>\n              <TactileButtonNotification config={config}/>\n            </Route>\n            <Route path=\"/overview\">\n              <ExperimentOverview config={config}/>\n            </Route>\n            <Route path=\"/edit-config\">\n              <EditConfig config={config}/>\n              <TactileButtonNotification config={config}/>\n            </Route>\n            <Route path=\"/pioreactors\">\n              <Pioreactors config={config}/>\n            </Route>\n            <Route path=\"/\">\n              <ExperimentOverview config={config}/>\n            </Route>\n          </Switch>\n        </div>\n      </Router>\n    </MuiThemeProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport \"./styles.css\";\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}