{"version":3,"sources":["components/TactileButtonNotification.jsx","components/PioreactorIcon.jsx","components/Drawer.jsx","components/Header.jsx","components/LogTable.jsx","components/ExperimentSummary.jsx","components/Chart.jsx","components/MediaCard.jsx","components/ClearChartButton.jsx","components/ClearLogButton.jsx","ExperimentOverview.jsx","DownloadData.jsx","utilities.js","components/ButtonChangeDosingDialog.jsx","components/ActionPumpForm.jsx","Pioreactors.jsx","components/CleaningScript.jsx","components/StartSensors.jsx","components/StartCalculations.jsx","StartNewExperiment.jsx","EditConfig.jsx","App.jsx","serviceWorker.js","index.js"],"names":["TactileButtonNotification","props","React","useState","unit","setUnit","renamedUnit","setRenamedUnit","open","setOpen","useEffect","config","client","remote","Client","ws_url","Math","random","connect","onSuccess","subscribe","join","qos","onMessageArrived","msg","payloadString","topic","split","Snackbar","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","key","Alert","severity","variant","icon","AlertTitle","style","fontSize","PioreactorIcon","SvgIcon","id","stroke","strokeWidth","fill","fillColor","fillRule","transform","primary","disabled","black","color","d","cx","cy","r","SideDrawer","isOpen","setIsOpen","isSelected","path","window","location","pathname","toggleDrawer","event","type","Fragment","IconButton","aria-label","edge","onClick","Drawer","anchor","onOpen","role","onKeyDown","alt","src","width","marginLeft","marginTop","List","ListItem","href","component","button","selected","ListItemIcon","ListItemText","Divider","useStyles","makeStyles","theme","root","flexGrow","title","Header","classes","className","AppBar","position","Toolbar","Typography","Link","underline","height","target","rel","Button","textTransform","verticalAlign","LogTable","state","listOfLogs","onConnect","bind","fetch","then","response","json","data","setState","this","getData","message","length","pop","payload","unshift","timestamp","moment","format","is_error","includes","string","slice","name","Card","CardContent","Box","fontWeight","TableContainer","overflowY","Table","stickyHeader","size","TableHead","TableRow","TableCell","clsx","headerCell","TableBody","map","log","i","tightCell","smallText","errorLog","renameUnit","Component","withStyles","padding","backgroundColor","tightRight","textAlign","cardContent","pos","marginBottom","textIcon","margin","EditableDescription","handleChange","evt","desc","value","onBlur","originalDesc","method","body","JSON","stringify","experiment","description","headers","res","status","openSnackBar","handleSnackbarClose","e","reason","render","innerRef","contentEditable","html","onChange","tagName","createRef","prevProps","ExperimentSummary","experimentMetadata","startedAt","display","justifyContent","marginRight","float","diff","colors","Chart","createToolTip","datum","x","renameAndFormatSeries","childName","round","y","seriesMap","maxTimestamp","parseInt","hiddenSeries","Set","lastMsgRecievedAt","names","legendEvents","minTimestamp","subtract","selectLegendData","selectVictoryLines","dataFile","initialSeriesMap","entries","v","filter","filterDataPoints","Object","keys","mts","min","values","s","createLegendEvents","idx","eventKey","String","eventHandlers","mutation","delete","add","retained","currentTime","isODReading","push","parseFloat","newSeriesMap","error","console","match","results","index","sensor","breakString","totalLength","delta_ts","startValue","stopValue","cardinality","arr","step","linspace","startOf","mt","line","item","symbol","has","interpolation","labels","parent","border","VictoryVoronoiContainer","createContainer","axis_display_ts_format","ts","createXTickValues","maxHeight","domainPadding","left","right","bottom","top","events","responsive","VictoryTheme","material","containerComponent","voronoiBlacklist","labelComponent","cornerRadius","flyoutStyle","text","textAnchor","fontFamily","tickFormat","formatTs","tickValues","tickLabels","offsetY","orientation","crossAxis","dependentAxis","domain","label","yAxisLabel","axisLabelComponent","dy","symbolSpacer","itemsPerRow","borderPadding","cursor","gutter","MediaCard","mediaThroughputPerUnit","altMediaThroughputPerUnit","mediaThroughput","altMediaThroughput","rates","all","mediaRate","altMediaRate","activeUnits","prevState","getRecentRates","hash","object","hasOwnProperty","topicParts","destinationName","objectRef","totalRef","addOrUpdate","total","reduce","a","b","align","scope","ClearChartButton","jobName","Message","publish","reload","ClearLogButton","Overview","setExperimentMetadata","getLatestExperiment","Grid","container","spacing","justify","xs","paddingRight","md","paddingLeft","formControl","ExperimentSelection","experiments","setExperiments","FormControl","FormLabel","Select","native","inputProps","CheckboxesGroup","FormGroup","FormControlLabel","control","Checkbox","checked","isChecked","growth_rates","io_events","od_readings_raw","od_readings_filtered","logs","alt_media_fraction","io_algorithm_settings","DownloadDataFormContainer","isRunning","setIsRunning","isError","setIsError","errorMsg","setErrorMsg","experimentSelection","datasetCheckbox","runningFeedback","CircularProgress","errorFeedbackOrDefault","preventDefault","some","link","document","createElement","setAttribute","appendChild","click","remove","catch","DownloadData","parseINIString","regex","section","param","comment","lines","forEach","test","textFieldCompact","unitTitle","unitTitleDialog","suptitle","SilentForm","defaults","duration","updateParent","TextField","defaultValue","InputProps","endAdornment","InputAdornment","PIDTurbidostatForm","volume","target_od","onSettingsChange","PIDMorbidostatForm","target_growth_rate","ButtonChangeDosingDialog","io_algorithm","algoSettings","setAlgoSettings","isClicked","setIsClicked","setClient","updateFromChild","setting","currentDosingAlgorithm","Dialog","aria-labelledby","PaperProps","DialogTitle","DialogContent","gutterBottom","mode","maxWidth","switchToForm","actionTextField","actionForm","actionToAct","ActionPumpForm","mL","setML","setDuration","isMLDisabled","setIsMLDisabled","isDurationDisabled","setIsDurationDisabled","openSnackbar","setOpenSnackbar","action","params","ml","source_of_event","unitNumber","URLSearchParams","replace","pioreactorCard","disabledText","textbox","textboxLabel","footnote","textField","textFieldWide","slider","divider","TabPanel","children","other","hidden","UnitSettingDisplay","stateDisplay","default","MQTTConnect","passChildData","parsedFloat","isNaN","isStateSetting","isUnitActive","displaySettings","toFixed","precision","measurementUnit","ButtonConfirmStopProcessDialog","handleClose","aria-describedby","DialogContentText","DialogActions","autoFocus","AddNewPioreactor","snackbarOpen","setSnackbarOpen","setName","helperText","startAdornment","newPioreactorName","PioreactorHeader","PatientButton","buttonText","setButtonText","disableElevation","SettingsActionsDialog","defaultStirring","setDefaultStirring","tabValue","setTabValue","setPioreactorJobState","job","sendMessage","setTimeout","startPioreactorJob","job_attr","setPioreactorJobAttr","setPioreactorJobAttrOnEnter","ok","Error","fetchData","createUserButtonsBasedOnState","jobState","parentJob","odButtons","ODReadingJobState","grButtons","growthRateJobState","ioButtons","IOEventsJobState","stirringButtons","stirringJobState","Tabs","newValue","indicatorColor","textColor","Tab","isPlural","Slider","stirringDCState","valueLabelDisplay","onChangeCommitted","marks","volumeState","onKeyPress","targetODState","durationState","targetGrowthRateState","dosingAlgorithm","SettingsActionsDialogAll","jobButton","ActiveUnits","units","PioreactorCard","setStirringDCState","setStirringJobState","setODReadingJobState","setGrowthRateJobState","setIOEventsJobState","temperatureControllingJobState","setTemperatureControllingJobState","setTargetODState","setDurationState","setTargetGrowthRateState","setVolumeState","setDosingAlgorithm","temperature","setTemperature","alignRight","InactiveUnits","Pioreactors","actionsContainer","resetContainer","divInstructions","CycleLiquid","liquid","additionalMsg","duty_cycle","MediaFlush","isAlt","altMedia","AddFinalVolumeOfMedia","VerticalLinearStepper","activeStep","setActiveStep","steps","handleNext","prevActiveStep","handleBack","Stepper","Step","StepLabel","StepContent","getStepContent","Paper","square","elevation","StartStirringButton","StartODReading","StartSensors","direction","alignItems","fontScale","StartGrowthRate","snackbarMessage","setSnackbarMessage","StartCalculations","setExperiment","instructions","halfTextField","ExperimentSummaryForm","formError","setFormError","expName","setExpName","setTimestamp","setDescription","required","InputLabelProps","shrink","rowsMax","placeholder","multiline","fullWidth","publishExpNameToMQTT","StartNewExperimentContainer","skipped","setSkipped","content","optional","isStepOptional","isStepSkipped","stepProps","labelProps","completed","prevSkipped","newSkipped","scrollTo","StartNewExperiment","EditableCodeDiv","onSelectionChange","filename","getConfig","getCodeFlaskRef","codeFlask","onTextChange","code","snackbarMsg","availableConfigs","saveCurrentCode","getListOfConfigFiles","letterSpacing","editorRef","language","EditConfigContainer","EditConfig","createMuiTheme","palette","background","main","App","setConfig","CssBaseline","ExperimentOverview","Boolean","hostname","ReactDOM","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.cc0d84fe.chunk.js","sourcesContent":["import React from \"react\";\nimport { Client } from \"paho-mqtt\";\nimport { Alert, AlertTitle } from '@material-ui/lab';\n\nimport Snackbar from '@material-ui/core/Snackbar';\n\nfunction TactileButtonNotification(props) {\n  var [unit, setUnit] = React.useState(\"\")\n  var [renamedUnit, setRenamedUnit] = React.useState(\"\")\n  var [open, setOpen] = React.useState(false)\n\n  React.useEffect(() => {\n    if (!props.config['network.topology']){\n      return\n    }\n\n    const onMessageArrived = (msg) => {\n      if (msg.payloadString === \"1\"){\n        var unit = msg.topic.split(\"/\")[1]\n        setUnit(unit)\n        try {\n          setRenamedUnit(props.config['ui.overview.rename'][unit])\n        }\n        catch {}\n        setOpen(true)\n      }\n      else {\n        setOpen(false)\n      }\n    }\n\n    const onSuccess = () => {\n      client.subscribe(\n      [\n        \"pioreactor\",\n        \"+\",\n        \"+\",\n        \"monitor\",\n        \"button_down\"\n      ].join(\"/\"),\n      { qos: 1 }\n      )\n    }\n\n    var client = null\n    if (props.config.remote) {\n      client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n    client.connect({onSuccess: onSuccess});\n    client.onMessageArrived = onMessageArrived;\n\n  },[props.config])\n\n\n  return (\n    <Snackbar\n      open={open}\n      autoHideDuration={null}\n      onClose={() => {}}\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      key={\"button-tactile-snackbar\"}\n    >\n    <Alert severity=\"info\" variant=\"filled\" icon={false}>\n      <AlertTitle style={{fontSize: 25}}>{unit + (renamedUnit ? \" / \" + renamedUnit : \"\")}</AlertTitle>\n      Holding <b>{unit}</b>'s button down\n    </Alert>\n    </Snackbar>\n)}\n\nexport default TactileButtonNotification;\n","import React from 'react'\n\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\n\nfunction PioreactorIcon(props) {\n  const colors = {\n    primary: \"#5331CA\",\n    disabled: \"rgba(0, 0, 0, 0.38)\",\n    black: \"rgba(0, 0, 0, 0.87)\"\n  }\n  return (\n    <SvgIcon {...props}>\n        <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill={props.fillColor || \"none\"} fillRule=\"evenodd\">\n            <g id=\"Experiment-Page-1\" transform=\"translate(-728.000000, -1502.000000)\" stroke={colors[props.color] || \"rgba(0, 0, 0, 0.54)\"} strokeWidth=\"1.8\">\n                <g id=\"pioreactor\" transform=\"translate(729.000000, 1503.000000)\">\n                    <path d=\"M1.4,18.9 L1.4,14.7 L0,14.7 L0,11.2 L2.799,11.2 L2.8,0 L14,0 L13.999,11.2 L16.8,11.2 L16.8,14.7 L15.399,14.7 L15.4,18.9 L1.4,18.9 Z\" id=\"Combined-Shape\"></path>\n                    <circle id=\"Oval\" cx=\"8.4\" cy=\"13.3\" r=\"2.1\"></circle>\n                </g>\n            </g>\n        </g>\n    </SvgIcon>\n  );\n}\n\nexport default PioreactorIcon;\n","import React from 'react';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport IconButton from '@material-ui/core/IconButton';\nimport EditIcon from '@material-ui/icons/Edit';\nimport SaveAltIcon from '@material-ui/icons/SaveAlt';\nimport DashboardIcon from '@material-ui/icons/Dashboard';\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\nimport PioreactorIcon from './PioreactorIcon';\n\nexport default function SideDrawer() {\n  const [isOpen, setIsOpen] = React.useState(false)\n\n  function isSelected(path) {\n    return (window.location.pathname === path)\n  }\n\n\n\n  const toggleDrawer = (open) => (event) => {\n    if (event && event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\n      return;\n    }\n    setIsOpen(open);\n  };\n\n  const list = () => (\n    <div\n      role=\"presentation\"\n      onClick={toggleDrawer(false)}\n      onKeyDown={toggleDrawer(false)}\n    >\n      <img alt=\"pioreactor logo\" src=\"grey_color.png\" width=\"40%\" style={{marginLeft: \"70px\", marginTop: \"5px\"}}/>\n      <List>\n\n        <ListItem href=\"/\" component=\"a\" button key={\"overview\"} selected={isSelected(\"/\") || isSelected(\"/overview\")}>\n          <ListItemIcon><DashboardIcon color={(isSelected(\"/\") || isSelected(\"/overview\")) ? \"primary\" : \"inherit\"}/> </ListItemIcon>\n          <ListItemText primary={\"Experiment Overview\"} />\n        </ListItem>\n        <ListItem button href=\"/pioreactors\"  component=\"a\" key={\"pioreactors\"} selected={isSelected(\"/pioreactors\")}>\n          <ListItemIcon> <PioreactorIcon color={isSelected(\"/pioreactors\") ? \"primary\" : \"inherit\"}/> </ListItemIcon>\n          <ListItemText primary={\"Pioreactors\"} />\n        </ListItem>\n\n\n      </List>\n      <Divider />\n      <List>\n        <ListItem button href=\"/edit-config\"  component=\"a\" key={\"edit_config\"} selected={isSelected(\"/edit-config\")}>\n          <ListItemIcon> <EditIcon color={isSelected(\"/edit-config\") ? \"primary\" : \"inherit\"}/> </ListItemIcon>\n          <ListItemText primary={\"Edit config.ini\"} />\n        </ListItem>\n        <ListItem href=\"/download-data\" component=\"a\" button key={\"download_data\"} selected={isSelected(\"/download-data\")}>\n          <ListItemIcon><SaveAltIcon color={isSelected(\"/download-data\") ? \"primary\" : \"inherit\"}/> </ListItemIcon>\n          <ListItemText primary={\"Download experiment data\"} />\n        </ListItem>\n\n      </List>\n      <Divider />\n      <List>\n        <ListItem href=\"https://github.com/Pioreactor/pioreactor/wiki\" component=\"a\" button key=\"help\">\n          <ListItemIcon><HelpOutlineIcon/> </ListItemIcon>\n          <ListItemText primary={\"Documentation and help\"} />\n        </ListItem>\n      </List>\n    </div>\n  );\n\n  return (\n      <React.Fragment key={\"leftDrawer\"}>\n        <IconButton\n          color=\"inherit\"\n          aria-label=\"open drawer\"\n          edge=\"start\"\n          onClick={toggleDrawer(true)}\n        >\n          <MenuIcon />\n        </IconButton>\n\n        <Drawer\n          anchor={\"left\"}\n          open={isOpen}\n          onClose={toggleDrawer(false)}\n          onOpen={toggleDrawer(true)}\n        >\n          {list()}\n        </Drawer>\n      </React.Fragment>\n  );\n}\n","import React from 'react'\nimport {AppBar, Toolbar, Typography, Link, Button} from '@material-ui/core';\nimport {makeStyles} from '@material-ui/styles';\nimport SideDrawer from './Drawer'\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  title: {\n    flexGrow: 1,\n  },\n}));\n\n\nconst Header = () => {\n    const classes = useStyles();\n    return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <Toolbar variant=\"dense\">\n          <SideDrawer />\n          <Typography variant=\"h6\" className={classes.title}>\n            <Link color=\"inherit\" underline=\"none\" href=\"/\" className={classes.title}> <img alt=\"pioreactor logo\" src=\"white_colour.png\" style={{width: \"120px\", height: \"29px\"}}/> </Link>\n          </Typography>\n          <Link color=\"inherit\" underline=\"none\" href=\"https://github.com/Pioreactor/pioreactor/wiki\" target=\"_blank\" rel=\"noopener\">\n            <Button color=\"inherit\" style={{textTransform: \"none\"}}>Help <HelpOutlineIcon style={{ fontSize: 18, verticalAlign: \"middle\", marginLeft: 5 }}/></Button>\n          </Link>\n        </Toolbar>\n      </AppBar>\n    </div>\n    )\n}\n\nexport default Header;\n","import React from 'react'\n\nimport clsx from 'clsx';\nimport {Client} from 'paho-mqtt';\nimport moment from 'moment';\n\n\nimport {withStyles} from '@material-ui/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nconst useStyles = theme => ({\n  tightCell: {\n    padding: \"8px 2px 6px 4px\",\n    fontSize: 13,\n  },\n  smallText: {\n    fontSize: 12,\n  },\n  headerCell: {\n    backgroundColor: \"white\",\n    padding: \"8px 6px 6px 6px\",\n  },\n  tightRight: {\n    textAlign: \"right\"\n  },\n  errorLog: {\n    backgroundColor: \"#ff7961\"\n  }\n});\n\nclass LogTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {listOfLogs: []};\n    this.onConnect = this.onConnect.bind(this);\n    this.onMessageArrived = this.onMessageArrived.bind(this);\n  }\n\n  async getData() {\n    await fetch(\"./data/all_pioreactor.log.json\")\n      .then(response => {\n        return response.json();\n      })\n      .then(data => {\n        this.setState({listOfLogs: data});\n      });\n  }\n\n  componentDidMount() {\n    this.getData()\n    if (this.props.config.remote) {\n      this.client = new Client(\n        `ws://${this.props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      this.client = new Client(\n        `${this.props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n    this.client.connect({'onSuccess': this.onConnect});\n    this.client.onMessageArrived = this.onMessageArrived;\n  }\n\n  onConnect() {\n      this.client.subscribe([\"pioreactor\", \"+\", \"+\", \"log\"].join(\"/\"))\n  }\n\n  onMessageArrived(message) {\n    if (this.state.listOfLogs.length > 50){\n      this.state.listOfLogs.pop()\n    }\n    const unit = message.topic.split(\"/\")[1]\n    const payload = message.payloadString\n    this.state.listOfLogs.unshift(\n      {timestamp: moment().format(\"x\"), unit: unit, message: payload, is_error: (payload.includes(\"error\") ||  payload.includes(\"failed\"))}\n    )\n    this.setState({\n      listOfLogs: this.state.listOfLogs\n    });\n  }\n\n  breakString(string){\n    if (string.length > 5){\n      return string.slice(0, 4) + \"...\"\n    }\n    return string\n  }\n\n  renameUnit(name){\n    if (!this.props.config['ui.overview.rename']){\n      return name\n    }\n    return (this.props.config['ui.overview.rename'][name]) || name\n  }\n\n  render(){\n    const { classes } = this.props;\n    return (\n      <Card>\n        <CardContent>\n          <Typography variant=\"h6\" component=\"h2\">\n            <Box fontWeight=\"fontWeightRegular\">\n              Event Logs\n            </Box>\n          </Typography>\n          <TableContainer style={{ height: \"700px\", width: \"100%\", overflowY: \"scroll\"}}>\n            <Table stickyHeader size=\"small\" aria-label=\"log table\">\n               <TableHead>\n                <TableRow>\n                  <TableCell className={clsx(classes.headerCell)}>Timestamp</TableCell>\n                  <TableCell className={clsx(classes.headerCell)}>Message</TableCell>\n                  <TableCell className={clsx(classes.headerCell)}>Pioreactor</TableCell>\n                </TableRow>\n              </TableHead>\n\n              <TableBody>\n                {this.state.listOfLogs.map((log, i) => (\n                  <TableRow key={i}>\n                    <TableCell className={clsx(classes.tightCell, classes.smallText, {[classes.errorLog]: log.is_error})}> {moment(log.timestamp, 'x').format('HH:mm:ss')} </TableCell>\n                    <TableCell className={clsx(classes.tightCell, classes.smallText, {[classes.errorLog]: log.is_error})}> {log.message} </TableCell>\n                    <TableCell className={clsx(classes.tightCell, classes.smallText, {[classes.errorLog]: log.is_error})}> {this.renameUnit(log.unit)}</TableCell>\n                  </TableRow>\n                  ))\n                }\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </CardContent>\n      </Card>\n  )}\n}\n\n\n\nexport default withStyles(useStyles)(LogTable);\n","import React from 'react'\nimport {makeStyles} from '@material-ui/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/Card';\nimport {Typography} from '@material-ui/core';\nimport moment from \"moment\";\nimport Box from '@material-ui/core/Box';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Divider from '@material-ui/core/Divider';\nimport Button from '@material-ui/core/Button';\nimport ContentEditable from 'react-contenteditable'\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\nimport TimelapseIcon from '@material-ui/icons/Timelapse';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport AddIcon from '@material-ui/icons/Add';\n\nconst useStyles = makeStyles({\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n  textIcon: {\n    fontSize: 15,\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n});\n\n\n\nclass EditableDescription extends React.Component {\n  constructor(props) {\n    super(props)\n    this.contentEditable = React.createRef();\n    this.state = {desc: \"\", openSnackBar: false, originalDesc: \"\"};\n  };\n\n  componentDidUpdate(prevProps) {\n    if (this.props.description !== prevProps.description) {\n      this.setState({desc: `${this.props.description}`, originalDesc: `${this.props.description}`})\n    }\n  }\n\n  handleChange = evt => {\n    this.setState({desc: evt.target.value});\n  };\n\n  onBlur = evt => {\n    if (this.state.desc !== this.state.originalDesc) {\n      this.setState({originalDesc: this.state.desc})\n      return fetch('update_experiment_desc', {\n          method: \"POST\",\n          body: JSON.stringify({experiment : this.props.experiment, description: this.state.desc}),\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          }\n        }).then(res => {\n          if (res.status === 200){\n            this.setState({openSnackBar: true});\n          }\n        })\n    }\n  };\n\n  handleSnackbarClose = (e, reason) => {\n    if (reason !== \"clickaway\"){\n      this.setState({openSnackBar: false});\n    }\n  };\n\n  render = () => {\n    return (\n      <div style={{\"padding\": \"0px 5px 0px 5px\"}}>\n        <Box fontWeight=\"fontWeightBold\">\n          Description:\n        </Box>\n        <ContentEditable\n            innerRef={this.contentEditable}\n            html={this.state.desc} // innerHTML of the editable div\n            disabled={false}       // use true to disable editing\n            onChange={this.handleChange} // handle innerHTML change\n            onBlur={this.onBlur}\n            tagName=\"p\"\n            style={{\"padding\": \"3px 3px 3px 2px\"}}\n          />\n          <Snackbar\n            anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n            open={this.state.openSnackBar}\n            onClose={this.handleSnackbarClose}\n            message={\"Updated description\"}\n            autoHideDuration={2500}\n            key={\"snackbarEditDesc\"}\n          />\n      </div>\n    )\n  };\n};\n\n\nfunction ExperimentSummary(props){\n  const classes = useStyles();\n  const experiment = props.experimentMetadata.experiment || \"\"\n  const startedAt = props.experimentMetadata.timestamp || moment()\n  const desc = props.experimentMetadata.description || \"\"\n\n  return(\n    <React.Fragment>\n      <div>\n        <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: \"5px\"}}>\n          <Typography variant=\"h5\" component=\"h1\">\n            <Box fontWeight=\"fontWeightBold\">\n              {experiment}\n            </Box>\n          </Typography>\n          <div >\n            <Button href=\"/download-data\" style={{textTransform: 'none', marginRight: \"0px\", float: \"right\"}} color=\"primary\">\n              <GetAppIcon className={classes.textIcon}/> Download experiment data\n            </Button>\n            <Button href=\"/start-new-experiment\" style={{textTransform: 'none', float: \"right\", marginRight: \"10px\"}} color=\"primary\">\n              <AddIcon className={classes.textIcon}/> New experiment\n            </Button>\n          </div>\n        </div>\n\n        <Divider/>\n        <Typography variant=\"subtitle2\">\n          <Box fontWeight=\"fontWeightBold\" style={{margin: \"10px 2px 10px 2px\", display:\"inline-block\"}}>\n            <CalendarTodayIcon style={{ fontSize: 12, verticalAlign: \"middle\" }}/> Experiment started:\n          </Box>\n          <Box fontWeight=\"fontWeightRegular\" style={{marginRight: \"20px\", display:\"inline-block\"}}>\n            <span title={moment(startedAt).format(\"YYYY-MM-DD HH:mm:ss\")}>{moment(startedAt).format(\"dddd, MMMM D YYYY\")}</span>\n          </Box>\n          <Box fontWeight=\"fontWeightBold\" style={{display:\"inline-block\", margin: \"10px 2px 10px 0px\"}}>\n            <TimelapseIcon style={{ fontSize: 12, verticalAlign: \"middle\"  }}/>Time elapsed:\n          </Box>\n          <Box fontWeight=\"fontWeightRegular\" style={{display:\"inline-block\"}}>\n           {(moment().diff(moment(startedAt), 'H'))}h\n          </Box>\n        </Typography>\n      </div>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n          <EditableDescription experiment={experiment} description={desc} />\n        </CardContent>\n      </Card>\n    </React.Fragment>\n  )\n}\n\n\nexport default ExperimentSummary;\n","import React from \"react\";\nimport { Client } from \"paho-mqtt\";\nimport {\n  VictoryChart,\n  VictoryLabel,\n  VictoryAxis,\n  VictoryTheme,\n  VictoryLine,\n  VictoryLegend,\n  createContainer,\n  VictoryTooltip,\n} from \"victory\";\nimport moment from \"moment\";\nimport Card from \"@material-ui/core/Card\";\n\nconst colors = {\n  \"pioreactor1\": \"#9C6ADE\",\n  \"pioreactor1-A\": \"#9C6ADE\",\n  \"pioreactor1-D\": \"#E3D0FF\",\n  \"pioreactor1-C\": \"#50248F\",\n  \"pioreactor1-B\": \"#230051\",\n\n  \"pioreactor2\": \"#47C1BF\",\n  \"pioreactor2-A\": \"#47C1BF\",\n  \"pioreactor2-D\": \"#B7ECEC\",\n  \"pioreactor2-C\": \"#00848E\",\n  \"pioreactor2-B\": \"#003135\",\n\n  \"pioreactor3\": \"#F49342\",\n  \"pioreactor3-A\": \"#F49342\",\n  \"pioreactor3-D\": \"#FFC58B\",\n  \"pioreactor3-C\": \"#C05717\",\n  \"pioreactor3-B\": \"#4A1504\",\n\n  \"pioreactor4\": \"#50B83C\",\n  \"pioreactor4-A\": \"#50B83C\",\n  \"pioreactor4-B\": \"#173630\",\n  \"pioreactor4-C\": \"#108043\",\n  \"pioreactor4-D\": \"#BBE5B3\",\n\n};\n\nfunction linspace(startValue, stopValue, cardinality) {\n  var arr = [];\n  var step = (stopValue - startValue) / (cardinality - 1);\n  for (var i = 0; i < cardinality; i++) {\n    arr.push(startValue + step * i);\n  }\n  return arr;\n}\n\nclass Chart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      seriesMap: {},\n      maxTimestamp: parseInt(moment().format(\"x\")),\n      hiddenSeries: new Set(),\n      lastMsgRecievedAt: parseInt(moment().format(\"x\")),\n      names: [],\n      legendEvents: [],\n      minTimestamp: parseInt(moment().subtract(30, 'seconds').format(\"x\")),\n    };\n    this.onConnect = this.onConnect.bind(this);\n    this.onMessageArrived = this.onMessageArrived.bind(this);\n    this.selectLegendData = this.selectLegendData.bind(this);\n    this.selectVictoryLines = this.selectVictoryLines.bind(this);\n\n  }\n\n  onConnect() {\n    this.client.subscribe(\n      [\"pioreactor\", \"+\", this.props.experiment, this.props.topic].join(\"/\")\n    );\n  }\n\n  componentDidMount() {\n    this.getData();\n\n    if (this.props.config.remote) {\n      this.client = new Client(\n        `ws://${this.props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      this.client = new Client(\n        `${this.props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n\n\n    this.client.connect({ onSuccess: this.onConnect });\n    this.client.onMessageArrived = this.onMessageArrived;\n  }\n\n  async getData() {\n    await fetch(this.props.dataFile)\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        let initialSeriesMap = {};\n        for (const [i, v] of data[\"series\"].entries()) {\n          if (data[\"data\"][i].length > 0) {\n            initialSeriesMap[v] = {\n              data: (data[\"data\"][i]).filter(this.filterDataPoints(data[\"data\"][i].length)),\n              name: v,\n              color: colors[v],\n            };\n          }\n        }\n        let names = Object.keys(initialSeriesMap);\n        let mts = Math.min(\n          ...Object.values(initialSeriesMap).map((s) => parseInt(s.data[0].x))\n        );\n        this.setState({\n          seriesMap: initialSeriesMap,\n          legendEvents: this.createLegendEvents(names),\n          names: names,\n          minTimestamp: mts,\n        });\n      });\n  }\n\n  createLegendEvents(names) {\n    return names.map((name, idx) => {\n      return {\n        childName: [\"legend\"],\n        target: \"data\",\n        eventKey: String(idx),\n        eventHandlers: {\n          onClick: () => {\n            return [\n              {\n                childName: [\"line-\" + name],\n                target: \"data\",\n                mutation: () => { //this is dumb! I shouldn't mutate this way!\n                  if (!this.state.hiddenSeries.delete(name)) {\n                    // Was not already hidden => add to set\n                    this.state.hiddenSeries.add(name);\n                  }\n                  this.setState({\n                    hiddenSeries: new Set(this.state.hiddenSeries),\n                  });\n                  return null;\n                },\n              },\n            ];\n          },\n        },\n      };\n    });\n  }\n\n  onMessageArrived(message) {\n    if (message.retained){\n      return\n    }\n    const currentTime = parseInt(moment().format(\"x\"));\n\n    var key = this.props.isODReading\n      ? message.topic.split(\"/\")[1] + \"-\" + message.topic.split(\"/\")[5]\n      : message.topic.split(\"/\")[1];\n\n    try {\n      if (!(key in this.state.seriesMap)){\n        const newSeriesMap = {...this.state.seriesMap, [key]:  {\n          data: [{x: currentTime, y: parseFloat(message.payloadString)}],\n          name: key,\n          color: colors[key]\n        }}\n\n        this.setState({ seriesMap: newSeriesMap })\n        this.setState({\n          names: [...this.state.names, key]\n        })\n      } else {\n        // .push seems like bad state management, and maybe a hit to performance...\n        this.state.seriesMap[key].data.push({\n          x: currentTime,\n          y: parseFloat(message.payloadString),\n        });\n        this.setState({ seriesMap: this.state.seriesMap })\n      }\n\n      this.setState({\n        maxTimestamp: currentTime,\n        lastMsgRecievedAt: currentTime,\n      });\n    }\n    catch (error) {\n      console.log(error)\n    }\n    return;\n  }\n\n  breakString(string){\n    if (string.length > 7){\n      return string.slice(0, 5) + \"...\" + string.slice(string.length-2, string.length)\n    }\n    return string\n  }\n\n  renameAndFormatSeries(name){\n    if (!this.props.config['ui.overview.rename']){\n      return name\n    }\n\n    if (name.match(/(.*)-([ABCD])/g)){\n      const results = name.match(/(.*)-([ABCD])/);\n      const index = results[1];\n      const sensor = results[2];\n      return this.breakString(this.props.config['ui.overview.rename'][index] || index) + sensor\n    }\n    else {\n      return this.breakString(this.props.config['ui.overview.rename'][name] || name)\n    }\n  }\n\n\n  filterDataPoints(totalLength){\n    return function(value, index){\n      if (totalLength < 500){\n        return true\n      }\n      if ((index === 0) || (index === (totalLength - 1))){\n        return true\n      }\n      else if (index % Math.round(totalLength/500) === 0){\n        return true\n      } else {\n        return false\n      }\n    }\n  }\n\n  createXTickValues(minTimestamp, maxTimestamp){\n    const delta_ts = moment(maxTimestamp, \"x\").diff(\n      moment(minTimestamp, \"x\"),\n      \"hours\"\n    );\n    const v = linspace(\n      minTimestamp,\n      maxTimestamp + 100000,\n      7\n    ).map((x) =>\n      moment(Math.round(x), \"x\").startOf(delta_ts >= 16 ? \"hour\" : \"minute\")\n    );\n    return v\n\n  }\n\n  createToolTip = (d) => {\n      return `${moment(d.datum.x, 'x').format(\"dd HH:mm\")}\n${this.renameAndFormatSeries(d.datum.childName)}: ${Math.round(d.datum.y * 1000) / 1000}`\n  }\n\n  formatTs(format){\n    return function(mt){\n      return mt.format(format)\n  }}\n\n  selectLegendData(name){\n    if (!this.state.seriesMap) {\n      return {}\n    }\n    const line = this.state.seriesMap[name];\n    const item = {\n      name: this.renameAndFormatSeries(line.name),\n      symbol: { fill: line.color },\n    };\n    if (this.state.hiddenSeries.has(name)) {\n      return { ...item, symbol: { fill: \"white\" } };\n    }\n    return item;\n  }\n\n  selectVictoryLines(name) {\n    if (this.state.hiddenSeries.has(name)) {\n      return undefined;\n    }\n    return (\n      <VictoryLine\n        interpolation={this.props.interpolation}\n        key={\"line-\" + name + this.props.title}\n        name={name}\n        style={{\n          labels: {fill: this.state.seriesMap[name].color},\n          data: {\n            stroke: this.state.seriesMap[name].color,\n            strokeWidth: 2,\n          },\n          parent: { border: \"1px solid #ccc\" },\n        }}\n        data={this.state.seriesMap[name].data}\n        x=\"x\"\n        y=\"y\"\n      />\n    );\n  }\n\n  render() {\n    const delta_ts = moment(this.state.maxTimestamp, \"x\").diff(\n      moment(this.state.minTimestamp, \"x\"),\n      \"hours\"\n    );\n    const VictoryVoronoiContainer = createContainer(\"voronoi\");\n    const axis_display_ts_format =\n      delta_ts >= 16 ? (delta_ts >= 5 * 24 ? \"MMM DD\" : \"dd HH:mm\") : \"H:mm\";\n    const ts = this.createXTickValues(this.state.minTimestamp, this.state.maxTimestamp)\n    return (\n      <Card style={{ maxHeight: \"100%\"}}>\n        <VictoryChart\n          title={this.props.title}\n          domainPadding={10}\n          padding={{ left: 70, right: 50, bottom: 80, top: 50 }}\n          events={this.state.legendEvents}\n          responsive={true}\n          width={600}\n          height={315}\n          theme={VictoryTheme.material}\n          containerComponent={\n            <VictoryVoronoiContainer\n              voronoiBlacklist={['parent']}\n              labels={this.createToolTip}\n              labelComponent={\n                <VictoryTooltip\n                  cornerRadius={0}\n                  flyoutStyle={{\n                    fill: \"white\",\n                    stroke: \"#90a4ae\",\n                    strokeWidth: 1.5,\n                  }}\n                />\n              }\n            />\n          }\n        >\n          <VictoryLabel\n            text={this.props.title}\n            x={300}\n            y={30}\n            textAnchor=\"middle\"\n            style={{\n              fontSize: 15,\n              fontFamily: \"inherit\",\n            }}\n          />\n          <VictoryAxis\n            tickFormat={this.formatTs(axis_display_ts_format)}\n            tickValues={ts}\n            style={{\n              tickLabels: {\n                fontSize: 13,\n                padding: 5,\n                fontFamily: \"inherit\",\n              },\n            }}\n            offsetY={80}\n            orientation=\"bottom\"\n          />\n          <VictoryAxis\n            crossAxis={false}\n            dependentAxis\n            domain={this.props.domain}\n            label={this.props.yAxisLabel}\n            axisLabelComponent={\n              <VictoryLabel\n                dy={-40}\n                style={{\n                  fontSize: 15,\n                  padding: 10,\n                  fontFamily: \"inherit\",\n                }}\n              />\n            }\n            style={{\n              tickLabels: {\n                fontSize: 13,\n                padding: 5,\n                fontFamily: \"inherit\",\n              },\n            }}\n          />\n          <VictoryLegend\n            x={60}\n            y={267}\n            symbolSpacer={10}\n            itemsPerRow={6}\n            name={\"legend\"}\n            borderPadding={{ right: 8 }}\n            orientation=\"horizontal\"\n            cursor={\"pointer\"}\n            gutter={15}\n            style={{\n              labels: { fontSize: 12 },\n              data: { stroke: \"#485157\", strokeWidth: 1, size: 6 },\n            }}\n            data={this.state.names.map(this.selectLegendData)}\n          />\n          {Object.keys(this.state.seriesMap).map(this.selectVictoryLines)}\n        </VictoryChart>\n      </Card>\n    );\n  }\n}\n\nexport default Chart;\n","import React from 'react'\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport {Client} from 'paho-mqtt';\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport {withStyles} from '@material-ui/styles';\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nimport PioreactorIcon from \"./PioreactorIcon\"\n\n\n\nconst useStyles = theme => ({\n  tightCell: {\n    padding: \"8px 2px 6px 4px\",\n    fontSize: 13,\n  },\n  smallText: {\n    fontSize: 12,\n  },\n  headerCell: {\n    backgroundColor: \"white\",\n    padding: \"8px 6px 6px 6px\",\n  },\n  tightRight: {\n    textAlign: \"right\"\n  },\n});\n\n\n\nclass MediaCard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n        mediaThroughputPerUnit: {},\n        altMediaThroughputPerUnit: {},\n        mediaThroughput: 0,\n        altMediaThroughput: 0,\n        rates: {all: {mediaRate: 0, altMediaRate: 0}},\n        activeUnits: []\n      };\n    this.onConnect = this.onConnect.bind(this);\n    this.onMessageArrived = this.onMessageArrived.bind(this);\n  }\n\n  async getRecentRates() {\n     await fetch(\"/recent_media_rates/\" + this.props.experiment)\n    .then((response) => {\n      return response.json();\n    })\n    .then((data) => {\n      this.setState(prevState => ({...prevState, rates: data}))\n    });\n  }\n\n  componentDidMount() {\n    if (this.props.config.remote) {\n      this.client = new Client(\n        `ws://${this.props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      this.client = new Client(\n        `${this.props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n\n    this.client.connect({'onSuccess': this.onConnect});\n    this.client.onMessageArrived = this.onMessageArrived;\n    this.setState({activeUnits: Object.entries(this.props.config['inventory']).filter((v) => v[1] === \"1\").map((v) => v[0])})\n  }\n\n  componentDidUpdate(prevProps) {\n     if (prevProps.experiment !== this.props.experiment) {\n      this.getRecentRates()\n     }\n  }\n\n  onConnect() {\n      this.client.subscribe([\"pioreactor\", \"+\", this.props.experiment, \"throughput_calculating\", \"alt_media_throughput\"].join(\"/\"))\n      this.client.subscribe([\"pioreactor\", \"+\", this.props.experiment, \"throughput_calculating\", \"media_throughput\"].join(\"/\"))\n  }\n\n  addOrUpdate(hash, object, value) {\n      if (Object.hasOwnProperty(hash)){\n        object[hash] = value + object[hash]\n      }\n      else{\n        object[hash] = value\n      }\n      return object\n  }\n\n  onMessageArrived(message) {\n    const topic = message.destinationName\n    const topicParts = topic.split(\"/\")\n    const payload = parseFloat(message.payloadString)\n    const unit = topicParts[1]\n    const objectRef = (topicParts.slice(-1)[0] === \"alt_media_throughput\")  ? \"altMediaThroughputPerUnit\"  : \"mediaThroughputPerUnit\"\n    const totalRef = (topicParts.slice(-1)[0] === \"alt_media_throughput\")  ? \"altMediaThroughput\"  : \"mediaThroughput\"\n\n    this.setState({\n      [objectRef]: this.addOrUpdate(unit, this.state[objectRef], payload)\n    });\n\n    var total = Object.values(this.state[objectRef]).reduce((a, b) => a + b, 0)\n\n    this.setState({\n      [totalRef]: total\n    })\n\n  }\n  render(){\n    return (\n    <Card>\n      <CardContent>\n        <Typography variant=\"h6\" component=\"h2\">\n          <Box fontWeight=\"fontWeightRegular\">\n            Dosing\n          </Box>\n        </Typography>\n       <TableContainer style={{ width: \"100%\"}}>\n          <Table size=\"small\" aria-label=\"media throughput\">\n            <TableHead>\n              <TableRow>\n                <TableCell style={{padding: \"6px 0px\"}}></TableCell>\n                <TableCell style={{padding: \"6px 0px\"}} align=\"right\">Media</TableCell>\n                <TableCell style={{padding: \"6px 0px\"}} align=\"right\">Alt. Media</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              <TableRow key=\"all\">\n                <TableCell style={{padding: \"6px 0px\"}} component=\"th\" scope=\"row\">\n                  All Pioreactors\n                </TableCell>\n                <TableCell align=\"right\" style={{fontFamily: \"courier\", fontSize: 14, padding: \"6px 0px\"}}>{this.state.mediaThroughput}mL (~{this.state.rates.all.mediaRate}mL/h)</TableCell>\n                <TableCell align=\"right\" style={{fontFamily: \"courier\", fontSize: 14, padding: \"6px 0px\"}}>{this.state.altMediaThroughput}mL (~{this.state.rates.all.altMediaRate}mL/h)</TableCell>\n              </TableRow>\n\n              {this.state.activeUnits.map((unit) => (\n                <TableRow key={unit}>\n                  <TableCell style={{padding: \"6px 0px\"}} component=\"th\" scope=\"row\">\n                      <PioreactorIcon style={{ fontSize: 14, verticalAlign: \"middle\" }} color=\"black\"/> <span className={\"underlineSpan\"} title={unit}>{(this.props.config['ui.overview.rename'] && this.props.config['ui.overview.rename'][unit]) ? this.props.config['ui.overview.rename'][unit] : unit}</span>\n                  </TableCell>\n                  <TableCell align=\"right\" style={{fontFamily: \"courier\", fontSize: 14, padding: \"6px 0px\"}}>{this.state.mediaThroughputPerUnit[unit] || 0}mL (~{this.state.rates[unit] ? this.state.rates[unit].mediaRate : 0}mL/h)</TableCell>\n                  <TableCell align=\"right\" style={{fontFamily: \"courier\", fontSize: 14, padding: \"6px 0px\"}}>{this.state.altMediaThroughputPerUnit[unit] || 0}mL (~{this.state.rates[unit] ? this.state.rates[unit].altMediaRate: 0}mL/h)</TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </CardContent>\n    </Card>\n  )}\n}\n\nexport default  withStyles(useStyles)(MediaCard);\n","import React from \"react\";\nimport { Client, Message } from \"paho-mqtt\";\nimport ClearIcon from '@material-ui/icons/Clear';\nimport Button from \"@material-ui/core/Button\";\nimport { makeStyles } from '@material-ui/core/styles';\n\n\nconst useStyles = makeStyles((theme) => ({\n  textIcon: {\n    fontSize: 15,\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n}))\n\n\nfunction ClearChartButton(props){\n  const classes = useStyles();\n\n\n  function onClick() {\n    if (props.config.remote) {\n      var client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      var client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n    client.connect({onSuccess: () => {\n      for (var jobName of ['od_raw', 'od_filtered', 'growth_rate', 'alt_media_fraction']) {\n        var message = new Message(\"\");\n\n        message.destinationName = [\n          \"pioreactor\",\n          \"leader\",\n          \"$experiment\",\n          `${jobName}_time_series_aggregating`,\n          \"aggregated_time_series\",\n          \"set\",\n        ].join(\"/\");\n\n        message.qos = 1;\n        client.publish(message);\n      }\n\n      window.location.reload();\n      return false\n    }});\n  }\n\n  return (\n    <Button color=\"primary\" style={{textTransform: \"none\"}} onClick={onClick}><ClearIcon className={classes.textIcon}/> Clear chart data </Button>\n)}\n\n\nexport default ClearChartButton;\n","import React from \"react\";\nimport { Client, Message } from \"paho-mqtt\";\nimport ClearIcon from '@material-ui/icons/Clear';\nimport Button from \"@material-ui/core/Button\";\nimport { makeStyles } from '@material-ui/core/styles';\n\n\nconst useStyles = makeStyles((theme) => ({\n  textIcon: {\n    fontSize: 15,\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n}))\n\n\nfunction ClearLogButton(props){\n  const classes = useStyles();\n\n\n  function onClick() {\n    if (props.config.remote) {\n      var client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      var client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n    client.connect({onSuccess: () => {\n      var message = new Message(\"\");\n      message.destinationName = [\n        \"pioreactor\",\n        \"leader\",\n        \"$experiment\",\n        \"log_aggregating\",\n        \"aggregated_log_table\",\n        \"set\",\n      ].join(\"/\");\n      message.qos = 2;\n      client.publish(message);\n      window.location.reload();\n      return false\n    }});\n  }\n\n  return (\n    <Button color=\"primary\" style={{textTransform: \"none\"}} onClick={onClick}> <ClearIcon className={classes.textIcon}/>  Clear log table </Button>\n)}\n\n\nexport default ClearLogButton;\n","import React from \"react\";\n\nimport Grid from \"@material-ui/core/Grid\";\nimport Button from \"@material-ui/core/Button\";\nimport Header from \"./components/Header\";\nimport LogTable from \"./components/LogTable\";\nimport ExperimentSummary from \"./components/ExperimentSummary\";\nimport Chart from \"./components/Chart\";\nimport MediaCard from \"./components/MediaCard\";\nimport ClearChartButton from \"./components/ClearChartButton\";\nimport ClearLogButton from \"./components/ClearLogButton\";\nimport PioreactorIcon from './components/PioreactorIcon';\nimport TactileButtonNotification from \"./components/TactileButtonNotification\";\n\n\nfunction Overview(props) {\n\n  const [experimentMetadata, setExperimentMetadata] = React.useState({})\n\n  React.useEffect(() => {\n    async function getLatestExperiment() {\n         await fetch(\"/get_latest_experiment\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          setExperimentMetadata(data)\n        });\n      }\n    getLatestExperiment()\n  }, [])\n\n  return (\n      <React.Fragment>\n        <Grid container spacing={2} justify=\"space-between\">\n          <Grid item xs={12} style={{paddingRight: \"0px\"}}>\n            <Header />\n          </Grid>\n          <Grid item xs={1} md={12}/>\n          <Grid item xs={1} md={12}/>\n\n\n          <Grid item xs={12} md={1}/>\n          <Grid item xs={12} md={10}>\n            <ExperimentSummary experimentMetadata={experimentMetadata}/>\n          </Grid>\n          <Grid item xs={12} md={1}/>\n\n\n          <Grid item xs={12} md={1}/>\n          <Grid item xs={12} md={6} container spacing={2} justify=\"flex-start\" style={{paddingLeft: 0, height: \"100%\"}}>\n\n\n            {( props.config['ui.overview.charts'] && (props.config['ui.overview.charts']['implied_growth_rate'] === \"1\")) &&\n            <Grid item xs={12}>\n              <Chart\n                config={props.config}\n                dataFile={\"./data/growth_rate_time_series_aggregating.json\"}\n                title=\"Implied growth rate\"\n                topic=\"growth_rate\"\n                yAxisLabel=\"Growth rate, h⁻¹\"\n                experiment={experimentMetadata.experiment}\n                interpolation=\"stepAfter\"\n              />\n            </Grid>\n            }\n\n            {( props.config['ui.overview.charts'] && (props.config['ui.overview.charts']['fraction_of_volume_that_is_alternative_media'] === \"1\")) &&\n            <Grid item xs={12}>\n              <Chart\n                config={props.config}\n                domain={[0, 1]}\n                dataFile={\"./data/alt_media_fraction_time_series_aggregating.json\"}\n                interpolation=\"stepAfter\"\n                title=\"Fraction of volume that is alternative media\"\n                topic=\"alt_media_calculating/alt_media_fraction\"\n                yAxisLabel=\"Fraction\"\n                experiment={experimentMetadata.experiment}\n              />\n            </Grid>\n            }\n\n            {( props.config['ui.overview.charts'] && (props.config['ui.overview.charts']['normalized_optical_density'] === \"1\")) &&\n            <Grid item xs={12}>\n              <Chart\n                config={props.config}\n                isODReading={true}\n                dataFile={\"./data/od_filtered_time_series_aggregating.json\"}\n                title=\"Normalized optical density\"\n                topic=\"od_filtered/+/+\"\n                yAxisLabel=\"Current OD / initial OD\"\n                experiment={experimentMetadata.experiment}\n                interpolation=\"stepAfter\"\n              />\n            </Grid>\n            }\n\n            {( props.config['ui.overview.charts'] && (props.config['ui.overview.charts']['raw_optical_density'] === \"1\")) &&\n            <Grid item xs={12}>\n              <Chart\n                config={props.config}\n                isODReading={true}\n                dataFile={\"./data/od_raw_time_series_aggregating.json\"}\n                title=\"Raw optical density\"\n                topic=\"od_raw/+/+\"\n                yAxisLabel=\"Voltage\"\n                experiment=\"+\"\n                interpolation=\"stepAfter\"\n              />\n            </Grid>\n           }\n            <Grid item xs={12}> <ClearChartButton config={props.config} experiment={experimentMetadata.experiment}/> </Grid>\n          </Grid>\n\n          <Grid item xs={12} md={4} container spacing={2} justify=\"flex-end\" style={{height: \"100%\"}}>\n\n\n            {( props.config['ui.overview.cards'] && (props.config['ui.overview.cards']['dosings'] === \"1\")) &&\n              <Grid item xs={12} style={{padding: \"10px 0px\"}}>\n                <MediaCard experiment={experimentMetadata.experiment} config={props.config}/>\n                <Button href=\"/pioreactors\" color=\"primary\" style={{textTransform: \"none\", verticalAlign: \"middle\", margin: \"0px 3px\"}}> <PioreactorIcon style={{ fontSize: 17 }} color=\"primary\"/> See all Pioreactor details </Button>\n              </Grid>\n            }\n\n\n            {( props.config['ui.overview.cards'] && (props.config['ui.overview.cards']['event_logs'] === \"1\")) &&\n              <Grid item xs={12} style={{padding: \"10px 0px\"}}>\n                <LogTable config={props.config}/>\n                <ClearLogButton config={props.config} />\n              </Grid>\n            }\n\n\n          </Grid>\n\n          <Grid item xs={1} md={1}/>\n        </Grid>\n        {props.config['ui.overview.rename'] ? <TactileButtonNotification config={props.config}/> : null}\n      </React.Fragment>\n  );\n}\nexport default Overview;\n","import React from \"react\";\nimport moment from \"moment\";\n\nimport Grid from '@material-ui/core/Grid';\nimport Header from \"./components/Header\"\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/Card';\nimport {Typography} from '@material-ui/core';\nimport Select from '@material-ui/core/Select';\nimport Box from '@material-ui/core/Box';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Button from \"@material-ui/core/Button\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\"\n  },\n  formControl: {\n    margin: theme.spacing(3),\n  },\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n}));\n\n\n\nfunction ExperimentSelection(props) {\n  const classes = useStyles();\n\n  const [experiments, setExperiments] = React.useState([])\n\n  React.useEffect(() => {\n    async function getData() {\n         await fetch(\"/get_experiments\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          setExperiments(data)\n          props.handleChange(data[0].experiment)\n        });\n      }\n      getData()\n  }, [])\n\n  const handleExperimentSelectionChange = (e) => {\n    props.handleChange(e.target.value)\n  }\n\n  return (\n    <div className={classes.root}>\n      <FormControl component=\"fieldset\" className={classes.formControl}>\n\n      <FormLabel component=\"legend\">Experiment</FormLabel>\n        <Select\n          native\n          value={props.ExperimentSelection}\n          onChange={handleExperimentSelectionChange}\n          inputProps={{\n            name: 'experiment',\n            id: 'experiment',\n          }}\n        >\n          {experiments.map((v) => {\n            return <option value={v.experiment}>{v.experiment +  ` (started ${moment(v.timestamp).format(\"MMMM D, YYYY\")})`}</option>\n            }\n          )}\n        </Select>\n      </FormControl>\n\n    </div>\n  )\n}\n\n\n\nconst CheckboxesGroup = (props) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <FormControl component=\"fieldset\" className={classes.formControl}>\n        <FormLabel component=\"legend\">Datasets</FormLabel>\n        <FormGroup>\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.growth_rates} onChange={props.handleChange} name=\"growth_rates\" />}\n            label=\"Implied growth rate\"\n          />\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.io_events} onChange={props.handleChange} name=\"io_events\" />}\n            label=\"Dosing events log\"\n          />\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.experiments} onChange={props.handleChange} name=\"experiments\" />}\n            label=\"Experiment description\"\n          />\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.od_readings_raw} onChange={props.handleChange} name=\"od_readings_raw\" />}\n            label=\"Raw optical density\"\n          />\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.od_readings_filtered} onChange={props.handleChange} name=\"od_readings_filtered\" />}\n            label=\"Normalized optical density\"\n          />\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.logs} onChange={props.handleChange} name=\"logs\" />}\n            label=\"Event logs\"\n          />\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.alt_media_fraction} onChange={props.handleChange} name=\"alt_media_fraction\" />}\n            label=\"Alternative media fraction\"\n          />\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.io_algorithm_settings} onChange={props.handleChange} name=\"io_algorithm_settings\" />}\n            label=\"Dosing algorithm change log\"\n          />\n        </FormGroup>\n      </FormControl>\n    </div>\n)}\n\n\nfunction DownloadDataFormContainer() {\n  const classes = useStyles();\n  const [isRunning, setIsRunning] = React.useState(false)\n  const [isError, setIsError] = React.useState(false)\n  const [errorMsg, setErrorMsg] = React.useState(\"\")\n  const [state, setState] = React.useState({\n    experimentSelection: \"\",\n    datasetCheckbox: {\n      growth_rates: false,\n      io_events: false,\n      experiments: false,\n      od_readings_raw: false,\n      od_readings_filtered: false,\n      logs: false,\n      alt_media_fraction: false,\n      io_algorithm_settings: false,\n    }\n  });\n\n  const onSubmit = (event) =>{\n    event.preventDefault()\n\n    if (!Object.values(state['datasetCheckbox']).some((e) => e)) {\n      setIsError(true)\n      setErrorMsg(\"At least one dataset must be selected.\")\n      return\n    }\n\n    setIsRunning(true)\n    fetch('query_datasets',{\n        method: \"POST\",\n        body: JSON.stringify(state),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n    }).then(res => res.json())\n      .then(res => {\n      var link = document.createElement(\"a\");\n      link.setAttribute('download', res['filename']);\n      link.href = \"/static/exports/\" + res['filename'];\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n      setIsRunning(false)\n    }).catch(e => {\n      setIsRunning(false)\n      setIsError(true)\n      setErrorMsg(\"Server error occurred. Check logs.\")\n    });\n  }\n\n  const handleCheckboxChange = (event) => {\n    setState(prevState => ({\n      ...prevState,\n      datasetCheckbox: {...state.datasetCheckbox, [event.target.name]: event.target.checked }\n    }));\n  };\n\n  function handleExperimentSelectionChange(value) {\n    setState(prevState => ({\n      ...prevState,\n      experimentSelection: value\n    }));\n  };\n\n  const runningFeedback = isRunning ? <CircularProgress color=\"white\" size={24}/> : \"Download\"\n  const errorFeedbackOrDefault = isError ? errorMsg : \"Querying large tables may take up to a minute or so.\"\n  return (\n    <>\n      <div>\n        <div>\n          <Typography variant=\"h5\" component=\"h1\">\n            <Box fontWeight=\"fontWeightBold\">\n              Download Experiment Data\n            </Box>\n          </Typography>\n        </div>\n\n      </div>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n          <form>\n            <Grid container spacing={1}>\n              <Grid item xs={12} md={12}>\n                <ExperimentSelection\n                experimentSelection={state.experimentSelection}\n                handleChange={handleExperimentSelectionChange}\n                />\n              </Grid>\n              <Grid item xs={12} md={12}>\n                <CheckboxesGroup\n                isChecked={state.datasetCheckbox}\n                handleChange={handleCheckboxChange}\n                />\n              </Grid>\n\n              <Grid item xs={0}/>\n              <Grid item xs={12}>\n                <Button\n                  type=\"submit\"\n                  variant=\"contained\"\n                  color=\"primary\"\n                  onClick={onSubmit}\n                  style={{width: \"120px\", marginLeft: 24}}\n                >\n                  {runningFeedback}\n                </Button>\n                <p style={{marginLeft: 24}}>{errorFeedbackOrDefault}</p>\n\n              </Grid>\n              <Grid item xs={12}/>\n            </Grid>\n          </form>\n        </CardContent>\n      </Card>\n  </>\n  )\n}\n\n\nfunction DownloadData() {\n    return (\n        <Grid container spacing={2} >\n          <Grid item xs={12}><Header /></Grid>\n          <Grid item xs={12} />\n          <Grid item xs={12} />\n\n          <Grid item md={1} xs={1}/>\n          <Grid item md={10} xs={12}>\n            <DownloadDataFormContainer/>\n          </Grid>\n          <Grid item md={1} xs={1}/>\n        </Grid>\n    )\n}\n\nexport default DownloadData;\n\n","\nexport function parseINIString(data){\n    var regex = {\n        section: /^\\s*\\[\\s*([^\\]]*)\\s*\\]\\s*$/,\n        param: /^\\s*([^=]+?)\\s*=\\s*(.*?)\\s*$/,\n        comment: /^\\s*;.*$/\n    };\n    var value = {};\n    var lines = data.split(/[\\r\\n]+/);\n    var section = null;\n    lines.forEach(function(line){\n        if(regex.comment.test(line)){\n            return;\n        }else if(regex.param.test(line)){\n            var match = line.match(regex.param);\n            if(section){\n                value[section][match[1]] = match[2];\n            }else{\n                value[match[1]] = match[2];\n            }\n        }else if(regex.section.test(line)){\n            var match = line.match(regex.section);\n            value[match[1]] = {};\n            section = match[1];\n        }else if(line.length === 0 && section){\n            section = null;\n        };\n    });\n    return value;\n}","import React, { useState, useEffect } from \"react\";\n\nimport { Client, Message } from \"paho-mqtt\";\n\nimport { makeStyles } from \"@material-ui/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nconst useStyles = makeStyles((theme) => ({\n  textFieldCompact: {\n    marginTop: theme.spacing(3),\n    marginRight: theme.spacing(2),\n    marginBottom: theme.spacing(0),\n    width: \"30ch\",\n  },\n  formControl: {\n    marginTop: theme.spacing(2)\n  },\n  unitTitle: {\n    fontSize: 17,\n    color: \"rgba(0, 0, 0, 0.87)\",\n  },\n  unitTitleDialog :{\n    fontSize: 20,\n    color: \"rgba(0, 0, 0, 0.87)\",\n  },\n  suptitle: {\n    fontSize: \"13px\",\n    color: \"rgba(0, 0, 0, 0.60)\",\n  },\n}));\n\nfunction SilentForm(props){\n  const classes = useStyles();\n  const defaults = {duration: 60}\n\n  useEffect(() => {\n    props.updateParent(defaults)\n  }, [])\n\n\n  const onSettingsChange = (e) => {\n    props.updateParent({[e.target.id]: e.target.value})\n  }\n\n  return (\n      <TextField\n        size=\"small\"\n        id=\"duration\"\n        label=\"Duration between events\"\n        defaultValue={defaults.duration}\n        InputProps={{\n          endAdornment: <InputAdornment position=\"end\">min</InputAdornment>,\n        }}\n        variant=\"outlined\"\n        onChange={onSettingsChange}\n        className={classes.textFieldCompact}\n      />\n)}\n\nfunction PIDTurbidostatForm(props){\n  const classes = useStyles();\n  const defaults = {duration: 30, volume: 0.75, target_od: 1.5}\n\n  useEffect(() => {\n    props.updateParent(defaults)\n  }, [])\n\n\n  const onSettingsChange = (e) => {\n    props.updateParent({[e.target.id]: parseFloat(e.target.value)})\n  }\n\n  return (\n      <div>\n        <TextField\n          size=\"small\"\n          id=\"duration\"\n          defaultValue={defaults.duration}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">min</InputAdornment>,\n          }}\n          variant=\"outlined\"\n          onChange={onSettingsChange}\n          className={classes.textFieldCompact}\n          label=\"Duration between events\"\n        />\n        <TextField\n          size=\"small\"\n          id=\"volume\"\n          label=\"Max volume\"\n          defaultValue={defaults.volume}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">mL</InputAdornment>,\n          }}\n          variant=\"outlined\"\n          onChange={onSettingsChange}\n          className={classes.textFieldCompact}\n        />\n        <TextField\n          size=\"small\"\n          id=\"target_od\"\n          label=\"Target OD\"\n          defaultValue={defaults.target_od}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">AU</InputAdornment>,\n          }}\n          variant=\"outlined\"\n          onChange={onSettingsChange}\n          className={classes.textFieldCompact}\n        />\n    </div>\n)}\n\nfunction PIDMorbidostatForm(props){\n  const classes = useStyles();\n  const defaults = {duration: 60, target_growth_rate: 0.1, target_od: 1.5}\n\n  useEffect(() => {\n    props.updateParent(defaults)\n  }, [])\n\n  const onSettingsChange = (e) => {\n    props.updateParent({[e.target.id]: e.target.value})\n  }\n\n  return (\n      <div>\n        <TextField\n          size=\"small\"\n          id=\"duration\"\n          label=\"Duration between events\"\n          defaultValue={defaults.duration}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">min</InputAdornment>,\n          }}\n          variant=\"outlined\"\n          onChange={onSettingsChange}\n          className={classes.textFieldCompact}\n        />\n        <TextField\n          size=\"small\"\n          id=\"target_od\"\n          label=\"Target OD\"\n          defaultValue={defaults.target_od}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">AU</InputAdornment>,\n          }}\n          variant=\"outlined\"\n          onChange={onSettingsChange}\n          className={classes.textFieldCompact}\n        />\n        <TextField\n          size=\"small\"\n          id=\"target_growth_rate\"\n          label=\"Target growth rate\"\n          defaultValue={defaults.target_growth_rate}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">h⁻¹</InputAdornment>,\n          }}\n          variant=\"outlined\"\n          onChange={onSettingsChange}\n          className={classes.textFieldCompact}\n        />\n    </div>\n)}\n\n\n\nfunction ButtonChangeDosingDialog(props) {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [algoSettings, setAlgoSettings] = useState({io_algorithm: \"silent\"})\n  const [isClicked, setIsClicked] = useState(false)\n  const [client, setClient] = useState(null)\n\n  const algos = [\n    {name: \"Silent\", key: \"silent\"},\n    {name: \"PID Morbidostat\",  key: \"pid_morbidostat\"},\n    {name: \"PID Turbidostat\",  key: \"pid_turbidostat\"},\n    {name: \"Chemostat\", key: \"chemostat\"},\n  ]\n\n  useEffect(() => {\n    // MQTT - client ids should be unique\n    if (!props.config['network.topology']){\n      return\n    }\n\n    if (props.config.remote) {\n      var client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      var client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n\n    client.connect();\n    setClient(client)\n  },[props.config])\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleAlgoSelectionChange = (e) => {\n    setAlgoSettings({io_algorithm: e.target.value})\n  }\n\n  const updateFromChild = (setting) => {\n    setAlgoSettings(prevState => ({...prevState, ...setting}))\n  }\n\n  const switchToForm = () => {\n    switch(algoSettings.io_algorithm) {\n      case \"silent\":\n        return <SilentForm updateParent={updateFromChild}/>\n      case \"pid_turbidostat\":\n        return <PIDTurbidostatForm updateParent={updateFromChild}/>\n      case \"pid_morbidostat\":\n        return <PIDMorbidostatForm updateParent={updateFromChild}/>\n      default:\n        return <div><p>Not implemented</p></div>\n    }\n  }\n\n  const onSubmit = (event) => {\n    event.preventDefault()\n    setIsClicked(true)\n    var message = new Message(JSON.stringify(algoSettings));\n    message.destinationName = [\n      \"pioreactor\",\n      props.unit,\n      props.experiment,\n      \"algorithm_controlling\",\n      \"io_algorithm\",\n      \"set\",\n    ].join(\"/\");\n    message.qos = 2;\n    try{\n      client.publish(message);\n    }\n    catch (e){\n      console.log(e)\n    }\n    setOpen(false);\n  }\n  return (\n    <div>\n    <Button\n      style={{marginTop: \"10px\"}}\n      size=\"small\"\n      color=\"primary\"\n      disabled={!props.currentDosingAlgorithm}\n      onClick={handleClickOpen}\n    >\n      Change dosing algorithm\n    </Button>\n    <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\" PaperProps={{style: {height: \"100%\"}}}>\n      <DialogTitle>\n        <Typography className={classes.suptitle}>\n          {props.title || ((props.config['ui.overview.rename'] && props.config['ui.overview.rename'][props.unit]) ? `${props.config['ui.overview.rename'][props.unit]} (${props.unit})` : `${props.unit}`)}\n        </Typography>\n        <Typography className={classes.unitTitleDialog}>\n          Dosing Algorithm\n        </Typography>\n      </DialogTitle>\n      <DialogContent>\n        <Typography variant=\"body2\" component=\"p\" gutterBottom>\n          Dosing algorithms control when and how much media to add to the Pioreactor. The settings below can be changed later. Learn more about <a target=\"_blank\" href=\"https://github.com/Pioreactor/pioreactor/wiki/io-algorithms\">dosing algorithms</a>.\n        </Typography>\n\n        <form>\n          <FormControl component=\"fieldset\" className={classes.formControl}>\n          <FormLabel component=\"legend\">Algorithm</FormLabel>\n            <Select\n              native\n              value={algoSettings.mode}\n              onChange={handleAlgoSelectionChange}\n              style={{maxWidth: \"200px\"}}\n            >\n              {algos.map((v) => {\n                return <option id={v.key} value={v.key} key={\"change-io\" + v.key}>{v.name}</option>\n                }\n              )}\n            </Select>\n            {switchToForm()}\n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              color={isClicked ? \"default\" : \"primary\" }\n              onClick={onSubmit}\n              style={{width: \"120px\", marginTop: \"20px\"}}\n            >\n              Submit\n            </Button>\n          </FormControl>\n        </form>\n\n\n      </DialogContent>\n    </Dialog>\n    </div>\n)}\n\n\nexport default ButtonChangeDosingDialog;\n","import React, {useState} from 'react'\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport { makeStyles } from \"@material-ui/styles\";\n\nconst useStyles = makeStyles({\n  actionTextField: {\n    padding: \"0px 10px 0px 0px\",\n  },\n  actionForm: {\n    padding: \"20px 0px 0px 0px\",\n  }\n});\n\n\nconst actionToAct = {\n  \"remove_waste\": \"Removing waste\",\n  \"add_media\": \"Adding media\",\n  \"add_alt_media\": \"Adding alt. media\",\n\n}\n\nexport default function ActionPumpForm(props) {\n  const emptyState = \"\";\n  const [mL, setML] = useState(emptyState);\n  const [duration, setDuration] = useState(emptyState);\n  const classes = useStyles();\n  const [isMLDisabled, setIsMLDisabled] = useState(false);\n  const [isDurationDisabled, setIsDurationDisabled] = useState(false);\n  const [openSnackbar, setOpenSnackbar] = useState(false);\n\n  function onSubmit(e) {\n    e.preventDefault();\n    if (mL !== emptyState || duration !== emptyState) {\n      const params = mL !== \"\" ? { ml: mL, source_of_event: \"UI\"} : { duration: duration, source_of_event: \"UI\"};\n      fetch(\n        \"/run/\" +\n          props.action +\n          \"/\" +\n          props.unitNumber +\n          \"?\" +\n          new URLSearchParams(params)\n      );\n      setOpenSnackbar(true);\n    }\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false );\n  };\n\n  function handleMLChange(e) {\n    setML(e.target.value);\n    setIsDurationDisabled(true);\n    if (e.target.value === emptyState) {\n      setIsDurationDisabled(false);\n    }\n  }\n\n  function handleDurationChange(e) {\n    setDuration(e.target.value);\n    setIsMLDisabled(true);\n    if (e.target.value === emptyState) {\n      setIsMLDisabled(false);\n    }\n  }\n\n  return (\n    <form id={props.action} className={classes.actionForm}>\n      <TextField\n        name=\"mL\"\n        value={mL}\n        size=\"small\"\n        id={props.action + \"_mL\"}\n        label=\"mL\"\n        variant=\"outlined\"\n        disabled={isMLDisabled}\n        onChange={handleMLChange}\n        className={classes.actionTextField}\n      />\n      <TextField\n        name=\"duration\"\n        value={duration}\n        size=\"small\"\n        id={props.action + \"_duration\"}\n        label=\"seconds\"\n        variant=\"outlined\"\n        disabled={isDurationDisabled}\n        onChange={handleDurationChange}\n        className={classes.actionTextField}\n      />\n      <br />\n      <br />\n      <Button\n        type=\"submit\"\n        variant=\"contained\"\n        size=\"small\"\n        color=\"primary\"\n        onClick={onSubmit}\n      >\n        {props.action.replace(/_/g, \" \")}\n      </Button>\n      <Snackbar\n        anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n        open={openSnackbar}\n        onClose={handleSnackbarClose}\n        message={actionToAct[props.action] + \" for \" + (duration !== emptyState ? (duration + \" seconds\") : (mL + \"mL\"))}\n        autoHideDuration={7000}\n        key={\"snackbar\" + props.unitNumber + props.action}\n      />\n    </form>\n  );\n}","import clsx from 'clsx';\nimport { Client, Message } from \"paho-mqtt\";\n\nimport React, {useState, useEffect} from \"react\";\n\nimport Grid from '@material-ui/core/Grid';\nimport Header from \"./components/Header\"\nimport PropTypes from 'prop-types';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/Card';\nimport {Typography} from '@material-ui/core';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport Box from '@material-ui/core/Box';\nimport Divider from '@material-ui/core/Divider';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Slider from '@material-ui/core/Slider';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport TextField from '@material-ui/core/TextField';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Button from \"@material-ui/core/Button\";\nimport AddIcon from '@material-ui/icons/Add';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport EditIcon from '@material-ui/icons/Edit';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport {parseINIString} from \"./utilities\"\nimport ButtonChangeDosingDialog from \"./components/ButtonChangeDosingDialog\"\nimport ActionPumpForm from \"./components/ActionPumpForm\"\nimport PioreactorIcon from \"./components/PioreactorIcon\"\nimport TactileButtonNotification from \"./components/TactileButtonNotification\";\nimport BlinkLED from \"./components/BlinkLED\";\n\n\nconst onlineGreen = \"#4caf50\"\nconst offlineGrey = \"grey\"\nconst errorRed = \"#DE3618\"\n\nconst useStyles = makeStyles((theme) => ({\n  textIcon: {\n    fontSize: 15,\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n  pioreactorCard: {\n    marginTop: \"0px\",\n    marginBottom: \"20px\",\n  },\n  cardContent: {\n    padding: \"10px 20px 20px 20px\"\n  },\n  unitTitle: {\n    fontSize: 20,\n    color: \"rgba(0, 0, 0, 0.87)\",\n    fontWeight: 500,\n  },\n  unitTitleDialog :{\n    fontSize: 20,\n    color: \"rgba(0, 0, 0, 0.87)\",\n  },\n  suptitle: {\n    fontSize: \"13px\",\n    color: \"rgba(0, 0, 0, 0.60)\",\n  },\n  disabledText: {\n    color: \"rgba(0, 0, 0, 0.38)\",\n  },\n  textbox:{\n    width: \"130px\",\n  },\n  textboxLabel:{\n    width: \"100px\",\n  },\n  footnote: {\n    marginBottom: 0,\n    fontSize: 12,\n  },\n  textField: {\n    marginTop: \"15px\",\n    maxWidth: \"180px\",\n  },\n  textFieldWide: {\n    marginTop: \"15px\",\n    maxWidth: \"220px\",\n  },\n  textFieldCompact: {\n    marginTop: theme.spacing(3),\n    marginRight: theme.spacing(2),\n    marginBottom: theme.spacing(0),\n    width: \"30ch\",\n  },\n  slider: {\n    width: \"70%\",\n    margin: \"40px auto 0px auto\",\n  },\n  divider: {\n    marginTop: 15,\n    marginBottom: 10,\n  },\n}));\n\nfunction TabPanel(props) {\n  // move me\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n          <div>{children}</div>\n      )}\n    </div>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired,\n};\n\n\nclass UnitSettingDisplay extends React.Component {\n  // this class polls the MQTT broker for state\n  constructor(props) {\n    super(props);\n    this.state = { msg: this.props.default };\n    this.onConnect = this.onConnect.bind(this);\n    this.onMessageArrived = this.onMessageArrived.bind(this);\n    this.MQTTConnect();\n  }\n\n  updateParent(data) {\n    try {\n      this.props.passChildData(data);\n    } catch (e) {}\n  }\n\n  MQTTConnect() {\n    // need to have unique clientIds\n    if (this.props.config.remote) {\n      this.client = new Client(\n        `ws://${this.props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      this.client = new Client(\n        `${this.props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n    this.client.connect({ onSuccess: this.onConnect});\n    this.client.onMessageArrived = this.onMessageArrived;\n  }\n\n  onConnect() {\n    this.client.subscribe(\n      [\n        \"pioreactor\",\n        this.props.unit,\n        this.props.experiment,\n        this.props.topic,\n      ].join(\"/\"),\n      { qos: 1 }\n    );\n  }\n\n  stateDisplay = {\n    \"init\":          {display: \"Starting\", color: onlineGreen},\n    \"ready\":         {display: \"On\", color: onlineGreen},\n    \"sleeping\":      {display: \"Paused\", color: offlineGrey},\n    \"disconnected\":  {display: \"Off\", color: offlineGrey},\n    \"lost\":          {display: \"Lost\", color: errorRed},\n    \"NA\":            {display: \"Not available\", color: offlineGrey},\n  }\n\n  onMessageArrived(message) {\n    var parsedFloat = parseFloat(message.payloadString);\n    var payload = isNaN(parsedFloat) ? message.payloadString : parsedFloat\n    this.setState({\n      msg: payload,\n    });\n    this.updateParent(payload);\n  }\n\n  render() {\n    if (this.props.isStateSetting) {\n      if (!this.props.isUnitActive) {\n        return <div style={{ color: offlineGrey, fontWeight: 500}}> {this.stateDisplay[this.state.msg].display} </div>;\n      } else {\n        var displaySettings = this.stateDisplay[this.state.msg]\n        return (\n          <div style={{ color: displaySettings.color, fontWeight: 500}}>\n            {displaySettings.display}\n          </div>\n      )}\n    } else {\n      if (!this.props.isUnitActive || this.state.msg === \"—\" || this.state.msg === \"\") {\n        return <div style={{ color: offlineGrey}}> {this.props.default} </div>;\n      } else {\n        return (\n          <div style={{ color: \"rgba(0, 0, 0, 0.87)\", fontFamily: \"courier\", fontSize: \"14px\" }}>\n            {(typeof this.state.msg === \"string\"\n              ? this.state.msg\n              : +this.state.msg.toFixed(this.props.precision)) +\n              (this.props.measurementUnit ? this.props.measurementUnit : \"\")}\n          </div>\n        );\n      }\n    }\n  }\n}\n\n\n\nfunction ButtonConfirmStopProcessDialog() {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const onConfirm = () => {\n    fetch(\"/stop\")\n    handleClose()\n  }\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <React.Fragment>\n      <Button style={{textTransform: 'none', marginRight: \"10px\", float: \"right\"}} color=\"secondary\" onClick={handleClickOpen}>\n        <ClearIcon className={classes.textIcon}/> Stop all activity\n      </Button>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">{\"Stop all Pioreactor activity?\"}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n            This will stop stirring, optical density measuring, and IO events from occurring in <b>all</b> Pioreactor units.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={onConfirm} color=\"primary\">\n            OK\n          </Button>\n          <Button onClick={handleClose} color=\"primary\" autoFocus>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </React.Fragment>\n  );\n}\n\n\nfunction AddNewPioreactor(props){\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\n  const [name, setName] = React.useState(\"\");\n  const [isRunning, setIsRunning] = React.useState(false)\n  const [errorMsg, setErrorMsg] = React.useState(\"\")\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleSnackbarClose = () => {\n    setSnackbarOpen(false)\n  }\n\n  const handleNameChange = evt => {\n    setName(evt.target.value)\n  }\n\n  const onSubmit = (event) =>{\n    event.preventDefault()\n    if (!name) {\n      setErrorMsg(\"Fill in the new name.\")\n      return\n    }\n\n    setIsRunning(true)\n    fetch('add_new_pioreactor',{\n        method: \"POST\",\n        body: JSON.stringify({newPioreactorName: name}),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n    }).then(res => res.json())\n    .then(res => {\n      if (!res){\n        console.log(\"error\")\n      }\n      else {\n\n      }\n    })\n    .catch(e => {\n      setIsRunning(false)\n    });\n  }\n\n  const runningFeedback = isRunning ? <CircularProgress color=\"inherit\" size={24}/> : \"Install and connect\"\n\n  return (\n    <React.Fragment>\n    <Button onClick={handleClickOpen} style={{textTransform: 'none', float: \"right\", marginRight: \"0px\"}} color=\"primary\">\n      <AddIcon className={classes.textIcon}/> Add new Pioreactor\n    </Button>\n    <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n      <DialogTitle>\n        <Typography className={classes.unitTitleDialog}>\n        Add new Pioreactor\n        </Typography>\n      </DialogTitle>\n      <DialogContent>\n      <p> To add a new Pioreactor, you'll need the following: </p>\n      <ul>\n        <li>A RaspberryPi, with power cord</li>\n        <li>A microSD card</li>\n        <li>A computer with internet access that can read & write to the microSD card</li>\n        <li>The Pioreactor hardware hat</li>\n      </ul>\n      <p> With that all ready, let's begin: </p>\n      <ol>\n        <li>Flash the Raspberry Pi OS Lite onto the microSD card. Here's a <a href=\"https://www.youtube.com/watch?v=J024soVgEeM\">short video</a> on how.</li>\n        <li>Remove the microSD card, and put it <b>back in</b>.</li>\n        <li>Onto the microSD card, create an empty file named <code>ssh</code>.</li>\n        <li>Also onto the microSD card, create a file named <code>wpa_supplicant.conf</code>, with the following contents:</li>\n        <pre style={{border: \"1px #b9b9b9 solid\", padding: \"5px 10px\"}}>\n{`country=CA # Your 2-digit country code, ex: US, GB, CA\nctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev\nnetwork={\n    ssid=\"your network name\"\n    psk=\"your network password\"\n    key_mgmt=WPA-PSK\n}`}\n       </pre>\n        <li>Unmount the microSD, insert it into the RaspberryPi, and attach the Pioreactor hat to the RaspberryPi.</li>\n        <li>Turn on the RaspberryPi by inserting the power cord.</li>\n      </ol>\n\n      <p>We're pretty much done at this point. Below, provide a unique name for your new Pioreactor, and\n      we'll automatically install the required software and connect it to the other Pioreactors.\n      </p>\n\n      <p>It will take up to 5 minutes to install the software. When finished, the new Pioreactor\n      will show up on on this page.</p>\n\n      <div >\n        <TextField\n          size=\"small\"\n          id=\"new-pioreactor-name\"\n          label=\"New Pioreactor's name\"\n          variant=\"outlined\"\n          className={classes.textFieldWide}\n          onChange={handleNameChange}\n          helperText={errorMsg}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <PioreactorIcon style={{fontSize: \"1.1em\"}}/>\n              </InputAdornment>\n            ),\n          }}\n        />\n      </div>\n\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        style={{marginTop: \"15px\"}}\n        onClick={onSubmit}\n        type=\"submit\"\n      >\n        {runningFeedback}\n      </Button>\n\n      </DialogContent>\n    </Dialog>\n    <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={snackbarOpen}\n      onClose={handleSnackbarClose}\n      message={\"Installing new Pioreactor\"}\n      autoHideDuration={7000}\n      key={\"snackbar-add-new\"}\n    />\n    </React.Fragment>\n)}\n\n\n\nfunction PioreactorHeader(props) {\n  const classes = useStyles();\n\n  return (\n    <div>\n      <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: \"5px\"}}>\n        <Typography variant=\"h5\" component=\"h1\">\n          <Box fontWeight=\"fontWeightBold\">\n            Pioreactors\n          </Box>\n        </Typography>\n        <div >\n          <AddNewPioreactor config={props.config}/>\n        </div>\n      </div>\n      <Divider/>\n    </div>\n  )\n}\n\n\n\nfunction PatientButton(props) {\n  const [buttonText, setButtonText] = useState(props.buttonText)\n\n  useEffect(\n    () => {\n      setButtonText(props.buttonText)\n    }\n  , [props.buttonText])\n\n  function wrappingOnClick() {\n    function f() {\n      setButtonText(<CircularProgress color=\"inherit\" size={22}/>)\n      props.onClick()\n    }\n    return f\n  }\n\n  return (\n    <Button\n      disableElevation\n      style={{width: \"70px\", marginTop: \"5px\"}}\n      color={props.color}\n      variant={props.variant}\n      size=\"small\"\n      onClick={wrappingOnClick()}\n    >\n      {buttonText}\n    </Button>\n  )\n}\n\n\n\nfunction SettingsActionsDialog(props) {\n  const classes = useStyles();\n  const [defaultStirring, setDefaultStirring] = useState(0);\n  const [open, setOpen] = useState(false);\n  const [client, setClient] = useState(null);\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\n  const [tabValue, setTabValue] = React.useState(0);\n\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  useEffect(() => {\n    async function fetchData() {\n      await fetch(\"/get_config/config_\" + props.unit + \".ini\")\n        .then((response) => {\n            if (response.ok) {\n              return response.text();\n            } else {\n              throw new Error('Something went wrong');\n            }\n          })\n        .then((config) => {\n          config = parseINIString(config);\n          setDefaultStirring(\n            config[\"stirring\"][\"duty_cycle_\" + props.unit]\n          );\n        })\n        .catch((error) => {})\n    }\n    if (!props.disabled) {\n      fetchData();\n    }\n  }, [props.disabled, props.unit]);\n\n  useEffect(() => {\n    if (!props.config['network.topology']){\n      return\n    }\n\n    if (props.config.remote) {\n      var client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      var client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n    client.connect();\n    setClient(client)\n  },[props.config])\n\n\n  function setPioreactorJobState(job, state) {\n    return function sendMessage() {\n      var message = new Message(String(state));\n      message.destinationName = [\n        \"pioreactor\",\n        props.unit,\n        props.experiment,\n        job,\n        \"$state\",\n        \"set\",\n      ].join(\"/\");\n      message.qos = 1;\n      try{\n        client.publish(message);\n      }\n      catch (e){\n        console.log(e)\n        setTimeout(function(){sendMessage()}, 750)\n      }\n    };\n  }\n\n  function startPioreactorJob(job_attr){\n    return function() {\n      fetch(\"/run/\" + job_attr + \"/\" + props.unit).then(res => {\n      })\n    }\n  }\n\n  function setPioreactorJobAttr(job_attr, value) {\n    var message = new Message(String(value));\n    message.destinationName = [\n      \"pioreactor\",\n      props.unit,\n      props.experiment,\n      job_attr,\n      \"set\",\n    ].join(\"/\");\n    message.qos = 1;\n    try{\n      client.publish(message);\n    }\n    catch (e) {\n      console.log(e)\n      client.connect({onSuccess: () => setPioreactorJobAttr(job_attr, value)});\n    }\n  }\n\n  function setPioreactorJobAttrOnEnter(e) {\n    if (e.key === \"Enter\") {\n      setPioreactorJobAttr(e.target.id, e.target.value);\n      setSnackbarOpen(true)\n    }\n  }\n\n  function setPioreactorStirring(e, value) {\n    setPioreactorJobAttr(\"stirring/duty_cycle\", value);\n  }\n\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setTabValue(0)\n    setOpen(false);\n  };\n\n  const handleSnackbarClose = () => {\n    setSnackbarOpen(false)\n  }\n\n\n  function createUserButtonsBasedOnState(jobState, job, parentJob=null){\n\n    parentJob = parentJob || job\n    switch (jobState){\n      case \"lost\":\n      case \"disconnected\":\n       return (<div>\n               <PatientButton\n                color=\"primary\"\n                variant=\"contained\"\n                onClick={startPioreactorJob(job)}\n                buttonText=\"Start\"\n               />\n              </div>)\n      case \"init\":\n      case \"ready\":\n        return (<div>\n          <PatientButton\n            color=\"secondary\"\n            variant=\"contained\"\n            onClick={setPioreactorJobState(job, \"sleeping\")}\n            buttonText=\"Pause\"\n          />\n          <PatientButton\n            color=\"secondary\"\n            onClick={setPioreactorJobState(parentJob, \"disconnected\")}\n            buttonText=\"Stop\"\n          />\n        </div>)\n      case \"sleeping\":\n        return (\n          <div>\n            <PatientButton\n              color=\"primary\"\n              variant=\"contained\"\n              onClick={setPioreactorJobState(job, \"ready\")}\n              buttonText=\"Resume\"\n            />\n            <PatientButton\n              color=\"secondary\"\n              onClick={setPioreactorJobState(parentJob, \"disconnected\")}\n              buttonText=\"Stop\"\n            />\n          </div>\n          )\n      default:\n        return(<div></div>)\n    }\n   }\n\n  const odButtons = createUserButtonsBasedOnState(props.ODReadingJobState, \"od_reading\")\n  const grButtons = createUserButtonsBasedOnState(props.growthRateJobState, \"growth_rate_calculating\")\n  const ioButtons = createUserButtonsBasedOnState(props.IOEventsJobState, \"io_controlling\", \"algorithm_controlling\")\n  const stirringButtons = createUserButtonsBasedOnState(props.stirringJobState, \"stirring\")\n\n  return (\n    <div>\n    <IconButton aria-label=\"edit Pioreactor\" onClick={handleClickOpen} disabled={props.disabled} style={{marginTop: \"-8px\"}}>\n      <EditIcon color={props.disabled ? \"disabled\" : \"primary\"}/>\n    </IconButton>\n    <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n      <DialogTitle>\n        <Typography className={classes.suptitle}>\n          <PioreactorIcon style={{verticalAlign: \"middle\", fontSize: \"1.2em\"}}/> {(props.config['ui.overview.rename'] &&  props.config['ui.overview.rename'][props.unit]) ? `${props.config['ui.overview.rename'][props.unit]} / ${props.unit}` : `${props.unit}`}\n        </Typography>\n      <Tabs variant=\"fullWidth\" value={tabValue} onChange={handleTabChange} indicatorColor=\"primary\" textColor=\"primary\">\n        <Tab label=\"Activities\"/>\n        <Tab label=\"Settings\"/>\n        <Tab label=\"Dosing\"/>\n        <Tab label=\"Calibrate\"/>\n      </Tabs>\n      </DialogTitle>\n      <DialogContent>\n        <TabPanel value={tabValue} index={2}>\n          <Typography  gutterBottom>\n            Add media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the media pump{props.isPlural ? \"s\" : \"\"} for a set duration (seconds), or a set volume (mL).\n          </Typography>\n          <ActionPumpForm action=\"add_media\" unit={props.unit} />\n          <Divider className={classes.divider} />\n          <Typography gutterBottom>\n            Add alternative media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the alternative media pump{props.isPlural ? \"s\" : \"\"} for a set duration (seconds), or a set\n            volume (mL).\n          </Typography>\n          <ActionPumpForm action=\"add_alt_media\" unit={props.unit} />\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Remove waste\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the waste pump{props.isPlural ? \"s\" : \"\"} for a set duration (seconds), or a set volume (mL).\n          </Typography>\n          <ActionPumpForm action=\"remove_waste\" unit={props.unit} />\n          <Divider className={classes.divider} />\n        </TabPanel>\n        <TabPanel value={tabValue} index={3}>\n          <Typography  gutterBottom>\n            Pump calibration\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            If any pumps are attached to the Pioreactor, they should be calibrated to often\n            to accurately add a precise amount of media.\n          </Typography>\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Temperature calibration\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            If any pumps are attached to the Pioreactor, they should be calibrated to often\n            to accurately add a precise amount of media.\n          </Typography>\n          <Divider className={classes.divider} />\n        </TabPanel>\n        <TabPanel value={tabValue} index={1}>\n          <Typography  gutterBottom>\n            Stirring speed\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Modify the stirring speed (arbitrary units). This will effect the\n            optical density reading. Too low and the fan may completely stop.\n          </Typography>\n          <div className={classes.slider}>\n            <Slider\n              defaultValue={parseInt(props.stirringDCState)}\n              aria-labelledby=\"discrete-slider-custom\"\n              step={1}\n              valueLabelDisplay=\"on\"\n              id={\"stirring/duty_cycle_\" + props.unit}\n              key={\"stirring/duty_cycle_\" + props.unit}\n              onChangeCommitted={setPioreactorStirring}\n              marks={[\n                { value: 0, label: \"0\", key: \"slider-0\" },\n                { value: defaultStirring, label: \"Default: \" + defaultStirring, key: \"slider-default\"},\n                { value: 100, label: \"100\", key: \"slider-100\" },\n              ]}\n            />\n          </div>\n          <Divider className={classes.divider} />\n          <Typography gutterBottom>\n            Volume / dosing\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change the volume per dilution. Typical values are between 0.0mL and\n            1.0mL.\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"io_controlling/volume\"\n            label=\"Volume / dosing\"\n            defaultValue={props.volumeState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">mL</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textField}\n          />\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Target OD\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change the target optical density. Typical values are between 1.0 and\n            2.5 (arbitrary units)\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"io_controlling/target_od\"\n            label=\"Target optical density\"\n            defaultValue={props.targetODState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">AU</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textField}\n          />\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Duration between dosing events\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change how long to wait between dilutions. Typically between 5 and 90 minutes.\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"io_controlling/duration\"\n            label=\"Duration\"\n            defaultValue={props.durationState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">min</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textField}\n          />\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Target growth rate\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change the target hourly growth rate - only applicable in{\" \"}\n            <code>morbidostat</code> mode. Typical values are between 0.05h⁻¹ and\n            0.4h⁻¹.\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"io_controlling/target_growth_rate\"\n            label=\"Target growth rate\"\n            defaultValue={props.targetGrowthRateState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">h⁻¹</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textField}\n          />\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Dosing algorithm\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            {props.IOEventsJobState !== \"disconnected\" &&\n              <React.Fragment>\n              Currently running dosing algorithm <code>{props.dosingAlgorithm}</code>.\n              Learn more about <a target=\"_blank\" href=\"https://github.com/Pioreactor/pioreactor/wiki/dosing-algorithms\">dosing algorithms</a>.\n              </React.Fragment>\n            }\n            {props.IOEventsJobState === \"disconnected\" &&\n\n              <React.Fragment>\n              You can change the Dosing algorthm after starting the job.\n              </React.Fragment>\n            }\n          </Typography>\n\n          <ButtonChangeDosingDialog\n            unit={props.unit}\n            config={props.config}\n            experiment={props.experiment}\n            currentDosingAlgorithm={props.dosingAlgorithm}\n          />\n          <Divider className={classes.divider} />\n        </TabPanel>\n        <TabPanel value={tabValue} index={0}>\n          <Typography gutterBottom>\n            Stirring\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Start, stop or pause the stirring on the Pioreactor. Stirring is needed for homogenous mixing.\n          </Typography>\n\n          {stirringButtons}\n\n          <Divider className={classes.divider} />\n          <Typography gutterBottom>\n            Optical density\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Pausing the optical density readings will also pause\n            downstream activities that rely on optical density readings, like growth\n            rates.\n          </Typography>\n\n          {odButtons}\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Growth rate\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Pausing the growth rate calculating will also pause\n            downstream activities that rely on it, like dosing events.\n          </Typography>\n\n          {grButtons}\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Dosing events\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            {props.IOEventsJobState !== \"disconnected\" &&\n              <React.Fragment>\n              Currently running dosing algorithm <code>{props.dosingAlgorithm}</code>.\n              Learn more about <a target=\"_blank\" href=\"https://github.com/Pioreactor/pioreactor/wiki/dosing-algorithms\">dosing algorithms</a>.\n              </React.Fragment>\n            }\n            {props.IOEventsJobState === \"disconnected\" &&\n\n              <React.Fragment>\n              Dosing events will initially start in <span className={\"underlineSpan\"} title=\"silent mode performs no dosing operations.\"><code>silent</code></span> mode, and can be changed after.\n              Learn more about <a target=\"_blank\" href=\"https://github.com/Pioreactor/pioreactor/wiki/dosing-algorithms\">dosing algorithms</a>.\n              </React.Fragment>\n            }\n          </Typography>\n\n            {ioButtons}\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Temperature controlling\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Us at Pioreactor are working on including per-reactor temperature control. Stay tuned!\n          </Typography>\n\n          <Divider className={classes.divider} />\n        </TabPanel>\n      </DialogContent>\n    </Dialog>\n    <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={snackbarOpen}\n      onClose={handleSnackbarClose}\n      message={\"Updated\"}\n      autoHideDuration={7000}\n      key={\"snackbar\" + props.unit + \"settings\"}\n    />\n    </div>\n  );\n}\n\n\nfunction SettingsActionsDialogAll(props) {\n\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [client, setClient] = useState(null);\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\n  const [tabValue, setTabValue] = React.useState(0);\n\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  useEffect(() => {\n    if (!props.config['network.topology']){\n      return\n    }\n\n    if (props.config.remote) {\n      var client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      var client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n    client.connect();\n    setClient(client)\n  },[props.config])\n\n\n  function setPioreactorJobState(job, state) {\n    return function sendMessage() {\n      var message = new Message(String(state));\n      message.destinationName = [\n        \"pioreactor\",\n        props.unit,\n        props.experiment,\n        job,\n        \"$state\",\n        \"set\",\n      ].join(\"/\");\n      message.qos = 1;\n      try{\n        client.publish(message);\n      }\n      catch (e){\n        console.log(e)\n        setTimeout(function(){sendMessage()}, 750)\n      }\n    };\n  }\n\n  function startPioreactorJob(job_attr){\n    return function() {\n      fetch(\"/run/\" + job_attr + \"/\" + props.unit).then(res => {\n      })\n    }\n  }\n\n  function setPioreactorJobAttr(job_attr, value) {\n    var message = new Message(String(value));\n    message.destinationName = [\n      \"pioreactor\",\n      props.unit,\n      props.experiment,\n      job_attr,\n      \"set\",\n    ].join(\"/\");\n    message.qos = 1;\n    try{\n      client.publish(message);\n    }\n    catch (e) {\n      console.log(e)\n      client.connect({onSuccess: () => setPioreactorJobAttr(job_attr, value)});\n    }\n  }\n\n  function setPioreactorJobAttrOnEnter(e) {\n    if (e.key === \"Enter\") {\n      setPioreactorJobAttr(e.target.id, e.target.value);\n      setSnackbarOpen(true)\n    }\n  }\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setTabValue(0)\n    setOpen(false);\n  };\n\n  const handleSnackbarClose = () => {\n    setSnackbarOpen(false)\n  }\n\n\n  function createUserButtonsBasedOnState(job, parentJob=null){\n    parentJob = parentJob || job\n    return (<div>\n        <Button\n          className={classes.jobButton}\n          disableElevation\n          color=\"primary\"\n          onClick={startPioreactorJob(job)}\n        >\n          Start\n        </Button>\n        <Button\n          className={classes.jobButton}\n          disableElevation\n          color=\"primary\"\n          onClick={setPioreactorJobState(job, \"sleeping\")}\n        >\n          Pause\n        </Button>\n        <Button\n          className={classes.jobButton}\n          disableElevation\n          color=\"primary\"\n          onClick={setPioreactorJobState(job, \"ready\")}\n        >\n          Resume\n        </Button>\n        <Button\n          className={classes.jobButton}\n          disableElevation\n          color=\"secondary\"\n          onClick={setPioreactorJobState(parentJob, \"disconnected\")}\n        >\n          Stop\n        </Button>\n      </div>\n  )}\n\n  const odButtons = createUserButtonsBasedOnState(\"od_reading\")\n  const grButtons = createUserButtonsBasedOnState(\"growth_rate_calculating\")\n  const ioButtons = createUserButtonsBasedOnState(\"io_controlling\", \"algorithm_controlling\")\n  const stirringButtons = createUserButtonsBasedOnState(\"stirring\")\n\n  return (\n    <React.Fragment>\n    <Button style={{textTransform: 'none', float: \"right\" }} onClick={handleClickOpen} color=\"primary\">\n      <EditIcon className={classes.textIcon}/> Edit all Pioreactors\n    </Button>\n    <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n      <DialogTitle>\n        <Typography className={classes.suptitle}>\n          All active Pioreactors\n        </Typography>\n      <Tabs value={tabValue} onChange={handleTabChange} indicatorColor=\"primary\" textColor=\"primary\">\n        <Tab label=\"Activities\"/>\n        <Tab label=\"Settings\"/>\n        <Tab label=\"Dosing\"/>\n      </Tabs>\n      </DialogTitle>\n      <DialogContent>\n        <TabPanel value={tabValue} index={1}>\n          <Typography gutterBottom>\n            Volume / dosing\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change the volume per dilution. Typical values are between 0.0mL and\n            1.0mL.\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"io_controlling/volume\"\n            label=\"Volume / dosing\"\n            defaultValue={props.volumeState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">mL</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textFieldWide}\n          />\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Target OD\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change the target optical density. Typical values are between 1.0 and\n            2.5 (arbitrary units)\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"io_controlling/target_od\"\n            label=\"Target optical density\"\n            defaultValue={props.targetODState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">AU</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textFieldWide}\n          />\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Duration between dosing events\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change how long to wait between dilutions. Typically between 5 and 90 minutes.\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"io_controlling/duration\"\n            label=\"Duration\"\n            defaultValue={props.durationState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">min</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textFieldWide}\n          />\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Target growth rate\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Change the target hourly growth rate - only applicable in{\" \"}\n            <code>morbidostat</code> mode. Typical values are between 0.05h⁻¹ and\n            0.4h⁻¹.\n          </Typography>\n          <TextField\n            size=\"small\"\n            id=\"io_controlling/target_growth_rate\"\n            label=\"Target growth rate\"\n            defaultValue={props.targetGrowthRateState}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">h⁻¹</InputAdornment>,\n            }}\n            variant=\"outlined\"\n            onKeyPress={setPioreactorJobAttrOnEnter}\n            className={classes.textFieldWide}\n          />\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Dosing algorithm\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n              Learn more about <a target=\"_blank\" href=\"https://github.com/Pioreactor/pioreactor/wiki/dosing-algorithms\">dosing algorithms</a>.\n          </Typography>\n\n          <ButtonChangeDosingDialog\n            unit={props.unit}\n            config={props.config}\n            experiment={props.experiment}\n            currentDosingAlgorithm={true}\n            title=\"All active Pioreactors\"\n          />\n          <Divider className={classes.divider} />\n\n        </TabPanel>\n\n        <TabPanel value={tabValue} index={0}>\n          <Typography gutterBottom>\n            Stirring\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Start, stop or pause the stirring on all the Pioreactors. Stirring is needed for homogenous mixing.\n          </Typography>\n\n          {stirringButtons}\n\n          <Divider className={classes.divider} />\n          <Typography gutterBottom>\n            Optical density\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Pausing the optical density readings will also pause\n            downstream activities that rely on optical density readings, like growth\n            rates.\n          </Typography>\n\n          {odButtons}\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Growth rate\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Pausing the growth rate calculating will also pause\n            downstream activities that rely on it, like dosing events.\n          </Typography>\n\n          {grButtons}\n\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Dosing events\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Dosing events will initially start in <span className={\"underlineSpan\"} title=\"silent mode performs no IO operations.\"><code>silent</code></span> mode, and can be changed after.\n            Learn more about <a target=\"_blank\" href=\"https://github.com/Pioreactor/pioreactor/wiki/dosing-algorithms\">dosing algorithms</a>.\n          </Typography>\n\n            {ioButtons}\n          <Divider className={classes.divider} />\n        </TabPanel>\n        <TabPanel value={tabValue} index={2}>\n          <Typography  gutterBottom>\n            Add media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the media pump{props.isPlural ? \"s\" : \"\"} for a set duration (seconds), or a set volume (mL).\n          </Typography>\n          <ActionPumpForm action=\"add_media\" unit={props.unit} />\n          <Divider className={classes.divider} />\n          <Typography gutterBottom>\n            Add alternative media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the alternative media pump{props.isPlural ? \"s\" : \"\"} for a set duration (seconds), or a set\n            volume (mL).\n          </Typography>\n          <ActionPumpForm action=\"add_alt_media\" unit={props.unit} />\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Remove waste\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the waste pump{props.isPlural ? \"s\" : \"\"} for a set duration (seconds), or a set volume (mL).\n          </Typography>\n          <ActionPumpForm action=\"remove_waste\" unit={props.unit} />\n          <Divider className={classes.divider} />\n        </TabPanel>\n      </DialogContent>\n    </Dialog>\n    <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={snackbarOpen}\n      onClose={handleSnackbarClose}\n      message={\"Updated\"}\n      autoHideDuration={7000}\n      key={\"snackbar\" + props.unit + \"settings\"}\n    />\n    </React.Fragment>\n  );\n}\n\n\nfunction ActiveUnits(props){\n  return (\n  <React.Fragment>\n    <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: \"5px\", marginTop: \"15px\"}}>\n      <Typography variant=\"h5\" component=\"h2\">\n        <Box fontWeight=\"fontWeightRegular\">\n          Active Pioreactors\n        </Box>\n      </Typography>\n      <div >\n        <SettingsActionsDialogAll unit={'$broadcast'} config={props.config} experiment={props.experiment}/>\n        <ButtonConfirmStopProcessDialog/>\n      </div>\n    </div>\n    {props.units.map(unit =>\n      <PioreactorCard isUnitActive={true} key={unit} unit={unit} config={props.config} experiment={props.experiment}/>\n  )}\n  </React.Fragment>\n)}\n\nfunction PioreactorCard(props){\n  const classes = useStyles();\n  const unit = props.unit\n  const isUnitActive = props.isUnitActive\n  const experiment = props.experiment\n  const [stirringDCState, setStirringDCState] = useState(0);\n  const [stirringJobState, setStirringJobState] = useState(\"disconnected\");\n  const [ODReadingJobState, setODReadingJobState] = useState(\"disconnected\");\n  const [growthRateJobState, setGrowthRateJobState] = useState(\"disconnected\");\n  const [IOEventsJobState, setIOEventsJobState] = useState(\"disconnected\");\n  const [temperatureControllingJobState, setTemperatureControllingJobState] = useState(\"disconnected\");\n  const [targetODState, setTargetODState] = useState(0);\n  const [durationState, setDurationState] = useState(0);\n  const [targetGrowthRateState, setTargetGrowthRateState] = useState(0);\n  const [volumeState, setVolumeState] = useState(0);\n  const [dosingAlgorithm, setDosingAlgorithm] = useState(null);\n  const [temperature, setTemperature] = useState(0);\n\n  return (\n    <Card className={classes.pioreactorCard} id={unit}>\n\n      <CardContent className={classes.cardContent}>\n        <div className={\"fixme\"}>\n          <Typography className={clsx(classes.suptitle)} color=\"textSecondary\">\n            {(props.config['ui.overview.rename'] && props.config['ui.overview.rename'][unit]) ? unit : \"\"}\n          </Typography>\n          <div style={{display: \"flex\", justifyContent: \"space-between\"}}>\n            <Typography className={clsx(classes.unitTitle, {[classes.disabledText]: !isUnitActive})} gutterBottom>\n              <PioreactorIcon color={isUnitActive ? \"black\" : \"disabled\"} style={{verticalAlign: \"middle\"}}/> {(props.config['ui.overview.rename'] && props.config['ui.overview.rename'][unit]) ? props.config['ui.overview.rename'][unit] : unit }\n            </Typography>\n            <div>\n              <SettingsActionsDialog\n                config={props.config}\n                stirringDCState={stirringDCState}\n                ODReadingJobState={ODReadingJobState}\n                growthRateJobState={growthRateJobState}\n                stirringJobState={stirringJobState}\n                IOEventsJobState={IOEventsJobState}\n                temperatureControllingJobState={temperatureControllingJobState}\n                targetGrowthRateState={targetGrowthRateState}\n                volumeState={volumeState}\n                durationState={durationState}\n                targetODState={targetODState}\n                dosingAlgorithm={dosingAlgorithm}\n                temperature={temperature}\n                experiment={experiment}\n                unit={unit}\n                disabled={!isUnitActive}\n              />\n            </div>\n          </div>\n        </div>\n\n\n      <div style={{display: \"flex\", margin: \"15px 20px 20px 0px\"}}>\n        <div className={classes.textboxLabel}>\n          <Typography variant=\"body2\" component=\"body1\">\n            <Box fontWeight=\"fontWeightBold\" className={clsx({[classes.disabledText]: !isUnitActive})}>\n              Activities:\n            </Box>\n          </Typography>\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Stirring\n          </Typography>\n          <UnitSettingDisplay\n            passChildData={setStirringJobState}\n            experiment={experiment}\n            isUnitActive={isUnitActive}\n            default=\"disconnected\"\n            isStateSetting\n            topic=\"stirring/$state\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Optical density\n          </Typography>\n          <UnitSettingDisplay\n            passChildData={setODReadingJobState}\n            experiment={experiment}\n            isUnitActive={isUnitActive}\n            default=\"disconnected\"\n            isStateSetting\n            topic=\"od_reading/$state\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Growth rate\n          </Typography>\n          <UnitSettingDisplay\n            passChildData={setGrowthRateJobState}\n            experiment={experiment}\n            isUnitActive={isUnitActive}\n            default=\"disconnected\"\n            isStateSetting\n            topic=\"growth_rate_calculating/$state\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Dosing events\n          </Typography>\n          <UnitSettingDisplay\n            passChildData={setIOEventsJobState}\n            experiment={experiment}\n            isUnitActive={isUnitActive}\n            default=\"disconnected\"\n            isStateSetting\n            topic=\"io_controlling/$state\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Temperature control\n          </Typography>\n          <UnitSettingDisplay\n            passChildData={setTemperatureControllingJobState}\n            experiment={experiment}\n            isUnitActive={isUnitActive}\n            default=\"NA\"\n            isStateSetting\n            topic=\"temperature_controlling/$state\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n      </div>\n      <Divider/>\n\n\n      <div style={{display: \"flex\", margin: \"20px 20px 20px 0px\"}}>\n        <div className={classes.textboxLabel}>\n          <Typography variant=\"body2\" component=\"body1\">\n            <Box fontWeight=\"fontWeightBold\"  className={clsx({[classes.disabledText]: !isUnitActive})}>\n              Settings:\n            </Box>\n          </Typography>\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Stirring speed\n          </Typography>\n          <UnitSettingDisplay\n            passChildData={setStirringDCState}\n            experiment={experiment}\n            isUnitActive={isUnitActive}\n            default=\"—\"\n            className={classes.alignRight}\n            topic=\"stirring/duty_cycle\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Volume / dosing\n          </Typography>\n          <UnitSettingDisplay\n            precision={2}\n            measurementUnit=\"mL\"\n            experiment={experiment}\n            passChildData={setVolumeState}\n            isUnitActive={isUnitActive}\n            default=\"—\"\n            className={classes.alignRight}\n            topic=\"io_controlling/volume\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Target OD\n          </Typography>\n          <UnitSettingDisplay\n            precision={2}\n            experiment={experiment}\n            passChildData={setTargetODState}\n            isUnitActive={isUnitActive}\n            default={\"—\"}\n            className={classes.alignRight}\n            topic=\"io_controlling/target_od\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Target growth rate\n          </Typography>\n          <UnitSettingDisplay\n            precision={2}\n            measurementUnit=\"h⁻¹\"\n            experiment={experiment}\n            passChildData={setTargetGrowthRateState}\n            isUnitActive={isUnitActive}\n            default=\"—\"\n            className={classes.alignRight}\n            topic=\"io_controlling/target_growth_rate\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Dosing algorithm\n          </Typography>\n          <UnitSettingDisplay\n            experiment={experiment}\n            passChildData={setDosingAlgorithm}\n            isUnitActive={isUnitActive}\n            default=\"—\"\n            className={classes.alignRight}\n            topic=\"algorithm_controlling/io_algorithm\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Time between dosing events\n          </Typography>\n          <UnitSettingDisplay\n            precision={0}\n            measurementUnit=\"m\"\n            experiment={experiment}\n            passChildData={setDurationState}\n            isUnitActive={isUnitActive}\n            default=\"—\"\n            className={classes.alignRight}\n            topic=\"io_controlling/duration\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n        <div className={classes.textbox}>\n          <Typography variant=\"body2\" style={{fontSize: \"0.85rem\"}}>\n            Target temperature\n          </Typography>\n          <UnitSettingDisplay\n            experiment={experiment}\n            passChildData={setTemperature}\n            isUnitActive={isUnitActive}\n            default=\"—\"\n            className={classes.alignRight}\n            topic=\"temperature_controlling/temperature\"\n            unit={unit}\n            config={props.config}\n          />\n        </div>\n      </div>\n\n\n      </CardContent>\n    </Card>\n)}\n\n\nfunction InactiveUnits(props){\n\n  return (\n  <React.Fragment>\n    <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: \"5px\", marginTop: \"15px\"}}>\n      <Typography variant=\"h5\" component=\"h2\">\n        <Box fontWeight=\"fontWeightRegular\">\n          Inactive Pioreactors\n        </Box>\n      </Typography>\n    </div>\n    {props.units.map(unit =>\n      <PioreactorCard isUnitActive={false} key={unit} unit={unit} config={props.config} experiment={props.experiment}/>\n  )}\n    </React.Fragment>\n)}\n\nfunction Pioreactors(props) {\n    const [experimentMetadata, setExperimentMetadata] = React.useState({})\n\n    React.useEffect(() => {\n      async function getLatestExperiment() {\n           await fetch(\"/get_latest_experiment\")\n          .then((response) => {\n            return response.json();\n          })\n          .then((data) => {\n            setExperimentMetadata(data)\n          });\n        }\n      getLatestExperiment()\n    }, [])\n\n    const entries = (a) => Object.entries(a)\n\n    return (\n        <Grid container spacing={2} >\n          <Grid item xs={12}><Header /></Grid>\n          <Grid item xs={12} />\n          <Grid item xs={12} />\n\n          <Grid item md={1} xs={1}/>\n          <Grid item md={10} xs={12}>\n            <PioreactorHeader experiment={experimentMetadata.experiment}/>\n            <ActiveUnits experiment={experimentMetadata.experiment} config={props.config} units={props.config['inventory'] ? entries(props.config['inventory']).filter((v) => v[1] === \"1\").map((v) => v[0]) : [] }/>\n            <InactiveUnits experiment={experimentMetadata.experiment} config={props.config} units={props.config['inventory'] ? entries(props.config['inventory']).filter((v) => v[1] === \"0\").map((v) => v[0]) : [] }/>\n          </Grid>\n          <Grid item md={1} xs={1}/>\n          {props.config['ui.overview.rename'] ? <TactileButtonNotification config={props.config}/> : null}\n        </Grid>\n    )\n}\n\nexport default Pioreactors;\n\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport StepContent from '@material-ui/core/StepContent';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n  },\n  button: {\n    marginTop: theme.spacing(1),\n    marginRight: theme.spacing(1),\n  },\n  actionsContainer: {\n    marginBottom: theme.spacing(2),\n  },\n  resetContainer: {\n    padding: theme.spacing(3),\n  },\n  divInstructions: {\n    marginBottom: theme.spacing(3),\n  }\n}));\n\n\n\nfunction CycleLiquid(props) {\n  const classes = useStyles();\n  const liquid = props.liquid\n  const [isClicked, setIsClicked] = React.useState(false)\n\n  const onSubmit = () => {\n    fetch(\"/run/remove_waste/$broadcast?\" + new URLSearchParams({duration: 90, duty_cycle: 100}));\n    fetch(\"/run/add_media/$broadcast?\" + new URLSearchParams({duration: 50, duty_cycle: 25}));\n    fetch(\"/run/add_alt_media/$broadcast?\" + new URLSearchParams({duration: 50, duty_cycle: 25}));\n    setIsClicked(true)\n  }\n\n  return (\n    <div className={classes.divInstructions}>\n      <p>{props.additionalMsg}</p>\n      <p>Add <b>{liquid}</b> to the non-waste containers. We will cycle this solution through our system. Click the button below once the {liquid} is in place.</p>\n      <Button className={classes.button} variant=\"contained\" color={isClicked ? \"default\" : \"primary\" } onClick={onSubmit}>Cycle {liquid}</Button>\n    </div>\n    )\n}\n\n\nfunction MediaFlush(props) {\n  const classes = useStyles();\n  const isAlt = props.altMedia\n  const [isClicked, setIsClicked] = React.useState(false)\n\n  const onSubmit = () => {\n    fetch(\"/run/remove_waste/$broadcast?\" + new URLSearchParams({duration: 60, duty_cycle: 100}));\n    if (isAlt){\n      fetch(\"/run/add_alt_media/$broadcast?\" + new URLSearchParams({duration: 15, duty_cycle: 25}));\n    } else {\n      fetch(\"/run/add_media/$broadcast?\" + new URLSearchParams({duration: 15, duty_cycle: 25}));\n    }\n    setIsClicked(true)\n  }\n\n  return (\n    <div className={classes.divInstructions}>\n      <p>Next, we will prime the {isAlt ? \"alt-\" : \"\"}media tubes with our {isAlt ? \"alt-\" : \"\"}media.</p>\n      <p>Replace the container attached to the {isAlt ? \"alt-\" : \"\"}media outflow tubes with the sterlized {isAlt ? \"alt-\" : \"\"}media container. Remember to use proper sanitation techniques!</p>\n      <Button className={classes.button} variant=\"contained\" color={isClicked ? \"default\" : \"primary\" } onClick={onSubmit}>Run {isAlt ? \"alt-\" : \"\"}media and waste pumps</Button>\n    </div>\n    )\n}\n\nfunction AddFinalVolumeOfMedia(props) {\n  const classes = useStyles();\n  const [isClicked, setIsClicked] = React.useState(false)\n\n\n  const onSubmit = () => {\n    fetch(\"/run/add_media/$broadcast?\" + new URLSearchParams({ml: 12}));\n    setIsClicked(true)\n  }\n\n  return (\n    <div className={classes.divInstructions}>\n      <p> Finally, we will add fresh media to our vials </p>\n      <Button className={classes.button} variant=\"contained\" color={isClicked ? \"default\" : \"primary\" } onClick={onSubmit}>Add 12mL of media</Button>\n    </div>\n    )\n}\n\n\nfunction getSteps() {\n  return [\n    'Setup inflow and outflow tubes',\n    '10% bleach cycling',\n    '70% alcohol cycling',\n    'Distilled water cycling',\n    'Media preparation',\n    'Alt media preparation',\n    'Replace vials',\n    'Add initial media to vials'];\n}\n\n\nfunction getStepContent(step) {\n  switch (step) {\n    case 0:\n      return `For each pioreactor unit, connect the media inflow, alt-media inflow, and waste out flow tubes to an empty\n      vial with hat. Connect the all the media outflow tubes to a single empty container, all the alt-media outflow tubes to a single empty container, and\n      all the waste inflow tubes to a single, empty, large container.`;\n    case 1:\n      return <CycleLiquid liquid={\"10% bleach solution\"}/>;\n    case 2:\n      return <CycleLiquid additionalMsg={\"Remove any excess bleach from the containers, and empty the waste container. Bleach and alcohol should not mix.\"} liquid={\"70% alcohol\"}/>;\n    case 3:\n      return <CycleLiquid liquid={\"distilled water\"}/>;\n    case 4:\n      return <MediaFlush />;\n    case 5:\n      return <MediaFlush altMedia={true}/>;\n    case 6:\n      return `Using proper sanitation techniques, replace the pioreactor vials - now full of water and media - with the empty-but-innocculated vials`;\n    case 7:\n      return <AddFinalVolumeOfMedia/>;\n    default:\n      return 'Unknown step';\n  }\n}\n\nexport default function VerticalLinearStepper() {\n  const classes = useStyles();\n  const [activeStep, setActiveStep] = React.useState(0);\n  const steps = getSteps();\n\n  const handleNext = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n\n  const handleReset = () => {\n    setActiveStep(0);\n  };\n\n  return (\n    <div className={classes.root}>\n      <Stepper activeStep={activeStep} orientation=\"vertical\">\n        {steps.map((label, index) => (\n          <Step key={label}>\n            <StepLabel>{label}</StepLabel>\n            <StepContent>\n              <Typography>{getStepContent(index)}</Typography>\n              <div className={classes.actionsContainer}>\n                  <Button\n                    disabled={activeStep === 0}\n                    onClick={handleBack}\n                    className={classes.button}\n                  >\n                    Back\n                  </Button>\n                  <Button\n                    variant=\"contained\"\n                    onClick={handleNext}\n                    className={classes.button}\n                  >\n                    {activeStep === steps.length - 1 ? 'Finish' : 'Next'}\n                  </Button>\n              </div>\n            </StepContent>\n          </Step>\n        ))}\n      </Stepper>\n      {activeStep === steps.length && (\n        <Paper square elevation={0} className={classes.resetContainer}>\n          <Typography>All cleaning and preparation steps completed!</Typography>\n          <Button onClick={handleReset} className={classes.button}>\n            Reset\n          </Button>\n        </Paper>\n      )}\n    </div>\n  );\n}","import React from \"react\";\nimport Grid from '@material-ui/core/Grid';\nimport Button from \"@material-ui/core/Button\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport Chart from \"./Chart\";\n\n\n\nfunction StartStirringButton(props){\n\n  const [isClicked, setIsClicked] = React.useState(false)\n  const [openSnackbar, setOpenSnackbar] = React.useState(false);\n\n  const onClick = (e) => {\n    setIsClicked(true)\n    fetch(\"/run/stirring/$broadcast\").then(res => {\n      if (res.status === 200){\n        setOpenSnackbar(true);\n      }\n    })\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n  return(\n    <div>\n      <p> To get an accurate reading, we need to start start the stirring. This also provides gas transfer and keeps the cells in suspension.</p>\n      <Button variant=\"contained\"  color=\"primary\" disabled={isClicked ? true : false } onClick={onClick}> Start stirring </Button>\n      <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={openSnackbar}\n      onClose={handleSnackbarClose}\n      message={\"Stirring starting\"}\n      autoHideDuration={7000}\n      key={\"snackbarStirring\"}\n    />\n  </div>\n  )\n}\n\n\nfunction StartODReading(props){\n\n  const [isClicked, setIsClicked] = React.useState(false)\n  const [openSnackbar, setOpenSnackbar] = React.useState(false);\n\n  const onClick = (e) => {\n    setIsClicked(true)\n    fetch(\"/run/od_reading/$broadcast\").then(res => {\n      if (res.status === 200){\n        setOpenSnackbar(true);\n      }\n    })\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n  return(\n    <div>\n      <p> Next, we will turn on the optical density reading. We also call this <em>OD readings</em>. This will provide us with a measure of cell density. After a minute or so, you should see the data in the chart below. </p>\n      <Button variant=\"contained\"  color=\"primary\" disabled={isClicked ? true : false } onClick={onClick}> Start OD readings </Button>\n      <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={openSnackbar}\n      onClose={handleSnackbarClose}\n      message={\"OD reading starting\"}\n      autoHideDuration={7000}\n      key={\"snackbarOD\"}\n    />\n  </div>\n  )\n}\n\n\nfunction StartSensors(props){\n\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      justify=\"flex-start\"\n      alignItems=\"center\"\n      spacing={2}\n    >\n      <Grid item xs={2}/>\n      <Grid item xs={10}><StartStirringButton/></Grid>\n      <Grid item xs={10}><StartODReading/></Grid>\n      <Grid item xs={12}>\n        <Chart\n          config={props.config}\n          isODReading={true}\n          fontScale={1.0}\n          interpolation=\"stepAfter\"\n          title=\"Raw 135° optical density\"\n          topic=\"od_raw/135/+\"\n          yAxisLabel=\"Voltage\"\n          experiment=\"+\"\n        />\n      </Grid>\n      <Grid item xs={2}/>\n    </Grid>\n)}\n\n\nexport default StartSensors;\n","\nimport React from \"react\";\nimport Grid from '@material-ui/core/Grid';\nimport Button from \"@material-ui/core/Button\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport Chart from \"./Chart\";\n\n\n\nfunction StartGrowthRate(props){\n\n  const [openSnackbar, setOpenSnackbar] = React.useState(false);\n  const [snackbarMessage, setSnackbarMessage] = React.useState(\"\");\n  const [isClicked, setIsClicked] = React.useState(false);\n\n  const onClick = (e) => {\n    fetch(\"/run/growth_rate_calculating/$broadcast\").then(r => {\n      setSnackbarMessage(\"Growth rate calculating starting\")\n      setOpenSnackbar(true)\n      setIsClicked(true)\n    })\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n  return(\n    <div>\n      <p>Because of the varying strength & quality of the electronics, not all readings look the same - even for the same density of cells. So we compute a baseline measurement from the OD readings, and measure all growth against that baseline. </p>\n      <p>From the (normalized) OD readings, we can calculate the <em>implied hourly growth rate</em>, which is our measure of growth. </p>\n      <p>Let's start the growth rate calculations. This first computes the normalization constants, <b>which can take up to two minutes to complete</b>. After that, the graph below should start to populate.</p>\n      <Button variant=\"contained\"  color=\"primary\" disabled={isClicked ? true : false } onClick={onClick}> Start growth rate calculations </Button>\n      <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={openSnackbar}\n      onClose={handleSnackbarClose}\n      message={snackbarMessage}\n      autoHideDuration={7000}\n      key={\"snackbarGR\"}\n      />\n  </div>\n  )\n}\n\n\n\n\nfunction StartCalculations(props){\n  const [experiment, setExperiment] = React.useState(\"null_exp\")\n\n  React.useEffect(() => {\n    async function getData() {\n         await fetch(\"/get_latest_experiment\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          setExperiment(data.experiment)\n        });\n      }\n      getData()\n  }, [])\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      justify=\"flex-start\"\n      alignItems=\"center\"\n      spacing={2}\n    >\n      <Grid item xs={2}/>\n      <Grid item xs={10}><StartGrowthRate experiment={experiment}/></Grid>\n      <Grid item xs={12}>\n      <Chart\n        config={props.config}\n        interpolation=\"stepAfter\"\n        fontScale={1}\n        title=\"Implied growth rate\"\n        topic=\"growth_rate\"\n        yAxisLabel=\"Growth rate, h⁻¹\"\n        experiment={experiment}\n      />\n      </Grid>\n      <Grid item xs={2}/>\n    </Grid>\n)}\n\n\nexport default StartCalculations;\n","import React from \"react\";\nimport moment from \"moment\";\nimport { Client, Message } from \"paho-mqtt\";\n\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/Card';\nimport {Typography} from '@material-ui/core';\nimport Button from \"@material-ui/core/Button\";\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport TextField from '@material-ui/core/TextField';\nimport Snackbar from '@material-ui/core/Snackbar';\n\nimport Header from \"./components/Header\"\nimport CleaningScript from \"./components/CleaningScript\"\nimport StartSensors from \"./components/StartSensors\"\nimport StartCalculations from \"./components/StartCalculations\"\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\"\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  button: {\n    marginRight: theme.spacing(1),\n  },\n  instructions: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(4),\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n    width: \"60%\"\n  },\n  textField:{\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1)\n  },\n  formControl: {\n    margin: theme.spacing(3),\n  },\n  halfTextField: {\n    width: \"95%\"\n  },\n}));\n\n\n\n\nfunction ExperimentSummaryForm(props) {\n  const classes = useStyles();\n  const [openSnackbar, setOpenSnackbar] = React.useState(false);\n  const [formError, setFormError] = React.useState(false);\n  const [expName, setExpName] = React.useState(\"\");\n  const [timestamp, setTimestamp] = React.useState(moment().format(\"YYYY-MM-DDTHH:mm:ss\"));\n  const [description, setDescription] = React.useState(\"\");\n\n\n  function publishExpNameToMQTT(){\n\n    function onConnect() {\n      var message = new Message(expName);\n      message.destinationName = \"pioreactor/latest_experiment\"\n      message.qos = 1;\n      message.retained = true;\n      client.publish(message);\n    }\n\n    if (props.config.remote) {\n      var client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      var client = new Client(\n        `${props.config['network.topology']['leader_hostname']}.local`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n    client.connect({ onSuccess: onConnect });\n\n  }\n\n  function killExistingJobs(){\n     fetch('/stop')\n  }\n\n  function onSubmit(e) {\n    e.preventDefault();\n    if (expName === \"\"){\n      setFormError(true)\n      return\n    }\n    fetch('create_experiment',{\n        method: \"POST\",\n        body: JSON.stringify({experiment : expName, timestamp: timestamp, description: description}),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }).then(res => {\n        if (res.status === 200){\n          setFormError(false);\n          setOpenSnackbar(true);\n          killExistingJobs()\n          publishExpNameToMQTT()\n        }\n        else{\n          setFormError(true);\n        }\n      }\n     )\n  }\n\n  const onExpNameChange = (e) => {\n    setExpName(e.target.value)\n  }\n  const onDescChange = (e) => {\n    setDescription(e.target.value)\n  }\n  const onTimestampChange = (e) => {\n    setTimestamp(e.target.value)\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n  return (\n    <div className={classes.root}>\n        <FormGroup>\n        <Grid container spacing={1}>\n          <Grid item xs={12} md={6}>\n            <TextField\n              error={formError}\n              id=\"expName\"\n              label=\"Experiment name\"\n              required className={`${classes.halfTextField} ${classes.textField}`}\n              onChange={onExpNameChange}\n              />\n          </Grid>\n          <Grid item xs={12} md={6}>\n            <TextField\n              id=\"datetime\"\n              label=\"Start time\"\n              type=\"datetime-local\"\n              defaultValue={timestamp}\n              className={`${classes.halfTextField} ${classes.textField}`}\n              onChange={onTimestampChange}\n              InputLabelProps={{\n                shrink: true,\n              }}\n            />\n          </Grid>\n          <Grid item xs={12} md={12}>\n            <TextField\n              label=\"Description\"\n              rowsMax={4}\n              placeholder={\"Add a description: what microbe are you using? What is the media composition? This description can always be changed later.\"}\n              multiline\n              className={classes.textField}\n              onChange={onDescChange}\n              fullWidth={true}\n            />\n          </Grid>\n          <Grid item xs={12} md={10}/>\n          <Grid item xs={12} md={2}>\n            <Button variant=\"contained\" color=\"primary\" onClick={onSubmit}> Create </Button>\n            <Snackbar\n              anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n              open={openSnackbar}\n              onClose={handleSnackbarClose}\n              message={\"Created new experiment\"}\n              autoHideDuration={7000}\n              key={\"snackbar\" + props.unitNumber + props.action}\n            />\n          </Grid>\n        </Grid>\n        </FormGroup>\n    </div>\n  )\n}\n\n\n\nfunction getSteps(config) {\n  return [\n    {title: 'Experiment summary', content: <ExperimentSummaryForm config={config} />, optional: true},\n    {title: 'Cleaning and preparation', content: <CleaningScript config={config}/>, optional: true},\n    {title: 'Start sensors', content: <StartSensors config={config}/>, optional: true},\n    {title: 'Start calculations', content: <StartCalculations config={config}/>, optional: false},\n  ];\n}\n\n\n\nfunction StartNewExperimentContainer(props) {\n  const classes = useStyles();\n  const [activeStep, setActiveStep] = React.useState(0);\n  const [skipped, setSkipped] = React.useState(new Set());\n  const steps = getSteps(props.config);\n\n  const getStepContent = (index) => {\n    return steps[index].content\n  }\n  const isStepOptional = (index) => {\n    return steps[index].optional\n  };\n\n  const isStepSkipped = (step) => {\n    return skipped.has(step);\n  };\n\n  const handleNext = () => {\n    if (activeStep === steps.length - 1){\n      window.location.href = \"/overview\";\n    } else {\n\n      let newSkipped = skipped;\n      if (isStepSkipped(activeStep)) {\n        newSkipped = new Set(newSkipped.values());\n        newSkipped.delete(activeStep);\n      }\n\n      setActiveStep((prevActiveStep) => prevActiveStep + 1);\n      setSkipped(newSkipped);\n      window.scrollTo({top: 0})\n    }\n  };\n\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n\n  const handleSkip = () => {\n    if (!isStepOptional(activeStep)) {\n      throw new Error(\"You can't skip a step that isn't optional.\");\n    }\n\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\n    setSkipped((prevSkipped) => {\n      const newSkipped = new Set(prevSkipped.values());\n      newSkipped.add(activeStep);\n      return newSkipped;\n    });\n  };\n\n  const handleReset = () => {\n    setActiveStep(0);\n  };\n\n  return (\n    <Card className={classes.root}>\n      <CardContent className={classes.cardContent}>\n        <Typography variant=\"h5\" component=\"h1\">\n          Start a new experiment\n        </Typography>\n        <Stepper activeStep={activeStep}>\n          {steps.map((step, index) => {\n            const stepProps = {};\n            const labelProps = {};\n            if (step.optional) {\n              labelProps.optional = <Typography variant=\"caption\">Optional</Typography>;\n            }\n            if (isStepSkipped(index)) {\n              stepProps.completed = false;\n            }\n            return (\n              <Step key={step.title} {...stepProps}>\n                <StepLabel {...labelProps}>{step.title}</StepLabel>\n              </Step>\n            );\n          })}\n        </Stepper>\n        <div>\n          {activeStep === steps.length ? (\n            <div>\n              <Typography className={classes.instructions}>\n                All steps completed - you&apos;re finished\n              </Typography>\n              <Button onClick={handleReset} className={classes.button}>\n                Reset\n              </Button>\n            </div>\n          ) : (\n            <div>\n              <Typography className={classes.instructions}>{getStepContent(activeStep)}</Typography>\n              <div>\n                <Button disabled={activeStep === 0} onClick={handleBack} className={classes.button}>\n                  Back\n                </Button>\n                {isStepOptional(activeStep) && (\n                  <Button\n                    variant=\"contained\"\n                    onClick={handleSkip}\n                    className={classes.button}\n                  >\n                    Skip\n                  </Button>\n                )}\n\n                <Button\n                  variant=\"contained\"\n                  onClick={handleNext}\n                  className={classes.button}\n                >\n                  {activeStep === steps.length - 1 ? 'Go to overview' : 'Next'}\n                </Button>\n              </div>\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n\n\n\nfunction StartNewExperiment(props) {\n    return (\n        <Grid container spacing={2} >\n          <Grid item xs={12}><Header /></Grid>\n\n          <Grid item xs={1}/>\n          <Grid item xs={10}>\n            <div><StartNewExperimentContainer config={props.config}/></div>\n          </Grid>\n          <Grid item xs={1}/>\n        </Grid>\n    )\n}\n\nexport default StartNewExperiment;\n\n","import React from \"react\";\n\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/Card';\nimport Button from '@material-ui/core/Button';\nimport Box from '@material-ui/core/Box';\nimport {Typography} from '@material-ui/core';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Select from '@material-ui/core/Select';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport { CodeFlaskReact } from \"react-codeflask\"\n\nimport Header from \"./components/Header\"\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\"\n  },\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n}));\n\nclass EditableCodeDiv extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      code: \"\",\n      openSnackbar: false,\n      filename: \"config.ini\",\n      snackbarMsg: \"\",\n      isRunning: false,\n      availableConfigs: [\n        {name: \"shared config.ini\", filename: \"config.ini\"},\n      ]\n    };\n    this.saveCurrentCode = this.saveCurrentCode.bind(this);\n  }\n\n  async getConfig(filename) {\n    await fetch(\"/get_config/\" + filename)\n      .then(response => {\n        return response.text();\n      })\n      .then(text => {\n        this.setState({code: text});\n      })\n  }\n\n  async getListOfConfigFiles(filename) {\n    await fetch(\"/get_configs\")\n      .then(response => {\n        return response.json();\n      })\n      .then(json => {\n        this.setState(prevState => ({\n          availableConfigs: [...prevState.availableConfigs, ...json.filter(e => (e !== 'config.ini')).map(e => ({name: e, filename: e}))]\n        }));\n      })\n  }\n\n  saveCurrentCode() {\n    this.setState({isRunning: true})\n    fetch('/save_new_config',{\n        method: \"POST\",\n        body: JSON.stringify({code :this.state.code, filename: this.state.filename}),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n    .then(res => {\n      if (res.ok) {\n        this.setState({snackbarMsg: this.state.filename + \" saved and synced.\"})\n      } else {\n        this.setState({snackbarMsg: \"Hm. Something when wrong saving or syncing...\"})\n      }\n      this.setState({openSnackbar: true, isRunning: false});\n    })\n  }\n\n  componentDidMount() {\n    this.getConfig(this.state.filename)\n    this.getListOfConfigFiles()\n  }\n\n  onSelectionChange = (e) => {\n    this.setState({filename: e.target.value})\n    this.getConfig(e.target.value)\n  }\n\n  getCodeFlaskRef = (codeFlask) => {\n    this.codeFlask = codeFlask\n  }\n\n  onTextChange = (code) => {\n    this.setState({code: code})\n  }\n\n  handleSnackbarClose = () => {\n    this.setState({openSnackbar: false});\n  };\n\n  render() {\n    const runningFeedback = this.state.isRunning ? <CircularProgress color=\"inherit\" size={25}/> : \"Save\"\n    return (\n      <React.Fragment>\n        <Select\n          style={{margin: \"10px 10px 10px 10px\"}}\n          native\n          value={this.state.filename}\n          onChange={this.onSelectionChange}\n          inputProps={{\n            name: 'config',\n            id: 'config',\n          }}\n        >\n          {this.state.availableConfigs.map((v) => {\n            return <option key={v.filename} value={v.filename}>{v.name}</option>\n            }\n          )}\n        </Select>\n\n        <div style={{letterSpacing: \"0em\", margin: \"10px auto 10px auto\", position: \"relative\", width: \"98%\", height: \"300px\", border: \"1px solid #ccc\"}}>\n          <CodeFlaskReact\n            code={this.state.code}\n            onChange={this.onTextChange}\n            editorRef={this.getCodeFlaskRef}\n            language={\"python\"}\n          />\n        </div>\n        <Button\n          style={{margin: \"5px 10px 5px 10px\"}}\n          color=\"primary\"\n          variant=\"contained\"\n          onClick={this.saveCurrentCode}\n          disabled={false}>\n          {runningFeedback}\n        </Button>\n        <Snackbar\n          anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n          open={this.state.openSnackbar}\n          onClose={this.handleSnackbarClose}\n          message={this.state.snackbarMsg}\n          autoHideDuration={2000}\n          key={\"edit-config-snackbar\"}\n        />\n      </React.Fragment>\n    )\n  }\n}\n\n\n\n\nfunction EditConfigContainer(){\n  const classes = useStyles();\n\n  return(\n    <React.Fragment>\n      <div>\n        <div>\n          <Typography variant=\"h5\" component=\"h2\">\n            <Box fontWeight=\"fontWeightBold\">\n              Edit config.ini\n            </Box>\n          </Typography>\n        </div>\n      </div>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n          <p>Update the <code>config.ini</code> files. The shared <code>config.ini</code> will be deployed to <em>all</em> Pioreactors, but can be overwritten with a specific Pioreactor's <code>config.ini</code>. <a href=\"https://github.com/Pioreactor/pioreactor/wiki/Configuration-via-config.ini\" target=\"_blank\">Learn more about Pioreactor configuration</a>.</p>\n          <EditableCodeDiv/>\n        </CardContent>\n      </Card>\n    </React.Fragment>\n)}\n\n\nfunction EditConfig() {\n    return (\n        <Grid container spacing={2} >\n          <Grid item xs={12}><Header /></Grid>\n          <Grid item md={12} xs={1}/>\n          <Grid item md={12} xs={1}/>\n\n          <Grid item md={1} xs={1}/>\n          <Grid item md={10} xs={12}>\n             <EditConfigContainer/>\n          </Grid>\n          <Grid item md={1} xs={1}/>\n        </Grid>\n    )\n}\n\nexport default EditConfig;\n\n","import React from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\n\nimport TactileButtonNotification from \"./components/TactileButtonNotification\";\nimport ExperimentOverview from \"./ExperimentOverview\";\nimport DownloadData from \"./DownloadData\";\nimport Pioreactors from \"./Pioreactors\";\nimport StartNewExperiment from \"./StartNewExperiment\";\nimport EditConfig from \"./EditConfig\";\n\nimport \"fontsource-roboto/300-normal.css\"\nimport \"fontsource-roboto/400-normal.css\"\nimport \"fontsource-roboto/500-normal.css\"\nimport \"fontsource-roboto/700-normal.css\"\nimport './styles.css';\nimport {parseINIString} from \"./utilities\"\n\n\nconst theme = createMuiTheme({\n  palette: {\n    background: {\n      default: \"#f6f6f7\",\n    },\n    primary: {\n      // light: will be calculated from palette.primary.main,\n      main: '#5331CA',\n      // dark: will be calculated from palette.primary.main,\n      // contrastText: will be calculated to contrast with palette.primary.main\n    },\n  },\n});\n\n\n\nfunction App() {\n\n  const [config, setConfig] = React.useState({})\n\n  React.useEffect(() => {\n\n    async function getConfig() {\n      await fetch(\"/get_config/config.ini\")\n        .then((response) => {\n            if (response.ok) {\n              return response.text();\n            } else {\n              throw new Error('Something went wrong');\n            }\n          })\n        .then((config) => {\n          setConfig(parseINIString(config)); // TODO: parse on server side and send a json object\n        })\n        .catch((error) => {})\n    }\n    getConfig();\n  }, [])\n\n  return (\n    <MuiThemeProvider theme={theme}>\n      <CssBaseline />\n      <Router>\n        <div className=\"pageContainer\">\n          <Switch>\n            <Route path=\"/download-data\">\n              <DownloadData config={config}/>\n              <TactileButtonNotification config={config}/>\n            </Route>\n            <Route path=\"/start-new-experiment\">\n              <StartNewExperiment config={config}/>\n              <TactileButtonNotification config={config}/>\n            </Route>\n            <Route path=\"/overview\">\n              <ExperimentOverview config={config}/>\n            </Route>\n            <Route path=\"/edit-config\">\n              <EditConfig config={config}/>\n              <TactileButtonNotification config={config}/>\n            </Route>\n            <Route path=\"/pioreactors\">\n              <Pioreactors config={config}/>\n            </Route>\n            <Route path=\"/\">\n              <ExperimentOverview config={config}/>\n            </Route>\n          </Switch>\n        </div>\n      </Router>\n    </MuiThemeProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport \"./styles.css\";\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}